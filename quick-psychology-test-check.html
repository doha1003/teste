<!DOCTYPE html>
<html lang="ko">
<head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>심리테스트 수정사항 검증</title> <style> body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; } .test-result { border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 10px 0; } .success { border-color: #28a745; background-color: #f8fff9; } .error { border-color: #dc3545; background-color: #fff8f8; } .warning { border-color: #ffc107; background-color: #fffdf8; } .status { font-weight: bold; margin-bottom: 10px; } button { background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; } button:hover { background: #0056b3; } #results { margin-top: 20px; } iframe { width: 100%; height: 600px; border: 1px solid #ddd; border-radius: 5px; margin: 10px 0; } </style>
</head>
<body> <h1>🔧 심리테스트 JavaScript 오류 수정 검증</h1> <p>각 테스트의 시작 버튼을 클릭하여 오류가 수정되었는지 확인합니다.</p> <button onclick="testTetoEgen()">테토-에겐 테스트</button> <button onclick="testLoveDNA()">러브 DNA 테스트</button> <button onclick="testMBTI()">MBTI 테스트</button> <button onclick="runAllTests()">전체 테스트</button> <div id="results"></div> <script> const results = {}; function createResultDiv(testName, status, details) { const div = document.createElement('div'); div.className = `test-result ${status}`; div.innerHTML = ` <div class="status">${testName}: ${status === 'success' ? '✅ 성공' : status === 'error' ? '❌ 실패' : '⚠️ 경고'}</div> <div>${details}</div> `; return div; } function testInIframe(testName, url) { return new Promise((resolve) => { const resultsDiv = document.getElementById('results'); // 기존 iframe 제거 const existingIframe = document.querySelector('iframe'); if (existingIframe) existingIframe.remove(); // 새 iframe 생성 const iframe = document.createElement('iframe'); iframe.src = url; iframe.onload = () => { console.log(`${testName} 로드 완료`); setTimeout(() => { try { const iframeDoc = iframe.contentDocument || iframe.contentWindow.document; // 콘솔 로그 확인 (제한적) const startButton = iframeDoc.querySelector('.test-start-button'); const hasStartButton = !!startButton; // 테스트 화면들 확인 const introScreen = iframeDoc.querySelector('#intro-screen'); const testScreen = iframeDoc.querySelector('#test-screen'); const resultScreen = iframeDoc.querySelector('#result-screen'); const hasRequiredElements = introScreen && testScreen; let status = 'success'; let details = ` 시작 버튼: ${hasStartButton ? '✅' : '❌'}<br> 필수 요소: ${hasRequiredElements ? '✅' : '❌'}<br> 인트로 화면: ${introScreen ? '✅' : '❌'}<br> 테스트 화면: ${testScreen ? '✅' : '❌'}<br> 결과 화면: ${resultScreen ? '✅' : '❌'} `; if (!hasStartButton || !hasRequiredElements) { status = 'error'; } results[testName] = { status, hasStartButton, hasRequiredElements }; const resultDiv = createResultDiv(testName, status, details); resultsDiv.appendChild(resultDiv); resolve({ testName, status, hasStartButton, hasRequiredElements }); } catch (error) { const errorDetails = `Cross-origin 제한으로 상세 검사 불가: ${error.message}`; const resultDiv = createResultDiv(testName, 'warning', errorDetails); resultsDiv.appendChild(resultDiv); results[testName] = { status: 'warning', error: error.message }; resolve({ testName, status: 'warning', error: error.message }); } }, 3000); // 3초 대기 }; iframe.onerror = (error) => { const errorDetails = `페이지 로드 실패: ${error}`; const resultDiv = createResultDiv(testName, 'error', errorDetails); resultsDiv.appendChild(resultDiv); results[testName] = { status: 'error', error }; resolve({ testName, status: 'error', error }); }; resultsDiv.appendChild(iframe); }); } async function testTetoEgen() { return await testInIframe('테토-에겐 테스트', '/tests/teto-egen/test.html'); } async function testLoveDNA() { return await testInIframe('러브 DNA 테스트', '/tests/love-dna/test.html'); } async function testMBTI() { return await testInIframe('MBTI 테스트', '/tests/mbti/test.html'); } async function runAllTests() { document.getElementById('results').innerHTML = '<h3>테스트 실행 중...</h3>'; const tests = [ { name: '테토-에겐 테스트', fn: testTetoEgen }, { name: '러브 DNA 테스트', fn: testLoveDNA }, { name: 'MBTI 테스트', fn: testMBTI } ]; let successCount = 0; for (const test of tests) { console.log(`${test.name} 시작...`); const result = await test.fn(); if (result.status === 'success') successCount++; // 각 테스트 간 1초 대기 await new Promise(resolve => setTimeout(resolve, 1000)); } // 최종 요약 const summaryDiv = document.createElement('div'); summaryDiv.className = 'test-result ' + (successCount === tests.length ? 'success' : 'warning'); summaryDiv.innerHTML = ` <div class="status">📊 전체 결과: ${successCount}/${tests.length} 성공</div> <div>성공한 테스트: ${successCount}개<br>실패한 테스트: ${tests.length - successCount}개</div> `; document.getElementById('results').appendChild(summaryDiv); console.log('전체 테스트 결과:', results); } // 페이지 로드 시 안내 console.log('🔧 심리테스트 수정사항 검증 도구'); console.log('각 버튼을 클릭하여 테스트를 실행하세요.'); </script>
</body>
</html>