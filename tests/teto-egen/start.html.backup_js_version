<!DOCTYPE html>
<html lang="ko">
<head>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>테토-에겐 성격 유형 테스트</title>
    <meta name="description" content="테토-에겐 성격 유형 테스트를 시작하세요. 10개의 간단한 질문으로 테토형과 에겐형 중 당신의 성향을 분석합니다.">
    
    <meta name="robots" content="index, follow">
    <meta name="author" content="doha.kr">
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), payment=(), usb=(), magnetometer=(), accelerometer=(), gyroscope=()">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://doha.kr/tests/teto-egen/start.html">
    <!-- Google AdSense 헤드 태그 (사용자 게시자 ID 적용) -->
    <!-- Moved to end of body -->
    
    <!-- 사이트 확인용 메타 태그 -->
    <meta name="google-adsense-account" content="ca-pub-7905640648499222">
    
    <!-- 카카오 JavaScript SDK -->
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.4/kakao.min.js"></script>
    
    <!-- JavaScript -->
    <script src="/js/api-config.js?v=1753150228"></script>
    <script src="/js/main.js?v=1753150228"></script>
    
    <!-- Favicon -->
    <link rel="icon" href="/images/placeholder-favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/images/logo.svg">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Quiz",
        "name": "테토-에겐 성격 유형 테스트",
        "description": "10가지 질문으로 테토형과 에겐형 중 당신의 성격 유형을 분석합니다",
        "educationalLevel": "All",
        "numberOfQuestions": 10,
        "timeRequired": "PT5M",
        "provider": {
            "@type": "Organization",
            "name": "doha.kr",
            "url": "https://doha.kr"
        },
        "isAccessibleForFree": true,
        "url": "https://doha.kr/tests/teto-egen/test.html"
    }
    </script>
    
    <!-- Optimized CSS System -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/pages/teto-egen-intro.css">

    <meta http-equiv="X-Content-Type-Options" content="nosniff">

    <script id="performance-monitor">

    window.addEventListener('load', function() {
        if (window.performance && window.performance.timing) {
            const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
            if (loadTime > 5000) {
                console.warn('Page loading is slow:', loadTime + 'ms');
            }
        }
    });
    </script>
</head>
<body>
    <main class="page-main">
    <!-- 네비게이션 -->
    <div id="navbar-placeholder"></div>

    <div class="test-container">
        <div class="test-header">
            <h1>테토-에겐 성격 유형 분석</h1>
            <p>과학적 접근법으로 알아보는 나의 성격 유형</p>
        </div>

        <div class="test-content">
            <!-- 헤더 광고 -->
            <div class="ad-container">
                <div class="ad-label">광고</div>
                
<div id="ad-container-vj5zvgdhe" style="min-height: 100px;">
    <div class="ad-placeholder" style="display: flex; align-items: center; justify-content: center; background: #f5f5f5; min-height: 100px; color: #999;">
        광고 로딩 중...
    </div>
</div>
<script>

if ('IntersectionObserver' in window) {
    const adObserver = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                const container = entry.target;
                container.innerHTML = `<ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-7905640648499222"
                     data-ad-slot="1234567890"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>`;
                if (typeof adsbygoogle !== 'undefined') {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                }
                adObserver.unobserve(container);
            }
        });
    }, { rootMargin: '50px' });
    
    const adContainer = document.getElementById('ad-container-vj5zvgdhe');
    if (adContainer) {
        adObserver.observe(adContainer);
    }
}
</script>
            </div>

            <!-- 테스트 시작 전 안내 -->
            <div id="intro-screen" class="test-info">
                <h3>당신의 성격 유형을 발견하세요!</h3>
                <p>
                    10개의 간단한 질문으로 당신만의 고유한 성격 유형을 분석합니다. 
                    테토(Teto)와 에겐(Egen) 두 가지 성향을 바탕으로 총 4가지 유형으로 분류하여
                    상세한 분석 결과를 제공합니다.
                </p>
                
                <div class="test-intro-grid">
                    <div class="test-intro-card">
                        <span class="test-intro-icon">🎯</span>
                        <div class="test-intro-title">정확한 분석</div>
                        <div class="test-intro-desc">과학적 근거에 기반한 성격 분석</div>
                    </div>
                    <div class="test-intro-card">
                        <span class="test-intro-icon">⚡</span>
                        <div class="test-intro-title">빠른 테스트</div>
                        <div class="test-intro-desc">5분 만에 완료하는 간편한 테스트</div>
                    </div>
                    <div class="test-intro-card">
                        <span class="test-intro-icon">📊</span>
                        <div class="test-intro-title">상세한 결과</div>
                        <div class="test-intro-desc">개인 맞춤형 분석 결과 제공</div>
                    </div>
                    <div class="test-intro-card">
                        <span class="test-intro-icon">💡</span>
                        <div class="test-intro-title">실용적 조언</div>
                        <div class="test-intro-desc">실생활에 적용 가능한 조언</div>
                    </div>
                </div>
                
                <button class="test-btn" onclick="startTest()">테스트 시작하기</button>
            </div>

            <!-- 테스트 화면 -->
            <div id="test-screen" class="hidden">
                <div class="progress-container">
                    <div class="progress-text">
                        <span id="progress-text">질문 0 / 10</span>
                        <span id="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar" id="progress"></div>
                </div>
                
                <div class="question-container">
                    <div class="question-title" id="question"></div>
                    <div class="question-options" id="options"></div>
                </div>

                <div class="share-container">
                    <button class="btn btn-secondary" id="prev-btn" onclick="previousQuestion()">이전</button>
                    <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()">다음</button>
                </div>
            </div>

            <!-- 결과 화면 -->
            <div id="result-screen" class="result-container hidden">
                <div class="collection-card" id="result-card">
                    <div class="card-rarity" id="card-rarity">LEGENDARY</div>
                    <div class="card-inner">
                        <div class="card-avatar" id="card-avatar">🦋</div>
                        <div class="result-type" id="result-type"></div>
                        <div class="result-description" id="result-description"></div>
                        <div class="card-stats" id="card-stats"></div>
                    </div>
                </div>
                
                <div class="ad-container">
                    <div class="ad-label">광고</div>
                    
<div id="ad-container-qzxahja5e" style="min-height: 100px;">
    <div class="ad-placeholder" style="display: flex; align-items: center; justify-content: center; background: #f5f5f5; min-height: 100px; color: #999;">
        광고 로딩 중...
    </div>
</div>
<script>

if ('IntersectionObserver' in window) {
    const adObserver = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                const container = entry.target;
                container.innerHTML = `<ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-7905640648499222"
                         data-ad-slot="2345678901"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>`;
                if (typeof adsbygoogle !== 'undefined') {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                }
                adObserver.unobserve(container);
            }
        });
    }, { rootMargin: '50px' });
    
    const adContainer = document.getElementById('ad-container-qzxahja5e');
    if (adContainer) {
        adObserver.observe(adContainer);
    }
}
</script>
                </div>

                <div class="traits-section">
                    <h2 class="section-title">주요 성격 특성</h2>
                    <div class="result-traits" id="result-traits"></div>
                </div>
                
                <div class="compatibility" id="compatibility"></div>

                <div id="detailed-analysis" class="test-info">
                    <h3>심층 성격 분석</h3>
                    
                    <div class="feature-card" id="career-analysis">
                        <div class="feature-icon">💼</div>
                        <div class="feature-title">직업 및 커리어 가이드</div>
                        <div class="feature-description" id="career-content"></div>
                    </div>
                    
                    <div class="feature-card" id="relationship-analysis">
                        <div class="feature-icon">💝</div>
                        <div class="feature-title">연애 및 대인관계 분석</div>
                        <div class="feature-description" id="relationship-content"></div>
                    </div>
                    
                    <div class="feature-card" id="stress-analysis">
                        <div class="feature-icon">🧘</div>
                        <div class="feature-title">스트레스 대처법</div>
                        <div class="feature-description" id="stress-content"></div>
                    </div>
                    
                    <div class="feature-card" id="growth-analysis">
                        <div class="feature-icon">🌱</div>
                        <div class="feature-title">성장 가이드</div>
                        <div class="feature-description" id="growth-content"></div>
                    </div>
                </div>
                
                <div class="ad-container">
                    <div class="ad-label">광고</div>
                    
<div id="ad-container-xa6u62aiv" style="min-height: 100px;">
    <div class="ad-placeholder" style="display: flex; align-items: center; justify-content: center; background: #f5f5f5; min-height: 100px; color: #999;">
        광고 로딩 중...
    </div>
</div>
<script>

if ('IntersectionObserver' in window) {
    const adObserver = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                const container = entry.target;
                container.innerHTML = `<ins class="adsbygoogle"
                         style="display:block"
                         data-ad-client="ca-pub-7905640648499222"
                         data-ad-slot="3456789012"
                         data-ad-format="auto"
                         data-full-width-responsive="true"></ins>`;
                if (typeof adsbygoogle !== 'undefined') {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                }
                adObserver.unobserve(container);
            }
        });
    }, { rootMargin: '50px' });
    
    const adContainer = document.getElementById('ad-container-xa6u62aiv');
    if (adContainer) {
        adObserver.observe(adContainer);
    }
}
</script>
                </div>

                <div class="share-container">
                    <div class="section-title" style="font-size: 1.25rem;">내 성격 유형을 친구들과 공유해보세요!</div>
                    <button class="share-btn kakao-btn" onclick="shareKakao()">
                        <span>💬</span>
                        카카오톡으로 공유하기
                    </button>
                </div>
                
                <button class="test-btn" onclick="restartTest()">새로운 테스트 시작</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer-placeholder"></div>

    <!-- External JavaScript -->
    
    <!-- 테스트 로직 -->
    <script>

    const questions = [
        {
            question: "새로운 환경에서 처음 만난 사람들과 함께 있을 때, 당신의 행동은?",
            options: [
                { text: "먼저 다가가서 자연스럽게 대화를 시작한다", type: "teto" },
                { text: "상대방이 먼저 말을 걸 때까지 기다린다", type: "egen" }
            ]
        },
        {
            question: "문제가 생겼을 때 당신의 해결 방식은?",
            options: [
                { text: "즉시 행동에 옮겨 빠르게 해결하려 한다", type: "teto" },
                { text: "충분히 생각한 후 신중하게 접근한다", type: "egen" }
            ]
        },
        {
            question: "주말 계획을 세울 때 당신은?",
            options: [
                { text: "친구들과 활동적인 야외 활동을 선호한다", type: "teto" },
                { text: "집에서 혼자만의 시간을 보내고 싶다", type: "egen" }
            ]
        },
        {
            question: "팀 프로젝트에서 당신의 역할은?",
            options: [
                { text: "팀을 이끌고 전체적인 방향을 제시한다", type: "teto" },
                { text: "뒤에서 묵묵히 맡은 일을 완벽하게 해낸다", type: "egen" }
            ]
        },
        {
            question: "스트레스를 받을 때 당신의 대처법은?",
            options: [
                { text: "친구들과 만나서 이야기하며 해소한다", type: "teto" },
                { text: "혼자만의 시간을 가지며 차분히 정리한다", type: "egen" }
            ]
        },
        {
            question: "의견 충돌이 생겼을 때 당신은?",
            options: [
                { text: "적극적으로 내 의견을 표현하고 설득한다", type: "teto" },
                { text: "상대방의 의견을 먼저 들어보고 조화점을 찾는다", type: "egen" }
            ]
        },
        {
            question: "새로운 도전 앞에서 당신의 마음가짐은?",
            options: [
                { text: "두려움보다는 설렘과 기대감이 더 크다", type: "teto" },
                { text: "신중하게 준비하고 리스크를 최소화하려 한다", type: "egen" }
            ]
        },
        {
            question: "감정 표현에 대한 당신의 성향은?",
            options: [
                { text: "솔직하고 직접적으로 감정을 표현한다", type: "teto" },
                { text: "은근하고 섬세하게 감정을 드러낸다", type: "egen" }
            ]
        },
        {
            question: "휴식을 취하는 당신만의 방법은?",
            options: [
                { text: "활동적인 취미나 운동으로 에너지를 충전한다", type: "teto" },
                { text: "조용한 곳에서 책을 읽거나 명상을 한다", type: "egen" }
            ]
        },
        {
            question: "인생에서 가장 중요하게 생각하는 가치는?",
            options: [
                { text: "도전과 성취, 그리고 영향력", type: "teto" },
                { text: "안정과 조화, 그리고 평온함", type: "egen" }
            ]
        }
    ];

    let currentQuestion = 0;
    let answers = [];

    function startTest() {
        document.getElementById('intro-screen').style.display = 'none';
        document.getElementById('test-screen').style.display = 'block';
        showQuestion(0);
    }

    function showQuestion(index) {
        const question = questions[index];
        document.getElementById('question').textContent = question.question;
        
        const optionsContainer = document.getElementById('options');
        optionsContainer.innerHTML = '';
        
        question.options.forEach((option, i) => {
            const optionElement = document.createElement('div');
            optionElement.className = 'option-btn';
            optionElement.textContent = option.text;
            optionElement.onclick = () => selectOption(i);
            optionsContainer.appendChild(optionElement);
        });
        
        updateProgress();
        updateNavigation();
    }

    function selectOption(optionIndex) {
        const options = document.querySelectorAll('.option-btn');
        options.forEach(opt => opt.classList.remove('selected'));
        options[optionIndex].classList.add('selected');
        
        answers[currentQuestion] = {
            questionIndex: currentQuestion,
            optionIndex: optionIndex,
            type: questions[currentQuestion].options[optionIndex].type
        };
        
        document.getElementById('next-btn').disabled = false;
    }

    function nextQuestion() {
        if (answers[currentQuestion]) {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                showResult();
            }
        }
    }

    function previousQuestion() {
        if (currentQuestion > 0) {
            currentQuestion--;
            showQuestion(currentQuestion);
        }
    }

    function updateProgress() {
        const progress = ((currentQuestion + 1) / questions.length) * 100;
        document.getElementById('progress').style.width = progress + '%';
        document.getElementById('progress-text').textContent = `질문 ${currentQuestion + 1} / ${questions.length}`;
        document.getElementById('progress-percent').textContent = Math.round(progress) + '%';
    }

    function updateNavigation() {
        document.getElementById('prev-btn').disabled = currentQuestion === 0;
        document.getElementById('next-btn').disabled = !answers[currentQuestion];
    }

    function showResult() {
        document.getElementById('test-screen').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';

        const tetoCount = answers.filter(a => a.type === 'teto').length;
        const egenCount = answers.filter(a => a.type === 'egen').length;
        
        let resultType, resultDescription, avatar;
        
        if (tetoCount > egenCount) {
            resultType = "테토형 (Teto Type)";
            resultDescription = "당신은 적극적이고 주도적인 성격의 소유자입니다. 새로운 도전을 즐기며 리더십이 강한 유형입니다.";
            avatar = "💪";
        } else {
            resultType = "에겐형 (Egen Type)";
            resultDescription = "당신은 신중하고 조화로운 성격의 소유자입니다. 깊이 있는 사고와 안정성을 추구하는 유형입니다.";
            avatar = "🌸";
        }
        
        document.getElementById('result-type').textContent = resultType;
        document.getElementById('result-description').textContent = resultDescription;
        document.getElementById('card-avatar').textContent = avatar;
    }

    function restartTest() {
        currentQuestion = 0;
        answers = [];
        document.getElementById('result-screen').style.display = 'none';
        document.getElementById('intro-screen').style.display = 'block';
    }

    function shareKakao() {
        if (typeof Kakao !== 'undefined' && Kakao.isInitialized()) {
            Kakao.Share.sendDefault({
                objectType: 'feed',
                content: {
                    title: '테토-에겐 성격 유형 테스트 결과',
                    description: document.getElementById('result-description').textContent,
                    imageUrl: 'https://doha.kr/images/teto-egen-share.png',
                    link: {
                        mobileWebUrl: window.location.href,
                        webUrl: window.location.href
                    }
                },
                buttons: [{
                    title: '나도 테스트하기',
                    link: {
                        mobileWebUrl: 'https://doha.kr/tests/teto-egen/',
                        webUrl: 'https://doha.kr/tests/teto-egen/'
                    }
                }]
            });
        } else {
            alert('카카오톡 공유 기능을 불러올 수 없습니다.');
        }
    }
    </script>
    
    <!-- AdSense initialization -->
    

    <!-- Non-critical scripts moved here for performance -->
    
<!-- Google AdSense 지연 로딩 -->
<script>

window.addEventListener('load', function() {
    setTimeout(function() {
        var adsScript = document.createElement('script');
        adsScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7905640648499222';
        adsScript.crossOrigin = 'anonymous';
        adsScript.defer = true;
        document.head.appendChild(adsScript);
    }, 2000);
});
</script>

<script>

window.adsenseInitialized = window.adsenseInitialized || false;

function initializeAdSense() {
    if (window.adsenseInitialized) {
        console.log('AdSense already initialized');
        return;
    }
    
    window.adsenseInitialized = true;

    const adBlocks = document.querySelectorAll('.adsbygoogle');
    adBlocks.forEach((ad, index) => {
        if (!ad.dataset.adsbygoogleStatus) {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                console.log('AdSense block initialized:', index);
            } catch (error) {
                console.warn('AdSense initialization error:', error);
            }
        }
    });
}

window.addEventListener('load', function() {
    setTimeout(initializeAdSense, 1000);
});
</script>

<script>

(function() {
    'use strict';

    window.__adsenseLoaded = window.__adsenseLoaded || false;
    window.__adsenseQueue = window.__adsenseQueue || [];
    
    function initAdsense() {
        if (window.__adsenseLoaded) return;
        
        const ads = document.querySelectorAll('.adsbygoogle:not([data-adsbygoogle-status])');
        
        if (ads.length === 0) return;

        if (typeof adsbygoogle === 'undefined') {
            setTimeout(initAdsense, 500);
            return;
        }
        
        window.__adsenseLoaded = true;

        ads.forEach((ad, index) => {
            try {

                if (ad.getAttribute('data-adsbygoogle-status')) return;

                (adsbygoogle = window.adsbygoogle || []).push({});

                ad.setAttribute('data-adsbygoogle-status', 'done');
                
            } catch (e) {
                console.warn('AdSense 초기화 실패:', index, e.message);
            }
        });
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initAdsense, 1000);
        });
    } else {
        setTimeout(initAdsense, 1000);
    }

    window.addEventListener('error', function(e) {
        if (e.message && e.message.includes('adsbygoogle.push() error')) {
            e.preventDefault();
            console.warn('AdSense 중복 초기화 방지됨');
            return false;
        }
    }, true);
})();
</script>

<!-- AdSense 통합 초기화 -->
<script>
(function() {
    'use strict';

    window.__adsInitialized = false;

    function initializeAds() {
        if (window.__adsInitialized) return;
        
        const ads = document.querySelectorAll('.adsbygoogle:not([data-adsbygoogle-status])');
        if (ads.length === 0) return;

        if (typeof adsbygoogle === 'undefined') {
            setTimeout(initializeAds, 100);
            return;
        }
        
        window.__adsInitialized = true;

        ads.forEach((ad) => {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                ad.setAttribute('data-adsbygoogle-status', 'done');
            } catch (e) {

            }
        });
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initializeAds, 500);
        });
    } else {
        setTimeout(initializeAds, 500);
    }

    window.addEventListener('error', function(e) {
        if (e.message && e.message.includes('adsbygoogle.push() error')) {
            e.preventDefault();
            e.stopPropagation();
            return false;
        }
    }, true);
})();
</script>

<script>
// 네비게이션 및 푸터 로드 - main.js의 loadComponents가 실행되지 않은 경우를 위한 폴백
document.addEventListener('DOMContentLoaded', function() {
    // main.js가 로드되었고 loadComponents 함수가 있는지 확인
    if (typeof loadComponents === 'function') {
        // main.js의 DOMContentLoaded가 이미 실행되었을 수 있으므로 
        // navbar-placeholder가 비어있으면 다시 실행
        const navPlaceholder = document.getElementById('navbar-placeholder');
        const footerPlaceholder = document.getElementById('footer-placeholder');
        
        if ((navPlaceholder && !navPlaceholder.innerHTML.trim()) || 
            (footerPlaceholder && !footerPlaceholder.innerHTML.trim())) {
            console.log('Loading components...');
            loadComponents().catch(function(error) {
                console.error('Failed to load components:', error);
            });
        }
    }
});
</script>
    </main>
</body>
</html>