<!DOCTYPE html>
<html lang="ko">
<head>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com;">

<script id="performance-monitor">
// 개선된 성능 모니터링
window.addEventListener('load', function() {
    if (window.performance && window.performance.timing) {
        const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
        console.log('페이지 로딩 시간:', loadTime + 'ms');
        
        if (loadTime > 10000) {
            console.warn('페이지 로딩이 느립니다:', loadTime + 'ms');
        }
        
        // 리소스 로딩 분석
        const resources = performance.getEntriesByType('resource');
        const slowResources = resources.filter(r => r.duration > 1000);
        if (slowResources.length > 0) {
            console.warn('느린 리소스들:', slowResources.map(r => ({ name: r.name, duration: r.duration })));
        }
    }
});

// CSP 오류 감지
window.addEventListener('securitypolicyviolation', function(e) {
    console.warn('CSP 위반 감지:', {
        directive: e.violatedDirective,
        source: e.sourceFile,
        line: e.lineNumber
    });
});
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>무료 심리테스트 모음 - MBTI, 테토에겐, 러브DNA 성격분석 | doha.kr</title>
    <meta name="description" content="무료 심리테스트로 나를 발견하세요! MBTI 성격유형검사, 테토-에겐 테스트, 러브DNA 연애스타일 분석 등 정확하고 재미있는 성격분석 테스트를 제공합니다. 회원가입 없이 바로 시작할 수 있으며, 친구들과 결과를 공유하고 비교해보세요.">
    <meta name="keywords" content="심리테스트, MBTI, 테토에겐, 러브DNA, 성격테스트, 성격유형검사, 무료테스트, 심리분석, 성격분석, 연애테스트">
    <meta name="robots" content="index, follow">
    <meta name="author" content="doha.kr">
    
    <!-- Security Headers -->
    <!-- Canonical URL -->
    <link rel="canonical" href="https://doha.kr/tests/">
    self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), payment=(), usb=(), magnetometer=(), accelerometer=(), gyroscope=()">
    
    <!-- Open Graph -->
    <meta property="og:title" content="무료 심리테스트 모음 - MBTI, 테토에겐, 러브DNA">
    <meta property="og:description" content="무료 심리테스트로 나를 발견하세요! MBTI, 테토-에겐, 러브DNA 등 정확하고 재미있는 성격분석 테스트">
    <meta property="og:image" content="https://doha.kr/images/egen-male-card.jpg">
    <meta property="og:url" content="https://doha.kr/tests/">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:site_name" content="doha.kr">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="무료 심리테스트 모음 - MBTI, 테토에겐, 러브DNA">
    <meta name="twitter:description" content="무료 심리테스트로 나를 발견하세요! MBTI, 테토-에겐, 러브DNA 등 정확하고 재미있는 성격분석 테스트">
    <meta name="twitter:image" content="https://doha.kr/images/egen-male-card.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://doha.kr/tests/">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" crossorigin href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/pages/tests-index.css">
    <link rel="stylesheet" href="/css/layout-fixes.css">
    
    <!-- Favicon -->
    <link rel="icon" href="/images/placeholder-favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/images/logo.svg">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Google AdSense -->
    <!-- Moved to end of body -->
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "CollectionPage",
        "name": "무료 심리테스트 모음",
        "description": "MBTI 성격유형검사, 테토-에겐 테스트, 러브DNA 연애스타일 분석 등 다양한 무료 심리테스트를 제공합니다",
        "url": "https://doha.kr/tests/",
        "provider": {
            "@type": "Organization",
            "name": "doha.kr",
            "url": "https://doha.kr"
        },
        "mainEntity": [
            {
                "@type": "Quiz",
                "name": "MBTI 성격유형 검사",
                "description": "16가지 성격유형 중 나의 유형을 찾는 심리테스트",
                "url": "https://doha.kr/tests/mbti/",
                "numberOfQuestions": 60,
                "timeRequired": "PT15M"
            },
            {
                "@type": "Quiz",
                "name": "테토-에겐 성격 유형 테스트",
                "description": "테토형과 에겐형으로 나누는 독특한 성격분석 테스트",
                "url": "https://doha.kr/tests/teto-egen/",
                "numberOfQuestions": 10,
                "timeRequired": "PT5M"
            },
            {
                "@type": "Quiz",
                "name": "러브 DNA 테스트",
                "description": "25개 질문으로 알아보는 나만의 연애스타일 분석",
                "url": "https://doha.kr/tests/love-dna/",
                "numberOfQuestions": 25,
                "timeRequired": "PT10M"
            }
        ]
    }
    </script>
    
    <!-- FAQ Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "테토-에겐 테스트란 무엇인가요?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "테토-에겐 테스트는 당신의 성격이 테토형인지 에겐형인지 알아보는 독특한 성격 분석 테스트입니다. 10가지 질문으로 당신의 진짜 성격을 발견할 수 있습니다."
                }
            },
            {
                "@type": "Question",
                "name": "MBTI 성격유형 검사는 어떻게 진행되나요?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "MBTI 검사는 16가지 성격 유형 중 당신의 유형을 찾아주는 과학적으로 검증된 테스트입니다. 60문항의 질문에 답하며, 약 10분 정도 소요됩니다."
                }
            },
            {
                "@type": "Question",
                "name": "심리테스트는 무료인가요?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "네, doha.kr의 모든 심리테스트는 완전히 무료로 제공됩니다. 가입이나 결제 없이 누구나 이용할 수 있습니다."
                }
            }
        ]
    }
    </script>
    <!-- Optimized CSS System -->
    <link rel="stylesheet" href="/css/styles.css">
    self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com;">
</head>
<body>
    <!-- 네비게이션 바 -->
    <div id="navbar-placeholder"></div>
    
    <!-- 헤더 섹션 -->
    <header class="header">
        <div class="header-content">
            <h1 class="header-title">심리테스트</h1>
            <p class="header-subtitle">
                재미있는 심리테스트로 나를 알아보세요!
            </p>
        </div>
    </header>
    
    <!-- 메인 컨텐츠 -->
    <div class="container">
        <div class="tests-grid">
            <!-- 테토-에겐 테스트 -->
            <a href="/tests/teto-egen/" class="test-card">
                <span class="test-icon">🦋</span>
                <h2 class="test-title">테토-에겐 테스트</h2>
                <p class="test-description">
                    당신의 성격이 테토형인지 에겐형인지 알아보는 독특한 성격 분석 테스트입니다. 
                    10가지 질문으로 당신의 진짜 성격을 발견하세요.
                </p>
                <div class="test-stats">
                    <span class="test-stat">⏰ 5분 소요</span>
                    <span class="test-stat">❓ 10문항</span>
                    <span class="test-stat">🔥 인기</span>
                </div>
                <span class="test-button">테스트 시작하기</span>
            </a>
            
            <!-- MBTI 테스트 -->
            <a href="/tests/mbti/" class="test-card">
                <span class="test-icon">🎭</span>
                <h2 class="test-title">MBTI 성격유형 검사</h2>
                <p class="test-description">
                    16가지 성격 유형 중 나는 어떤 유형일까요? 과학적으로 검증된 
                    MBTI 검사로 당신의 성격을 정확히 분석해보세요.
                </p>
                <div class="test-stats">
                    <span class="test-stat">⏰ 10분 소요</span>
                    <span class="test-stat">❓ 24문항</span>
                    <span class="test-stat">✨ 정확</span>
                </div>
                <span class="test-button">테스트 시작하기</span>
            </a>
            
            <!-- 러브 DNA 테스트 -->
            <a href="/tests/love-dna/" class="test-card">
                <span class="test-icon">💕</span>
                <h2 class="test-title">러브 DNA 테스트</h2>
                <p class="test-description">
                    L-O-V-E-D 5축 분석으로 당신만의 연애 스타일을 발견하세요. 
                    32가지 러브 DNA 유형 중 나는 어떤 연애 스타일일까요?
                </p>
                <div class="test-stats">
                    <span class="test-stat">⏰ 8분 소요</span>
                    <span class="test-stat">❓ 25문항</span>
                    <span class="test-stat">🔥 NEW</span>
                </div>
                <span class="test-button">테스트 시작하기</span>
            </a>
        </div>
        
        <!-- 광고 영역 -->
        <div class="ad-container">
            <div class="ad-label">광고</div>
            
<div id="ad-container-kdro6pp40" style="min-height: 100px;">
    <div class="ad-placeholder" style="display: flex; align-items: center; justify-content: center; background: #f5f5f5; min-height: 100px; color: #999;">
        광고 로딩 중...
    </div>
</div>
<script>
// Intersection Observer로 광고 지연 로딩
if ('IntersectionObserver' in window) {
    const adObserver = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                const container = entry.target;
                container.innerHTML = `<ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-7905640648499222"
                 data-ad-slot="5784361252"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>`;
                if (typeof adsbygoogle !== 'undefined') {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                }
                adObserver.unobserve(container);
            }
        });
    }, { rootMargin: '50px' });
    
    const adContainer = document.getElementById('ad-container-kdro6pp40');
    if (adContainer) {
        adObserver.observe(adContainer);
    }
}
</script>
        </div>
    </div>
    
    <!-- 푸터 -->
    <div id="footer-placeholder"></div>
    
    <!-- External JavaScript -->
    <script defer src="/js/api-config.js"></script>
    <script src="/js/bundle.min.js" defer></script>
    <script src="/js/main.min.js"></script>
    
    <!-- AdSense initialization -->
    <script>
        // 애드센스 광고 로드
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <!-- Non-critical scripts moved here for performance -->
    
<!-- Google AdSense 지연 로딩 -->
<script>
// AdSense 지연 로딩 (페이지 로드 후 2초 대기)
window.addEventListener('load', function() {
    setTimeout(function() {
        var adsScript = document.createElement('script');
        adsScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7905640648499222';
        adsScript.crossOrigin = 'anonymous';
        adsScript.defer = true;
        document.head.appendChild(adsScript);
    }, 2000);
});
</script>

<script>
// AdSense 중복 초기화 방지
window.adsenseInitialized = window.adsenseInitialized || false;

function initializeAdSense() {
    if (window.adsenseInitialized) {
        console.log('AdSense already initialized');
        return;
    }
    
    window.adsenseInitialized = true;
    
    // 기존 광고 블록 확인 및 초기화
    const adBlocks = document.querySelectorAll('.adsbygoogle');
    adBlocks.forEach((ad, index) => {
        if (!ad.dataset.adsbygoogleStatus) {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                console.log('AdSense block initialized:', index);
            } catch (error) {
                console.warn('AdSense initialization error:', error);
            }
        }
    });
}

// 페이지 로드 후 AdSense 초기화
window.addEventListener('load', function() {
    setTimeout(initializeAdSense, 1000);
});
</script>

<script>
// 통합 AdSense 초기화 (중복 방지)
(function() {
    'use strict';
    
    // 전역 플래그로 초기화 상태 관리
    window.__adsenseLoaded = window.__adsenseLoaded || false;
    window.__adsenseQueue = window.__adsenseQueue || [];
    
    function initAdsense() {
        if (window.__adsenseLoaded) return;
        
        const ads = document.querySelectorAll('.adsbygoogle:not([data-adsbygoogle-status])');
        
        if (ads.length === 0) return;
        
        // AdSense 스크립트가 로드되었는지 확인
        if (typeof adsbygoogle === 'undefined') {
            setTimeout(initAdsense, 500);
            return;
        }
        
        window.__adsenseLoaded = true;
        
        // 각 광고 슬롯 초기화
        ads.forEach((ad, index) => {
            try {
                // 중복 초기화 방지
                if (ad.getAttribute('data-adsbygoogle-status')) return;
                
                // 초기화 시도
                (adsbygoogle = window.adsbygoogle || []).push({});
                
                // 상태 표시
                ad.setAttribute('data-adsbygoogle-status', 'done');
                
            } catch (e) {
                console.warn('AdSense 초기화 실패:', index, e.message);
            }
        });
    }
    
    // 페이지 로드 완료 후 초기화
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initAdsense, 1000);
        });
    } else {
        setTimeout(initAdsense, 1000);
    }
    
    // 에러 핸들러 추가
    window.addEventListener('error', function(e) {
        if (e.message && e.message.includes('adsbygoogle.push() error')) {
            e.preventDefault();
            console.warn('AdSense 중복 초기화 방지됨');
            return false;
        }
    }, true);
})();
</script>

<!-- AdSense 통합 초기화 -->
<script>
(function() {
    'use strict';
    
    // 전역 초기화 플래그
    window.__adsInitialized = false;
    
    // AdSense 초기화 함수
    function initializeAds() {
        if (window.__adsInitialized) return;
        
        const ads = document.querySelectorAll('.adsbygoogle:not([data-adsbygoogle-status])');
        if (ads.length === 0) return;
        
        // AdSense 라이브러리 로드 확인
        if (typeof adsbygoogle === 'undefined') {
            setTimeout(initializeAds, 100);
            return;
        }
        
        window.__adsInitialized = true;
        
        // 각 광고 초기화
        ads.forEach((ad) => {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                ad.setAttribute('data-adsbygoogle-status', 'done');
            } catch (e) {
                // 오류 무시
            }
        });
    }
    
    // DOM 로드 후 실행
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initializeAds, 500);
        });
    } else {
        setTimeout(initializeAds, 500);
    }
    
    // 전역 에러 핸들러로 AdSense 오류 차단
    window.addEventListener('error', function(e) {
        if (e.message && e.message.includes('adsbygoogle.push() error')) {
            e.preventDefault();
            e.stopPropagation();
            return false;
        }
    }, true);
})();
</script>
</body>
</html>