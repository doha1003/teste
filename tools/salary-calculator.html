<!DOCTYPE html>
<html lang="ko">
<head>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com;">

<script id="performance-monitor">
// 개선된 성능 모니터링
window.addEventListener('load', function() {
    if (window.performance && window.performance.timing) {
        const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
        console.log('페이지 로딩 시간:', loadTime + 'ms');
        
        if (loadTime > 10000) {
            console.warn('페이지 로딩이 느립니다:', loadTime + 'ms');
        }
        
        // 리소스 로딩 분석
        const resources = performance.getEntriesByType('resource');
        const slowResources = resources.filter(r => r.duration > 1000);
        if (slowResources.length > 0) {
            console.warn('느린 리소스들:', slowResources.map(r => ({ name: r.name, duration: r.duration })));
        }
    }
});

// CSP 오류 감지
window.addEventListener('securitypolicyviolation', function(e) {
    console.warn('CSP 위반 감지:', {
        directive: e.violatedDirective,
        source: e.sourceFile,
        line: e.lineNumber
    });
});
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>연봉 실수령액 계산기 - 2025년 최신 세율 | doha.kr</title>
    <meta name="description" content="2025년 최신 간이세액표 적용! 연봉, 세금, 4대보험료를 정확하게 계산하여 실제 월급을 확인하세요. 소득세, 지방소득세, 국민연금, 건강보험료, 장기요양보험료, 고용보험료 등 모든 공제항목을 포함한 정확한 계산으로 실수령액을 확인하세요. 부양가족 수, 20세 이하 자녀 수를 고려한 세액공제도 반영됩니다. 근로소득세액공제 및 비과세 한도까지 모두 적용하여 가장 정확한 실수령액을 제공합니다. 2025년 최신 보험요율과 상한액을 반영하여 대기업, 중소기업, 스타트업 등 모든 직장에서 활용 가능합니다. 월급 또는 연봉 협상 시 필수 도구로 활용하세요. 무료로 제공되며 회원가입 없이 바로 사용 가능합니다.">
    <meta name="keywords" content="연봉계산기, 실수령액, 세금계산, 월급계산, 소득세, 지방소득세, 국민연금, 건강보험료, 2025년">
    
    <!-- Open Graph -->
    <meta property="og:title" content="연봉 실수령액 계산기 - 2025년 최신 세율 반영">
    <meta property="og:description" content="2025년 최신 간이세액표 및 4대보험 요율을 반영한 정확한 연봉 실수령액 계산기. 세금, 보험료 모두 포함">
    <meta property="og:image" content="https://doha.kr/images/egen-male-card.jpg">
    <meta property="og:url" content="https://doha.kr/tools/salary-calculator.html">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:site_name" content="doha.kr">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="연봉 실수령액 계산기 - 2025년 최신 세율 반영">
    <meta name="twitter:description" content="2025년 최신 간이세액표 및 4대보험 요율을 반영한 정확한 연봉 실수령액 계산기. 세금, 보험료 모두 포함">
    <meta name="twitter:image" content="https://doha.kr/images/egen-male-card.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://doha.kr/tools/salary-calculator.html">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" crossorigin href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/pages/salary-calculator.css">
    
    <!-- Google AdSense -->
    <!-- Moved to end of body -->
    
    <!-- Favicon -->
    <link rel="icon" href="/images/logo.svg" type="image/svg+xml">
    
    <!-- DOMPurify for XSS protection -->
    <script defer src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js" crossorigin="anonymous"></script>
    
    <!-- Content Security Policy -->
    self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://cdn.jsdelivr.net https://fundingchoicesmessages.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:;">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "연봉 실수령액 계산기",
        "url": "https://doha.kr/tools/salary-calculator.html",
        "description": "2025년 최신 간이세액표 및 4대보험 요율을 반영한 정확한 연봉 실수령액 계산기",
        "applicationCategory": "FinanceApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "KRW"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "3420"
        },
        "featureList": [
            "2025년 최신 세율 적용",
            "4대보험 요율 자동 계산",
            "부양가족 및 자녀 세액공제",
            "비과세 한도 적용",
            "월급 및 연봉 동시 표시"
        ]
    }
    </script>
    
    <!-- Optimized CSS System -->
    <link rel="stylesheet" href="/css/styles.css">
    self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com;">
</head>
<body>
    <!-- 네비게이션 바 -->
    <div id="navbar-placeholder"></div>
    
    <div class="salary-calculator-container">
        <div class="calculator-header">
            <h1>💰 연봉 실수령액 계산기 <span class="year-badge">2025년</span></h1>
            <p>2025년 최신 간이세액표 기준으로 정확한 실수령액을 계산해드립니다.<br>
            세금과 4대보험료를 모두 반영한 실제 월급을 확인하세요.</p>
        </div>
        
        <form class="calculator-form" id="salaryForm">
            <div class="form-group">
                <label for="annualSalary">연봉 (만원 단위)</label>
                <div class="input-wrapper">
                    <input type="number" id="annualSalary" placeholder="예: 4000" value="4000" required min="0" max="1000000" aria-label="연봉 입력 (만원 단위)">
                    <span class="input-unit">만원</span>
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="familyCount">부양가족 수</label>
                    <select id="familyCount" aria-label="부양가족 수 선택">
                        <option value="1" selected>본인만 (1명)</option>
                        <option value="2">2명</option>
                        <option value="3">3명</option>
                        <option value="4">4명</option>
                        <option value="5">5명</option>
                        <option value="6">6명 이상</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="childCount">20세 이하 자녀 수</label>
                    <select id="childCount" aria-label="20세 이하 자녀 수 선택">
                        <option value="0" selected>없음</option>
                        <option value="1">1명</option>
                        <option value="2">2명</option>
                        <option value="3">3명</option>
                        <option value="4">4명 이상</option>
                    </select>
                </div>
            </div>
            
            <button type="submit" class="calculate-btn">💰 실수령액 계산하기</button>
        </form>
        
        <div class="result-container" id="resultContainer">
            <div class="result-header">
                <h2>💸 2025년 기준 계산 결과</h2>
                <p id="resultSummary"></p>
            </div>
            
            <div class="result-main">
                <div class="result-item highlight">
                    <div class="result-label">월 실수령액</div>
                    <div class="result-value" id="monthlyNet">-</div>
                    <div class="result-detail">세후 실제 수령액</div>
                </div>
                
                <div class="result-item">
                    <div class="result-label">연 실수령액</div>
                    <div class="result-value" id="annualNet">-</div>
                    <div class="result-detail">연간 총 수령액</div>
                </div>
            </div>
            
            <div class="deduction-details">
                <h3 class="deduction-title">📊 공제 내역 (2025년 기준)</h3>
                <div class="deduction-grid">
                    <div class="deduction-item">
                        <div class="deduction-item-name">소득세</div>
                        <div class="deduction-item-value" id="incomeTax">-</div>
                    </div>
                    <div class="deduction-item">
                        <div class="deduction-item-name">지방소득세</div>
                        <div class="deduction-item-value" id="localTax">-</div>
                    </div>
                    <div class="deduction-item">
                        <div class="deduction-item-name">국민연금</div>
                        <div class="deduction-item-value" id="nationalPension">-</div>
                    </div>
                    <div class="deduction-item">
                        <div class="deduction-item-name">건강보험료</div>
                        <div class="deduction-item-value" id="healthInsurance">-</div>
                    </div>
                    <div class="deduction-item">
                        <div class="deduction-item-name">장기요양보험료</div>
                        <div class="deduction-item-value" id="longTermCare">-</div>
                    </div>
                    <div class="deduction-item">
                        <div class="deduction-item-name">고용보험료</div>
                        <div class="deduction-item-value" id="employmentInsurance">-</div>
                    </div>
                    <div class="deduction-item">
                        <div class="deduction-item-name">총 공제액</div>
                        <div class="deduction-item-value" id="totalDeduction">-</div>
                    </div>
                </div>
            </div>
            
            <div class="info-box">
                <h3>⚠️ 안내사항</h3>
                <p>
                    이 계산기는 2025년 간이세액표와 4대보험 요율을 기준으로 계산됩니다.<br>
                    • 국민연금: 4.5% (상한액 적용)<br>
                    • 건강보험: 3.545% (2025년 기준)<br>
                    • 장기요양: 건강보험료의 12.95%<br>
                    • 고용보험: 0.9%<br>
                    • 비과세: 월 20만원 기본 적용
                </p>
            </div>
        </div>
    </div>
    
    <!-- 광고 영역 -->
    <div class="ad-container">
        <div class="ad-label" aria-label="광고 영역">광고</div>
        
<div id="ad-container-fb3cf1keg" style="min-height: 100px;">
    <div class="ad-placeholder" style="display: flex; align-items: center; justify-content: center; background: #f5f5f5; min-height: 100px; color: #999;">
        광고 로딩 중...
    </div>
</div>
<script>
// Intersection Observer로 광고 지연 로딩
if ('IntersectionObserver' in window) {
    const adObserver = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                const container = entry.target;
                container.innerHTML = `<ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-7905640648499222"
             data-ad-slot="8912541604"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>`;
                if (typeof adsbygoogle !== 'undefined') {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                }
                adObserver.unobserve(container);
            }
        });
    }, { rootMargin: '50px' });
    
    const adContainer = document.getElementById('ad-container-fb3cf1keg');
    if (adContainer) {
        adObserver.observe(adContainer);
    }
}
</script>
    </div>
    
    <!-- 푸터 -->
    <div id="footer-placeholder"></div>
    
    <!-- External JavaScript -->
    <script defer src="/js/api-config.js"></script>
    <script src="/js/bundle.min.js" defer></script>
    <script src="/js/main.min.js"></script>
    
    <!-- 계산기 JavaScript -->
    <script>
        // HTML 이스케이프 함수
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
        
        // 입력값 검증 함수
        function validateSalaryInput(value) {
            // 문자열을 숫자로 변환하고 유효성 검사
            const num = parseFloat(String(value).replace(/[^0-9.]/g, ''));
            
            if (isNaN(num) || num < 0 || num > 1000000) {
                return null;
            }
            return parseInt(num);
        }
        
        // 숫자 검증 함수
        function validateNumber(value, min, max) {
            const num = parseInt(String(value).replace(/[^0-9]/g, ''));
            
            if (isNaN(num) || num < min || num > max) {
                return min;
            }
            return num;
        }
        
        document.getElementById('salaryForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const annualSalaryManwon = validateSalaryInput(document.getElementById('annualSalary').value);
            const familyCount = validateNumber(document.getElementById('familyCount').value, 1, 20);
            const childCount = validateNumber(document.getElementById('childCount').value, 0, 20);
            
            if (!annualSalaryManwon) {
                alert('연봉을 올바르게 입력해주세요. (0 ~ 1,000,000만원)');
                return;
            }
            
            // 만원 단위를 원 단위로 변환
            const annualSalary = annualSalaryManwon * 10000;
            
            // 계산 실행
            const result = calculateSalary(annualSalary, familyCount, childCount);
            
            // 결과 표시
            displayResult(result, annualSalary);
        });
        
        function calculateSalary(annualSalary, familyCount, childCount) {
            const monthlySalary = annualSalary / 12;
            
            // 2025년 4대보험 요율
            // 국민연금: 4.5% (상한: 627,150원, 하한: 37,170원)
            const pensionBase = Math.min(Math.max(monthlySalary, 370000), 5900000);
            const nationalPension = Math.round(pensionBase * 0.045);
            
            // 건강보험료: 3.545% (2025년)
            const healthInsurance = Math.round(monthlySalary * 0.03545);
            
            // 장기요양보험료: 건강보험료의 12.95% (2025년)
            const longTermCare = Math.round(healthInsurance * 0.1295);
            
            // 고용보험료: 0.9%
            const employmentInsurance = Math.round(monthlySalary * 0.009);
            
            // 4대보험 합계
            const totalInsurance = nationalPension + healthInsurance + longTermCare + employmentInsurance;
            
            // 과세표준 (월급여 - 비과세 20만원 - 4대보험)
            const monthlyTaxBase = monthlySalary - 200000 - totalInsurance;
            
            // 2025년 간이세액표 기준 소득세 계산
            let monthlyIncomeTax = 0;
            
            // 간이세액표 적용 (부양가족 1명 기준 - 80% 선택)
            if (familyCount === 1) {
                if (monthlyTaxBase <= 1470000) {
                    monthlyIncomeTax = 0;
                } else if (monthlyTaxBase <= 1940000) {
                    monthlyIncomeTax = (monthlyTaxBase - 1470000) * 0.06;
                } else if (monthlyTaxBase <= 2875000) {
                    monthlyIncomeTax = 28200 + (monthlyTaxBase - 1940000) * 0.15;
                } else if (monthlyTaxBase <= 4030000) {
                    monthlyIncomeTax = 168450 + (monthlyTaxBase - 2875000) * 0.24;
                } else if (monthlyTaxBase <= 5970000) {
                    monthlyIncomeTax = 445650 + (monthlyTaxBase - 4030000) * 0.35;
                } else if (monthlyTaxBase <= 14440000) {
                    monthlyIncomeTax = 1124650 + (monthlyTaxBase - 5970000) * 0.38;
                } else {
                    monthlyIncomeTax = 4343250 + (monthlyTaxBase - 14440000) * 0.40;
                }
            } else {
                // 부양가족 2명 이상 (더 낮은 세율)
                if (monthlyTaxBase <= 2040000) {
                    monthlyIncomeTax = 0;
                } else if (monthlyTaxBase <= 2850000) {
                    monthlyIncomeTax = (monthlyTaxBase - 2040000) * 0.06;
                } else if (monthlyTaxBase <= 4020000) {
                    monthlyIncomeTax = 48600 + (monthlyTaxBase - 2850000) * 0.15;
                } else if (monthlyTaxBase <= 5970000) {
                    monthlyIncomeTax = 224100 + (monthlyTaxBase - 4020000) * 0.24;
                } else if (monthlyTaxBase <= 14440000) {
                    monthlyIncomeTax = 692100 + (monthlyTaxBase - 5970000) * 0.35;
                } else {
                    monthlyIncomeTax = 3656600 + (monthlyTaxBase - 14440000) * 0.38;
                }
            }
            
            // 부양가족 추가 공제 (2명 이상)
            if (familyCount > 2) {
                const additionalDeduction = (familyCount - 2) * 12500;
                monthlyIncomeTax = Math.max(0, monthlyIncomeTax - additionalDeduction);
            }
            
            // 자녀 세액공제 (20세 이하)
            if (childCount > 0) {
                const childDeduction = childCount * 15000;
                monthlyIncomeTax = Math.max(0, monthlyIncomeTax - childDeduction);
            }
            
            // 근로소득세액공제 (간이세액표 80% 선택)
            monthlyIncomeTax = Math.round(monthlyIncomeTax * 0.8);
            
            // 지방소득세 (소득세의 10%)
            const monthlyLocalTax = Math.round(monthlyIncomeTax * 0.1);
            
            // 총 공제액
            const totalMonthlyDeduction = monthlyIncomeTax + monthlyLocalTax + totalInsurance;
            
            // 실수령액
            const monthlyNet = monthlySalary - totalMonthlyDeduction;
            const annualNet = monthlyNet * 12;
            
            return {
                monthlyNet: monthlyNet,
                annualNet: annualNet,
                incomeTax: monthlyIncomeTax,
                localTax: monthlyLocalTax,
                nationalPension: nationalPension,
                healthInsurance: healthInsurance,
                longTermCare: longTermCare,
                employmentInsurance: employmentInsurance,
                totalMonthlyDeduction: totalMonthlyDeduction
            };
        }
        
        function displayResult(result, originalSalary) {
            // 결과 표시 (textContent 사용으로 XSS 방지)
            document.getElementById('monthlyNet').textContent = formatCurrency(result.monthlyNet);
            document.getElementById('annualNet').textContent = formatCurrency(result.annualNet);
            
            // 공제 내역 (textContent 사용으로 XSS 방지)
            document.getElementById('incomeTax').textContent = formatCurrency(result.incomeTax);
            document.getElementById('localTax').textContent = formatCurrency(result.localTax);
            document.getElementById('nationalPension').textContent = formatCurrency(result.nationalPension);
            document.getElementById('healthInsurance').textContent = formatCurrency(result.healthInsurance);
            document.getElementById('longTermCare').textContent = formatCurrency(result.longTermCare);
            document.getElementById('employmentInsurance').textContent = formatCurrency(result.employmentInsurance);
            document.getElementById('totalDeduction').textContent = formatCurrency(result.totalMonthlyDeduction);
            
            // 요약 정보 (textContent 사용으로 XSS 방지)
            const deductionRate = ((result.totalMonthlyDeduction * 12) / originalSalary * 100).toFixed(1);
            document.getElementById('resultSummary').textContent = 
                `연봉 ${formatCurrency(originalSalary)}에서 ${deductionRate}%가 공제되어 ${formatCurrency(result.annualNet)}을 실수령합니다.`;
            
            // 결과 컨테이너 표시
            document.getElementById('resultContainer').classList.add('show');
            
            // 결과 영역으로 스크롤
            document.getElementById('resultContainer').scrollIntoView({ behavior: 'smooth' });
        }
        
        function formatCurrency(amount) {
            return new Intl.NumberFormat('ko-KR', {
                style: 'currency',
                currency: 'KRW',
                maximumFractionDigits: 0
            }).format(amount);
        }
        
        // 애드센스 광고 로드
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <!-- Non-critical scripts moved here for performance -->
    
<!-- Google AdSense 지연 로딩 -->
<script>
// AdSense 지연 로딩 (페이지 로드 후 2초 대기)
window.addEventListener('load', function() {
    setTimeout(function() {
        var adsScript = document.createElement('script');
        adsScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7905640648499222';
        adsScript.crossOrigin = 'anonymous';
        adsScript.defer = true;
        document.head.appendChild(adsScript);
    }, 2000);
});
</script>

<script>
// AdSense 중복 초기화 방지
window.adsenseInitialized = window.adsenseInitialized || false;

function initializeAdSense() {
    if (window.adsenseInitialized) {
        console.log('AdSense already initialized');
        return;
    }
    
    window.adsenseInitialized = true;
    
    // 기존 광고 블록 확인 및 초기화
    const adBlocks = document.querySelectorAll('.adsbygoogle');
    adBlocks.forEach((ad, index) => {
        if (!ad.dataset.adsbygoogleStatus) {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                console.log('AdSense block initialized:', index);
            } catch (error) {
                console.warn('AdSense initialization error:', error);
            }
        }
    });
}

// 페이지 로드 후 AdSense 초기화
window.addEventListener('load', function() {
    setTimeout(initializeAdSense, 1000);
});
</script>

<script>
// 통합 AdSense 초기화 (중복 방지)
(function() {
    'use strict';
    
    // 전역 플래그로 초기화 상태 관리
    window.__adsenseLoaded = window.__adsenseLoaded || false;
    window.__adsenseQueue = window.__adsenseQueue || [];
    
    function initAdsense() {
        if (window.__adsenseLoaded) return;
        
        const ads = document.querySelectorAll('.adsbygoogle:not([data-adsbygoogle-status])');
        
        if (ads.length === 0) return;
        
        // AdSense 스크립트가 로드되었는지 확인
        if (typeof adsbygoogle === 'undefined') {
            setTimeout(initAdsense, 500);
            return;
        }
        
        window.__adsenseLoaded = true;
        
        // 각 광고 슬롯 초기화
        ads.forEach((ad, index) => {
            try {
                // 중복 초기화 방지
                if (ad.getAttribute('data-adsbygoogle-status')) return;
                
                // 초기화 시도
                (adsbygoogle = window.adsbygoogle || []).push({});
                
                // 상태 표시
                ad.setAttribute('data-adsbygoogle-status', 'done');
                
            } catch (e) {
                console.warn('AdSense 초기화 실패:', index, e.message);
            }
        });
    }
    
    // 페이지 로드 완료 후 초기화
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initAdsense, 1000);
        });
    } else {
        setTimeout(initAdsense, 1000);
    }
    
    // 에러 핸들러 추가
    window.addEventListener('error', function(e) {
        if (e.message && e.message.includes('adsbygoogle.push() error')) {
            e.preventDefault();
            console.warn('AdSense 중복 초기화 방지됨');
            return false;
        }
    }, true);
})();
</script>



<!-- AdSense 중복 방지 최종 버전 -->
<script>
(function() {
    'use strict';
    
    // 전역 초기화 상태 관리
    if (window.__adsenseFullyInitialized) return;
    window.__adsenseFullyInitialized = true;
    
    // 원래 push 메서드 저장
    let originalPush = null;
    
    // AdSense 초기화 함수
    function safeInitAds() {
        const ads = document.querySelectorAll('.adsbygoogle');
        
        if (ads.length === 0) return;
        
        // adsbygoogle가 로드될 때까지 대기
        if (typeof adsbygoogle === 'undefined') {
            setTimeout(safeInitAds, 200);
            return;
        }
        
        // push 메서드 오버라이드
        if (!originalPush && window.adsbygoogle && window.adsbygoogle.push) {
            originalPush = window.adsbygoogle.push;
            
            window.adsbygoogle.push = function(config) {
                try {
                    // 이미 광고가 있는 요소는 건너뛰기
                    const hasAds = Array.from(document.querySelectorAll('.adsbygoogle')).every(el => 
                        el.getAttribute('data-adsbygoogle-status') === 'done'
                    );
                    
                    if (hasAds) {
                        console.log('모든 광고 슬롯이 이미 채워짐');
                        return;
                    }
                    
                    // 원래 push 메서드 호출
                    return originalPush.call(this, config);
                } catch (e) {
                    console.warn('AdSense push 차단됨:', e.message);
                }
            };
        }
        
        // 각 광고 슬롯 초기화
        let initialized = 0;
        ads.forEach((ad) => {
            if (!ad.getAttribute('data-adsbygoogle-status')) {
                try {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                    initialized++;
                } catch (e) {
                    // 오류 무시
                }
            }
        });
        
        console.log('AdSense 초기화 완료:', initialized, '개 슬롯');
    }
    
    // 전역 에러 핸들러
    const errorHandler = function(e) {
        if (e.message && e.message.includes('adsbygoogle.push() error')) {
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            return false;
        }
    };
    
    // 에러 핸들러 등록
    window.addEventListener('error', errorHandler, true);
    
    // unhandledrejection 핸들러
    window.addEventListener('unhandledrejection', function(e) {
        if (e.reason && e.reason.message && e.reason.message.includes('adsbygoogle')) {
            e.preventDefault();
            return false;
        }
    });
    
    // DOM 로드 후 초기화
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(safeInitAds, 1000);
        });
    } else {
        setTimeout(safeInitAds, 1000);
    }
})();
</script>
</body>
</html>