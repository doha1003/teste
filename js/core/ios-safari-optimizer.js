/**
 * iOS Safari PWA ìµœì í™”
 * iOS Safariì˜ PWA íŠ¹ì„±ì„ ê³ ë ¤í•œ ìµœì í™” ë° í˜¸í™˜ì„± ì²˜ë¦¬
 * 
 * Features:
 * - iOS Safari íŠ¹í™” í„°ì¹˜ ì œìŠ¤ì²˜
 * - Safe Area ëŒ€ì‘
 * - iOS PWA ì„¤ì¹˜ ì•ˆë‚´
 * - ë·°í¬íŠ¸ ìµœì í™”
 * - í„°ì¹˜ ë°˜ì‘ì„± ê°œì„ 
 */

class IOSSafariOptimizer {
  constructor() {
    this.config = {
      // iOS ê°ì§€ ì„¤ì •
      detection: {
        iOS: /iPad|iPhone|iPod/.test(navigator.userAgent),
        Safari: /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent),
        PWAMode: window.matchMedia('(display-mode: standalone)').matches,
        version: this.getIOSVersion(),
      },
      
      // í„°ì¹˜ ì œìŠ¤ì²˜ ì„¤ì •
      touch: {
        maxTapDistance: 10,
        maxTapTime: 300,
        scrollThreshold: 5,
        swipeThreshold: 100,
        swipeMinVelocity: 0.3,
      },
      
      // ë·°í¬íŠ¸ ì„¤ì •
      viewport: {
        safeAreaInsets: null,
        orientationChangeDelay: 500,
        scrollLockEnabled: false,
      },
      
      // ì„±ëŠ¥ ì„¤ì •
      performance: {
        passiveEventListeners: true,
        touchActionOptimization: true,
        scrollOptimization: true,
      },
      
      // UI ê°œì„  ì„¤ì •
      ui: {
        bounceScrollDisabled: false,
        tapHighlightDisabled: true,
        userSelectOptimized: true,
        safariBarHiding: true,
      },
    };
    
    this.state = {
      isIOSDevice: false,
      isSafari: false,
      isPWAMode: false,
      orientation: null,
      safeAreaInsets: null,
      touchStartTime: 0,
      touchStartPos: null,
      scrollLocked: false,
    };
    
    this.init();
  }
  
  /**
   * ì´ˆê¸°í™”
   */
  init() {\n    this.detectIOSEnvironment();\n    \n    if (this.state.isIOSDevice) {\n      this.setupIOSOptimizations();\n      this.setupSafeAreaHandling();\n      this.setupTouchOptimization();\n      this.setupViewportHandling();\n      this.setupPWASpecificFeatures();\n      this.setupIOSInstallPrompt();\n      \n      console.log('[iOS Safari] iOS ìµœì í™” ì ìš©ë¨:', this.state);\n    }\n    \n    // ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ê³µí†µ ì ìš©í•  í„°ì¹˜ ê°œì„ ì‚¬í•­\n    this.setupUniversalTouchImprovements();\n  }\n  \n  /**\n   * iOS í™˜ê²½ ê°ì§€\n   */\n  detectIOSEnvironment() {\n    this.state.isIOSDevice = this.config.detection.iOS;\n    this.state.isSafari = this.config.detection.Safari;\n    this.state.isPWAMode = this.config.detection.PWAMode;\n    this.state.orientation = this.getOrientation();\n    \n    // iOS ë²„ì „ë³„ íŠ¹ë³„ ì²˜ë¦¬\n    const iosVersion = this.config.detection.version;\n    if (iosVersion) {\n      this.handleIOSVersionSpecifics(iosVersion);\n    }\n    \n    // Bodyì— í´ë˜ìŠ¤ ì¶”ê°€\n    document.body.classList.toggle('ios-device', this.state.isIOSDevice);\n    document.body.classList.toggle('safari-browser', this.state.isSafari);\n    document.body.classList.toggle('pwa-mode', this.state.isPWAMode);\n  }\n  \n  /**\n   * iOS ìµœì í™” ì„¤ì •\n   */\n  setupIOSOptimizations() {\n    // CSS ë³€ìˆ˜ ì„¤ì •\n    this.setCSSOptimizations();\n    \n    // ë©”íƒ€ íƒœê·¸ ë™ì  ì„¤ì •\n    this.setIOSMetaTags();\n    \n    // ìŠ¤í¬ë¡¤ ìµœì í™”\n    this.setupScrollOptimization();\n    \n    // í„°ì¹˜ í”¼ë“œë°± ìµœì í™”\n    this.setupTouchFeedback();\n    \n    // í‚¤ë³´ë“œ ì²˜ë¦¬\n    this.setupKeyboardHandling();\n  }\n  \n  /**\n   * CSS ìµœì í™” ì„¤ì •\n   */\n  setCSSOptimizations() {\n    const style = document.createElement('style');\n    style.id = 'ios-safari-optimizations';\n    style.textContent = `\n      :root {\n        /* iOS Safe Area ë³€ìˆ˜ */\n        --safe-area-inset-top: env(safe-area-inset-top);\n        --safe-area-inset-right: env(safe-area-inset-right);\n        --safe-area-inset-bottom: env(safe-area-inset-bottom);\n        --safe-area-inset-left: env(safe-area-inset-left);\n      }\n      \n      /* iOS ì „ìš© ìµœì í™” */\n      .ios-device {\n        /* í„°ì¹˜ ìµœì í™” */\n        -webkit-touch-callout: none;\n        -webkit-text-size-adjust: 100%;\n        -webkit-tap-highlight-color: transparent;\n        \n        /* ìŠ¤í¬ë¡¤ ìµœì í™” */\n        -webkit-overflow-scrolling: touch;\n        overscroll-behavior: none;\n      }\n      \n      /* PWA ëª¨ë“œ ìµœì í™” */\n      .pwa-mode {\n        /* ìƒíƒœë°” ì˜ì—­ ê³ ë ¤ */\n        padding-top: env(safe-area-inset-top);\n        padding-bottom: env(safe-area-inset-bottom);\n      }\n      \n      /* í„°ì¹˜ íƒ€ê²Ÿ ìµœì í™” */\n      .ios-device button,\n      .ios-device [role=\"button\"],\n      .ios-device .btn {\n        min-height: 44px;\n        min-width: 44px;\n        touch-action: manipulation;\n      }\n      \n      /* ìŠ¤í¬ë¡¤ ì˜ì—­ ìµœì í™” */\n      .ios-device .scroll-container {\n        -webkit-overflow-scrolling: touch;\n        overflow-scrolling: touch;\n      }\n      \n      /* ì…ë ¥ í•„ë“œ ìµœì í™” */\n      .ios-device input,\n      .ios-device textarea,\n      .ios-device select {\n        -webkit-appearance: none;\n        -webkit-border-radius: 0;\n        border-radius: 8px;\n        font-size: 16px; /* ì¤Œ ë°©ì§€ */\n      }\n      \n      /* í„°ì¹˜ í”¼ë“œë°± */\n      .ios-device .touch-feedback {\n        -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);\n        transition: background-color 0.1s ease;\n      }\n      \n      .ios-device .touch-feedback:active {\n        background-color: rgba(0, 0, 0, 0.05);\n      }\n      \n      /* ìŠ¤í¬ë¡¤ ë½ */\n      .ios-device.scroll-locked {\n        position: fixed;\n        width: 100%;\n        overflow: hidden;\n      }\n      \n      /* Safari ë°” ìˆ¨ê¹€ ì²˜ë¦¬ */\n      .safari-browser.pwa-mode {\n        /* ì „ì²´ í™”ë©´ í™œìš© */\n        height: 100vh;\n        height: -webkit-fill-available;\n      }\n    `;\n    \n    document.head.appendChild(style);\n  }\n  \n  /**\n   * iOS ë©”íƒ€ íƒœê·¸ ì„¤ì •\n   */\n  setIOSMetaTags() {\n    // ê¸°ì¡´ ë©”íƒ€ íƒœê·¸ í™•ì¸ ë° ì—…ë°ì´íŠ¸\n    this.updateMetaTag('apple-mobile-web-app-capable', 'yes');\n    this.updateMetaTag('apple-mobile-web-app-status-bar-style', 'default');\n    this.updateMetaTag('apple-mobile-web-app-title', 'doha.kr');\n    \n    // ë·°í¬íŠ¸ ìµœì í™”\n    const viewportMeta = document.querySelector('meta[name=\"viewport\"]');\n    if (viewportMeta) {\n      viewportMeta.content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover';\n    }\n  }\n  \n  /**\n   * Safe Area ì²˜ë¦¬\n   */\n  setupSafeAreaHandling() {\n    // Safe Area Inset ê°’ ê³„ì‚°\n    this.calculateSafeAreaInsets();\n    \n    // ì˜¤ë¦¬ì—”í…Œì´ì…˜ ë³€ê²½ ê°ì§€\n    window.addEventListener('orientationchange', () => {\n      setTimeout(() => {\n        this.handleOrientationChange();\n      }, this.config.viewport.orientationChangeDelay);\n    });\n    \n    // ë¦¬ì‚¬ì´ì¦ˆ ì´ë²¤íŠ¸\n    window.addEventListener('resize', this.debounce(() => {\n      this.calculateSafeAreaInsets();\n    }, 300));\n  }\n  \n  /**\n   * í„°ì¹˜ ìµœì í™”\n   */\n  setupTouchOptimization() {\n    // íŒ¨ì‹œë¸Œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •\n    const passiveOptions = this.config.performance.passiveEventListeners ? \n      { passive: true } : false;\n    \n    // í„°ì¹˜ ì´ë²¤íŠ¸ í†µí•© ì²˜ë¦¬\n    document.addEventListener('touchstart', (e) => {\n      this.handleTouchStart(e);\n    }, passiveOptions);\n    \n    document.addEventListener('touchmove', (e) => {\n      this.handleTouchMove(e);\n    }, { passive: false }); // ìŠ¤í¬ë¡¤ ì œì–´ë¥¼ ìœ„í•´ passive: false\n    \n    document.addEventListener('touchend', (e) => {\n      this.handleTouchEnd(e);\n    }, passiveOptions);\n    \n    // ë”ë¸” íƒ­ ì¤Œ ë°©ì§€\n    this.preventDoubleZoom();\n    \n    // ìŠ¤ì™€ì´í”„ ì œìŠ¤ì²˜ ì„¤ì •\n    this.setupSwipeGestures();\n  }\n  \n  /**\n   * í„°ì¹˜ ì‹œì‘ ì²˜ë¦¬\n   */\n  handleTouchStart(e) {\n    this.state.touchStartTime = Date.now();\n    this.state.touchStartPos = {\n      x: e.touches[0].clientX,\n      y: e.touches[0].clientY,\n    };\n    \n    // í„°ì¹˜ í”¼ë“œë°± ì¶”ê°€\n    this.addTouchFeedback(e.target);\n  }\n  \n  /**\n   * í„°ì¹˜ ì´ë™ ì²˜ë¦¬\n   */\n  handleTouchMove(e) {\n    if (!this.state.touchStartPos) return;\n    \n    const currentPos = {\n      x: e.touches[0].clientX,\n      y: e.touches[0].clientY,\n    };\n    \n    const deltaX = Math.abs(currentPos.x - this.state.touchStartPos.x);\n    const deltaY = Math.abs(currentPos.y - this.state.touchStartPos.y);\n    \n    // ìŠ¤í¬ë¡¤ì´ ê°ì§€ë˜ë©´ í„°ì¹˜ í”¼ë“œë°± ì œê±°\n    if (deltaX > this.config.touch.scrollThreshold || \n        deltaY > this.config.touch.scrollThreshold) {\n      this.removeTouchFeedback();\n    }\n    \n    // ë°”ìš´ìŠ¤ ìŠ¤í¬ë¡¤ ë°©ì§€ (í•„ìš”ì‹œ)\n    if (this.config.ui.bounceScrollDisabled) {\n      this.preventBounceScroll(e);\n    }\n  }\n  \n  /**\n   * í„°ì¹˜ ì¢…ë£Œ ì²˜ë¦¬\n   */\n  handleTouchEnd(e) {\n    const touchEndTime = Date.now();\n    const touchDuration = touchEndTime - this.state.touchStartTime;\n    \n    // í„°ì¹˜ í”¼ë“œë°± ì œê±°\n    setTimeout(() => {\n      this.removeTouchFeedback();\n    }, 100);\n    \n    // íƒ­ ì œìŠ¤ì²˜ ê°ì§€\n    if (this.state.touchStartPos && touchDuration < this.config.touch.maxTapTime) {\n      const endPos = {\n        x: e.changedTouches[0].clientX,\n        y: e.changedTouches[0].clientY,\n      };\n      \n      const distance = Math.sqrt(\n        Math.pow(endPos.x - this.state.touchStartPos.x, 2) +\n        Math.pow(endPos.y - this.state.touchStartPos.y, 2)\n      );\n      \n      if (distance < this.config.touch.maxTapDistance) {\n        this.handleTap(e, endPos);\n      }\n    }\n    \n    // ìƒíƒœ ì´ˆê¸°í™”\n    this.state.touchStartTime = 0;\n    this.state.touchStartPos = null;\n  }\n  \n  /**\n   * ë·°í¬íŠ¸ ì²˜ë¦¬ ì„¤ì •\n   */\n  setupViewportHandling() {\n    // Visual Viewport API ì§€ì› í™•ì¸\n    if (window.visualViewport) {\n      window.visualViewport.addEventListener('resize', () => {\n        this.handleVisualViewportChange();\n      });\n    }\n    \n    // í™”ë©´ í¬ê¸° ë³€ê²½ ëŒ€ì‘\n    this.setupResponsiveHandling();\n  }\n  \n  /**\n   * PWA ì „ìš© ê¸°ëŠ¥ ì„¤ì •\n   */\n  setupPWASpecificFeatures() {\n    if (this.state.isPWAMode) {\n      // PWA ëª¨ë“œì—ì„œì˜ íŠ¹ë³„ ì²˜ë¦¬\n      this.setupPWAModeOptimizations();\n    } else {\n      // ë¸Œë¼ìš°ì € ëª¨ë“œì—ì„œì˜ Safari ë°” ì²˜ë¦¬\n      this.setupSafariBarHiding();\n    }\n  }\n  \n  /**\n   * iOS PWA ì„¤ì¹˜ ì•ˆë‚´\n   */\n  setupIOSInstallPrompt() {\n    // iOSëŠ” ìë™ ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ê°€ ì—†ìœ¼ë¯€ë¡œ ìˆ˜ë™ ì•ˆë‚´\n    if (this.state.isIOSDevice && this.state.isSafari && !this.state.isPWAMode) {\n      this.showIOSInstallInstructions();\n    }\n  }\n  \n  /**\n   * iOS ì„¤ì¹˜ ì•ˆë‚´ í‘œì‹œ\n   */\n  showIOSInstallInstructions() {\n    // ì´ë¯¸ ì•ˆë‚´ë¥¼ ë³¸ ì‚¬ìš©ìëŠ” ì œì™¸\n    const dismissed = localStorage.getItem('ios-install-instructions-dismissed');\n    if (dismissed && Date.now() - parseInt(dismissed) < 30 * 24 * 60 * 60 * 1000) {\n      return; // 30ì¼ ë™ì•ˆ í‘œì‹œí•˜ì§€ ì•ŠìŒ\n    }\n    \n    // í˜ì´ì§€ ë¡œë“œ í›„ ì¼ì • ì‹œê°„ ë’¤ í‘œì‹œ\n    setTimeout(() => {\n      this.createIOSInstallPrompt();\n    }, 3000);\n  }\n  \n  /**\n   * iOS ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸ ìƒì„±\n   */\n  createIOSInstallPrompt() {\n    const prompt = document.createElement('div');\n    prompt.id = 'ios-install-prompt';\n    prompt.innerHTML = `\n      <div class=\"ios-install-content\">\n        <div class=\"ios-install-header\">\n          <div class=\"ios-install-icon\">ğŸ“±</div>\n          <h3>í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ê¸°</h3>\n          <button class=\"ios-install-close\">&times;</button>\n        </div>\n        \n        <div class=\"ios-install-body\">\n          <p>ë” í¸ë¦¬í•˜ê²Œ ì´ìš©í•˜ë ¤ë©´ í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ì„¸ìš”!</p>\n          \n          <div class=\"ios-install-steps\">\n            <div class=\"step\">\n              <div class=\"step-icon\">ğŸ“¤</div>\n              <div class=\"step-text\">í•˜ë‹¨ì˜ ê³µìœ  ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”</div>\n            </div>\n            \n            <div class=\"step\">\n              <div class=\"step-icon\">â•</div>\n              <div class=\"step-text\">\"í™ˆ í™”ë©´ì— ì¶”ê°€\"ë¥¼ ì„ íƒí•˜ì„¸ìš”</div>\n            </div>\n            \n            <div class=\"step\">\n              <div class=\"step-icon\">âœ…</div>\n              <div class=\"step-text\">\"ì¶”ê°€\"ë¥¼ ëˆŒëŸ¬ ì™„ë£Œí•˜ì„¸ìš”</div>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"ios-install-footer\">\n          <button class=\"ios-install-dismiss\">ë‚˜ì¤‘ì— í•˜ê¸°</button>\n        </div>\n      </div>\n    `;\n    \n    // ìŠ¤íƒ€ì¼ ì ìš©\n    this.applyIOSInstallPromptStyles(prompt);\n    \n    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ\n    this.setupIOSInstallPromptEvents(prompt);\n    \n    // DOMì— ì¶”ê°€\n    document.body.appendChild(prompt);\n    \n    // ì• ë‹ˆë©”ì´ì…˜ê³¼ í•¨ê»˜ í‘œì‹œ\n    setTimeout(() => {\n      prompt.classList.add('visible');\n    }, 100);\n  }\n  \n  /**\n   * ê³µí†µ í„°ì¹˜ ê°œì„ ì‚¬í•­\n   */\n  setupUniversalTouchImprovements() {\n    // ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ì ìš©í•  í„°ì¹˜ ê°œì„ ì‚¬í•­\n    this.improveButtonTouchTargets();\n    this.setupTouchActionOptimization();\n    this.improveScrollPerformance();\n  }\n  \n  /**\n   * ë²„íŠ¼ í„°ì¹˜ íƒ€ê²Ÿ ê°œì„ \n   */\n  improveButtonTouchTargets() {\n    const buttons = document.querySelectorAll('button, [role=\"button\"], .btn');\n    \n    buttons.forEach(button => {\n      const rect = button.getBoundingClientRect();\n      \n      // 44px ë¯¸ë§Œì˜ í„°ì¹˜ íƒ€ê²Ÿ ê°œì„ \n      if (rect.width < 44 || rect.height < 44) {\n        button.style.minWidth = '44px';\n        button.style.minHeight = '44px';\n        button.style.padding = Math.max(\n          parseInt(getComputedStyle(button).padding) || 0,\n          8\n        ) + 'px';\n      }\n      \n      // í„°ì¹˜ ì•¡ì…˜ ìµœì í™”\n      button.style.touchAction = 'manipulation';\n    });\n  }\n  \n  /**\n   * ìŠ¤í¬ë¡¤ ì„±ëŠ¥ ê°œì„ \n   */\n  improveScrollPerformance() {\n    const scrollContainers = document.querySelectorAll(\n      '.scroll-container, [data-scroll], .overflow-auto, .overflow-scroll'\n    );\n    \n    scrollContainers.forEach(container => {\n      if (this.state.isIOSDevice) {\n        container.style.webkitOverflowScrolling = 'touch';\n      }\n      container.style.overscrollBehavior = 'contain';\n    });\n  }\n  \n  /**\n   * í‚¤ë³´ë“œ ì²˜ë¦¬\n   */\n  setupKeyboardHandling() {\n    // iOSì—ì„œ í‚¤ë³´ë“œê°€ ë‚˜íƒ€ë‚  ë•Œ ë·°í¬íŠ¸ ì¡°ì •\n    if (window.visualViewport) {\n      window.visualViewport.addEventListener('resize', () => {\n        const currentHeight = window.visualViewport.height;\n        const fullHeight = window.screen.height;\n        \n        // í‚¤ë³´ë“œê°€ ë‚˜íƒ€ë‚¬ëŠ”ì§€ ê°ì§€ (ë†’ì´ê°€ 75% ë¯¸ë§Œìœ¼ë¡œ ì¤„ì–´ë“¤ë©´)\n        const keyboardVisible = currentHeight < fullHeight * 0.75;\n        \n        document.body.classList.toggle('keyboard-visible', keyboardVisible);\n        \n        if (keyboardVisible) {\n          this.handleKeyboardShow(currentHeight);\n        } else {\n          this.handleKeyboardHide();\n        }\n      });\n    }\n  }\n  \n  /**\n   * í‚¤ë³´ë“œ í‘œì‹œ ì²˜ë¦¬\n   */\n  handleKeyboardShow(viewportHeight) {\n    // í™œì„± ì…ë ¥ í•„ë“œê°€ í‚¤ë³´ë“œì— ê°€ë ¤ì§€ì§€ ì•Šë„ë¡ ìŠ¤í¬ë¡¤\n    const activeElement = document.activeElement;\n    \n    if (activeElement && this.isInputElement(activeElement)) {\n      setTimeout(() => {\n        activeElement.scrollIntoView({\n          behavior: 'smooth',\n          block: 'center',\n        });\n      }, 300);\n    }\n  }\n  \n  /**\n   * í‚¤ë³´ë“œ ìˆ¨ê¹€ ì²˜ë¦¬\n   */\n  handleKeyboardHide() {\n    // í‚¤ë³´ë“œê°€ ì‚¬ë¼ì§„ í›„ ë·°í¬íŠ¸ ë³µì›\n    window.scrollTo(0, 0);\n  }\n  \n  /**\n   * ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œë“¤\n   */\n  \n  getIOSVersion() {\n    const match = navigator.userAgent.match(/OS (\\d+)_?(\\d+)?_?(\\d+)?/);\n    if (match) {\n      return {\n        major: parseInt(match[1], 10),\n        minor: parseInt(match[2] || '0', 10),\n        patch: parseInt(match[3] || '0', 10),\n      };\n    }\n    return null;\n  }\n  \n  getOrientation() {\n    if (screen.orientation) {\n      return screen.orientation.type;\n    }\n    return window.orientation ? 'landscape' : 'portrait';\n  }\n  \n  updateMetaTag(name, content) {\n    let meta = document.querySelector(`meta[name=\"${name}\"]`);\n    if (!meta) {\n      meta = document.createElement('meta');\n      meta.name = name;\n      document.head.appendChild(meta);\n    }\n    meta.content = content;\n  }\n  \n  calculateSafeAreaInsets() {\n    if (CSS.supports('padding: env(safe-area-inset-top)')) {\n      // CSS í™˜ê²½ ë³€ìˆ˜ë¡œ ìë™ ì²˜ë¦¬ë¨\n      return;\n    }\n    \n    // í´ë°±: ìˆ˜ë™ ê³„ì‚°\n    this.state.safeAreaInsets = {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n    };\n    \n    // iPhone X ì´ìƒì—ì„œ ë…¸ì¹˜ ì˜ì—­ ê³ ë ¤\n    if (this.hasNotch()) {\n      this.state.safeAreaInsets.top = 44;\n      this.state.safeAreaInsets.bottom = 34;\n    }\n  }\n  \n  hasNotch() {\n    if (this.state.isIOSDevice) {\n      const iosVersion = this.config.detection.version;\n      if (iosVersion && iosVersion.major >= 11) {\n        // iPhone X ì´ìƒ ê°ì§€ (ëŒ€ëµì )\n        return window.screen.height >= 812;\n      }\n    }\n    return false;\n  }\n  \n  isInputElement(element) {\n    const inputTypes = ['input', 'textarea', 'select'];\n    return inputTypes.includes(element.tagName.toLowerCase()) ||\n           element.contentEditable === 'true';\n  }\n  \n  debounce(func, wait) {\n    let timeout;\n    return function executedFunction(...args) {\n      const later = () => {\n        clearTimeout(timeout);\n        func(...args);\n      };\n      clearTimeout(timeout);\n      timeout = setTimeout(later, wait);\n    };\n  }\n  \n  // ... ê¸°íƒ€ ë©”ì„œë“œë“¤ ê³„ì† êµ¬í˜„\n  \n  addTouchFeedback(element) {\n    // í„°ì¹˜ í”¼ë“œë°± ì¶”ê°€ ë¡œì§\n  }\n  \n  removeTouchFeedback() {\n    // í„°ì¹˜ í”¼ë“œë°± ì œê±° ë¡œì§\n  }\n  \n  preventDoubleZoom() {\n    // ë”ë¸” íƒ­ ì¤Œ ë°©ì§€ ë¡œì§\n  }\n  \n  // ... ë‚˜ë¨¸ì§€ ë©”ì„œë“œë“¤\n}\n\n// ì „ì—­ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±\nif (typeof window !== 'undefined') {\n  window.IOSSafariOptimizer = IOSSafariOptimizer;\n  \n  // ìë™ ì´ˆê¸°í™”\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', () => {\n      window.iosSafariOptimizer = new IOSSafariOptimizer();\n    });\n  } else {\n    window.iosSafariOptimizer = new IOSSafariOptimizer();\n  }\n}\n\nexport default IOSSafariOptimizer;"