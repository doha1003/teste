!function(){function t(){try{document.querySelectorAll(".fade-in").forEach(t=>{if(!t)return;const e=t.getBoundingClientRect();e.top<window.innerHeight&&e.bottom>0&&!t.classList.contains("animated")&&t.classList.add("animated")})}catch(t){console.error("스크롤 애니메이션 처리 중 오류:",t)}}function e(){t(),window.addEventListener("scroll",function(t,e){if(window.DohaApp&&DohaApp.utils&&DohaApp.utils.throttle)return DohaApp.utils.throttle(t,e);let n;return function(...o){n||(t.apply(this,o),n=!0,setTimeout(()=>n=!1,e))}}(t,100))}function n(t,e,n){try{const r=encodeURIComponent(e||""),i=encodeURIComponent(n||window.location.href),s={facebook:`https://www.facebook.com/sharer/sharer.php?u=${i}`,twitter:`https://twitter.com/intent/tweet?text=${r}&url=${i}`,kakao:`https://story.kakao.com/share?url=${i}`,line:`https://social-plugins.line.me/lineit/share?url=${i}`,copylink:null};"copylink"===t?(!function(t){navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t).catch(e=>{console.error("복사 실패:",e),o(t)}):o(t)}(n||window.location.href),a("링크가 복사되었습니다!")):s[t]&&window.open(s[t],"_blank","width=600,height=400")}catch(t){console.error("공유 기능 오류:",t),a("공유 중 오류가 발생했습니다.","error")}}function o(t){const e=document.createElement("textarea");e.value=t,e.style.position="fixed",e.style.left="-999999px",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")}catch(t){console.error("복사 실패:",t)}document.body.removeChild(e)}function a(t,e="success"){try{const n=document.createElement("div");n.className=`notification notification-${e}`,n.textContent=t,n.style.cssText=`\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 16px 24px;\n            background: ${"success"===e?"#10b981":"#ef4444"};\n            color: white;\n            border-radius: 8px;\n            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);\n            z-index: 9999;\n            animation: slideInRight 0.3s ease;\n        `,document.body.appendChild(n),setTimeout(()=>{n.style.animation="slideOutRight 0.3s ease",setTimeout(()=>{n&&n.parentNode&&n.remove()},300)},3e3)}catch(t){console.error("알림 표시 중 오류:",t)}}const r=window.DohaApp&&DohaApp.utils&&DohaApp.utils.storage||{set(t,e){try{return localStorage.setItem(t,JSON.stringify(e)),!0}catch(t){return console.error("Storage set error:",t),!1}},get(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):null}catch(t){return console.error("Storage get error:",t),null}},remove(t){try{return localStorage.removeItem(t),!0}catch(t){return console.error("Storage remove error:",t),!1}},clear(){try{return localStorage.clear(),!0}catch(t){return console.error("Storage clear error:",t),!1}}};function i(t,e="YYYY-MM-DD"){try{const n=new Date(t);if(isNaN(n.getTime()))return console.error("잘못된 날짜 형식:",t),e;const o=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,"0"),r=String(n.getDate()).padStart(2,"0"),i=String(n.getHours()).padStart(2,"0"),s=String(n.getMinutes()).padStart(2,"0");return e.replace("YYYY",o).replace("MM",a).replace("DD",r).replace("HH",i).replace("mm",s)}catch(t){return console.error("날짜 포맷팅 오류:",t),e}}async function s(t,e){try{const n=await fetch(`/includes/${t}.html`);if(!n.ok)throw new Error(`HTTP ${n.status}`);{const t=await n.text(),o=document.querySelector(`.${e}`);o&&(o.innerHTML=t)}}catch(n){console.error(`Failed to load component ${t}:`,n);const o=document.querySelector(`.${e}`);if(!o)return;"navbar"===t?o.innerHTML='\n                <nav class="navbar">\n                    <div class="navbar-container">\n                        <a href="/" class="logo">doha.kr</a>\n                        <ul class="nav-menu">\n                            <li><a href="/" class="nav-link">홈</a></li>\n                            <li><a href="/tests/" class="nav-link">심리테스트</a></li>\n                            <li><a href="/tools/" class="nav-link">실용도구</a></li>\n                            <li><a href="/fortune/" class="nav-link">운세</a></li>\n                            <li><a href="/contact/" class="nav-link">문의</a></li>\n                            <li><a href="/about/" class="nav-link">소개</a></li>\n                        </ul>\n                        <button class="mobile-menu-btn" onclick="toggleMobileMenu()">\n                            <span></span>\n                            <span></span>\n                            <span></span>\n                        </button>\n                    </div>\n                </nav>\n            ':"footer"===t&&(o.innerHTML='\n                <footer class="footer">\n                    <div class="footer-content">\n                        <div class="footer-section">\n                            <h3>doha.kr</h3>\n                            <p style="color: var(--gray-400); margin-top: 8px;">\n                                일상을 더 재미있게 만드는 공간<br>\n                                심리테스트, 실용도구, 운세의 만남\n                            </p>\n                            <div class="footer-social">\n                                <a href="mailto:youtubdoha@gmail.com" class="social-link">📧</a>\n                            </div>\n                        </div>\n                        \n                        <div class="footer-section">\n                            <h3>서비스</h3>\n                            <ul class="footer-links">\n                                <li><a href="/">홈</a></li>\n                                <li><a href="/tests/">심리테스트</a></li>\n                                <li><a href="/tools/">실용도구</a></li>\n                                <li><a href="/fortune/">운세</a></li>\n                                <li><a href="/about/">사이트 소개</a></li>\n                            </ul>\n                        </div>\n                        \n                        <div class="footer-section">\n                            <h3>인기 콘텐츠</h3>\n                            <ul class="footer-links">\n                                <li><a href="/tests/teto-egen/">테토-에겐 테스트</a></li>\n                                <li><a href="/tests/mbti/">MBTI 테스트</a></li>\n                                <li><a href="/fortune/daily/">오늘의 운세</a></li>\n                                <li><a href="/tools/text-counter.html">글자수 세기</a></li>\n                            </ul>\n                        </div>\n                        \n                        <div class="footer-section">\n                            <h3>운세 & 고객지원</h3>\n                            <ul class="footer-links">\n                                <li><a href="/fortune/daily/">오늘의 운세</a></li>\n                                <li><a href="/fortune/tarot/">타로 카드</a></li>\n                                <li><a href="/fortune/zodiac/">별자리 운세</a></li>\n                                <li><a href="/contact/">문의하기</a></li>\n                            </ul>\n                        </div>\n                    </div>\n                    \n                    <div class="footer-bottom">\n                        <div class="footer-legal">\n                            <a href="/privacy/">개인정보처리방침</a>\n                            <a href="/terms/">이용약관</a>\n                        </div>\n                        <p>&copy; 2025 doha.kr. All rights reserved.</p>\n                    </div>\n                </footer>\n            ')}}function l(){const t=document.querySelectorAll(".ad-container");function e(){const e=window.innerWidth;t.forEach(t=>{e<320?(t.style.padding="0 10px",t.style.minWidth="300px"):t.style.padding=e<480?"0 15px":"0 20px"})}t.forEach(t=>{t.style.minWidth="300px",t.style.width="100%",t.style.boxSizing="border-box",t.style.padding="0 20px",t.style.margin="40px auto",t.style.maxWidth="1200px";const e=t.querySelector(".adsbygoogle");e&&(e.style.minHeight="90px",e.style.width="100%",e.style.maxWidth="100%",e.style.overflow="hidden",e.style.display="block",e.hasAttribute("data-full-width-responsive")||e.setAttribute("data-full-width-responsive","true"))}),e(),window.addEventListener("resize",function(t,e){if(window.DohaApp&&DohaApp.utils&&DohaApp.utils.debounce)return DohaApp.utils.debounce(t,e);let n;return function(...o){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),t(...o)},e)}}(e,250))}function c(){try{l();const t=document.querySelectorAll(".adsbygoogle:not([data-adsbygoogle-status])");if(0===t.length)return;t.forEach((t,e)=>{const n=t.getBoundingClientRect();n.width<50&&(t.style.minWidth="320px",t.style.width="100%"),n.height<50&&(t.style.minHeight="100px"),t.setAttribute("data-adsbygoogle-status","processing")}),"undefined"!=typeof adsbygoogle?t.forEach((t,e)=>{try{(adsbygoogle=window.adsbygoogle||[]).push({}),t.setAttribute("data-adsbygoogle-status","loaded")}catch(n){console.error(`AdSense 슬롯 ${e} 로딩 오류:`,n),t.setAttribute("data-adsbygoogle-status","error")}}):(console.warn("AdSense 스크립트가 아직 로드되지 않음"),setTimeout(c,2e3))}catch(t){console.error("AdSense 초기화 전체 오류:",t)}}document.addEventListener("DOMContentLoaded",async function(){window.DohaApp&&"function"==typeof DohaApp.init||await async function(){const t=document.querySelector(".navbar-placeholder"),e=document.querySelector(".footer-placeholder");t&&await s("navbar","navbar-placeholder"),e&&await s("footer","footer-placeholder")}(),function(){const t=document.createElement("style");t.textContent="\n@keyframes slideInRight {\n    from {\n        transform: translateX(100%);\n        opacity: 0;\n    }\n    to {\n        transform: translateX(0);\n        opacity: 1;\n    }\n}\n\n@keyframes slideOutRight {\n    from {\n        transform: translateX(0);\n        opacity: 1;\n    }\n    to {\n        transform: translateX(100%);\n        opacity: 0;\n    }\n}\n\n/* animated 클래스가 추가되면 CSS 애니메이션이 작동하도록 함 */\n.fade-in.animated {\n    opacity: 1 !important;\n    transform: translateY(0) !important;\n}\n\ninput.error, textarea.error {\n    border-color: #ef4444 !important;\n}\n\n.dark-mode {\n    --gray-50: #111827;\n    --gray-100: #1f2937;\n    --gray-200: #374151;\n    --gray-300: #4b5563;\n    --gray-400: #6b7280;\n    --gray-500: #9ca3af;\n    --gray-600: #d1d5db;\n    --gray-700: #e5e7eb;\n    --gray-800: #f3f4f6;\n    --gray-900: #f9fafb;\n}\n\n/* Responsive AdSense Styles - Global Fix */\n.ad-container {\n    min-height: 250px !important;\n    margin: 40px auto !important;\n    max-width: 1200px !important;\n    padding: 0 20px !important;\n    text-align: center !important;\n    width: 100% !important;\n    box-sizing: border-box !important;\n}\n\n.ad-label {\n    font-size: 12px !important;\n    color: #666 !important;\n    margin-bottom: 8px !important;\n    text-align: center !important;\n}\n\n.adsbygoogle {\n    min-height: 90px !important;\n    width: 100% !important;\n    max-width: 100% !important;\n    overflow: hidden !important;\n    display: block !important;\n}\n\n/* Ensure ads have minimum width on mobile */\n@media (max-width: 320px) {\n    .ad-container {\n        min-width: 300px !important;\n        padding: 0 10px !important;\n    }\n}\n\n/* Small mobile devices */\n@media (max-width: 480px) {\n    .ad-container {\n        min-height: 100px !important;\n        padding: 0 15px !important;\n    }\n}\n\n/* Tablet and desktop responsive sizes */\n@media (min-width: 768px) {\n    .ad-container {\n        min-height: 100px !important;\n    }\n}\n\n@media (min-width: 1024px) {\n    .ad-container {\n        min-height: 90px !important;\n    }\n}\n",document.head.appendChild(t)}(),e(),function(){try{const t=document.querySelectorAll("img[data-src]:not(.lazy)");if(!t.length)return;if("IntersectionObserver"in window){const e=new IntersectionObserver((t,e)=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;n&&n.dataset.src&&(n.src=n.dataset.src,n.removeAttribute("data-src"),e.unobserve(n))}})});t.forEach(t=>{t&&e.observe(t)})}else t.forEach(t=>{t&&t.dataset.src&&(t.src=t.dataset.src,t.removeAttribute("data-src"))})}catch(t){console.error("이미지 지연 로딩 오류:",t)}}(),r.get("darkMode")&&document.body.classList.add("dark-mode"),l()}),window.addEventListener("load",function(){setTimeout(c,1e3)}),window.toggleMobileMenu=function(){if(window.DohaApp&&DohaApp.components&&DohaApp.components.mobileMenu)DohaApp.components.mobileMenu.toggle();else{const t=document.querySelector(".nav-menu, .nav"),e=document.querySelector(".mobile-menu-btn, .header__menu-toggle");if(t){const n=t.classList.toggle("active");t.classList.toggle("nav--open"),e&&(e.setAttribute("aria-expanded",n.toString()),e.setAttribute("aria-label",n?"메뉴 닫기":"메뉴 열기"))}e&&e.classList.toggle("active")}},window.showServices=function(t,e){if(window.DohaApp&&DohaApp.components&&DohaApp.components.tabs){DohaApp.components.tabs.filterServices(t);document.querySelectorAll('.tab-button, [role="tab"]').forEach(e=>{e.classList.remove("active","tabs__button--active"),e.setAttribute("aria-selected","false"),("all"===t&&e.textContent.includes("전체")||"tests"===t&&e.textContent.includes("심리테스트")||"tools"===t&&e.textContent.includes("실용도구")||"fortune"===t&&e.textContent.includes("운세")||"new"===t&&e.textContent.includes("최신"))&&(e.classList.add("active","tabs__button--active"),e.setAttribute("aria-selected","true"))})}else{document.querySelectorAll(".service-card").forEach(e=>{if(e)if("all"===t)e.style.display="block";else{const n=e.getAttribute("data-category");n&&n.includes(t)?e.style.display="block":e.style.display="none"}})}},window.shareResult=n,window.showNotification=a,window.validateForm=function(t){try{const e=document.getElementById(t);if(!e)return!0;const n=e.querySelectorAll("input[required], textarea[required]");let o=!0;return n.forEach(t=>{t&&(t.value.trim()?t.classList.remove("error"):(t.classList.add("error"),o=!1))}),o}catch(t){return console.error("폼 유효성 검사 중 오류:",t),!1}},window.storage=r,window.formatDate=i,window.formatNumber=function(t){try{return null==t?"0":t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(t){return console.error("숫자 포맷팅 오류:",t),"0"}},window.toggleDarkMode=function(){const t=document.body.classList.toggle("dark-mode");return r.set("darkMode",t),t},window.fortuneHelpers={save:function(t,e){const n=`fortune_${t}_${i(new Date,"YYYY-MM-DD")}`;r.set(n,e)},load:function(t){const e=`fortune_${t}_${i(new Date,"YYYY-MM-DD")}`;return r.get(e)},share:function(t,e,o){n(t,`doha.kr에서 ${e} 결과를 확인했어요!`,window.location.href)}}}();