!function(){function toggleMobileMenu(){if(window.DohaApp&&DohaApp.components&&DohaApp.components.mobileMenu)DohaApp.components.mobileMenu.toggle();else{const navMenu=document.querySelector(".nav-menu, .nav"),menuBtn=document.querySelector(".mobile-menu-btn, .header__menu-toggle");if(navMenu){const isOpen=navMenu.classList.toggle("active");navMenu.classList.toggle("nav--open"),menuBtn&&(menuBtn.setAttribute("aria-expanded",isOpen.toString()),menuBtn.setAttribute("aria-label",isOpen?"메뉴 닫기":"메뉴 열기"))}menuBtn&&menuBtn.classList.toggle("active")}}function showServices(category,event){if(window.DohaApp&&DohaApp.components&&DohaApp.components.tabs){DohaApp.components.tabs.filterServices(category);const buttons=undefined;document.querySelectorAll('.tab-button, [role="tab"]').forEach(btn=>{btn.classList.remove("active","tabs__button--active"),btn.setAttribute("aria-selected","false"),("all"===category&&btn.textContent.includes("전체")||"tests"===category&&btn.textContent.includes("심리테스트")||"tools"===category&&btn.textContent.includes("실용도구")||"fortune"===category&&btn.textContent.includes("운세")||"new"===category&&btn.textContent.includes("최신"))&&(btn.classList.add("active","tabs__button--active"),btn.setAttribute("aria-selected","true"))})}else{const cards=undefined;document.querySelectorAll(".service-card").forEach(card=>{if(card)if("all"===category)card.style.display="block";else{const cardCategories=card.getAttribute("data-category");cardCategories&&cardCategories.includes(category)?card.style.display="block":card.style.display="none"}})}}function handleScrollAnimation(){try{const elements=undefined;document.querySelectorAll(".fade-in").forEach(element=>{if(!element)return;const rect=element.getBoundingClientRect(),isVisible=undefined;rect.top<window.innerHeight&&rect.bottom>0&&!element.classList.contains("animated")&&element.classList.add("animated")})}catch(error){console.error("스크롤 애니메이션 처리 중 오류:",error)}}function smoothScroll(target){try{const element=document.querySelector(target);if(element){const headerHeight=document.querySelector(".header")?.offsetHeight||0,targetPosition=element.offsetTop-headerHeight-20;window.scrollTo({top:targetPosition,behavior:"smooth"}),element.setAttribute("tabindex","-1"),element.focus()}}catch(error){console.error("스크롤 처리 중 오류:",error)}}function initPageAnimations(){handleScrollAnimation(),window.addEventListener("scroll",throttle(handleScrollAnimation,100))}function throttle(func,limit){if(window.DohaApp&&DohaApp.utils&&DohaApp.utils.throttle)return DohaApp.utils.throttle(func,limit);let inThrottle;return function(...args){inThrottle||(func.apply(this,args),inThrottle=!0,setTimeout(()=>inThrottle=!1,limit))}}function validateForm(formId){try{const form=document.getElementById(formId);if(!form)return!0;const inputs=form.querySelectorAll("input[required], textarea[required]");let isValid=!0;return inputs.forEach(input=>{input&&(input.value.trim()?input.classList.remove("error"):(input.classList.add("error"),isValid=!1))}),isValid}catch(error){return console.error("폼 유효성 검사 중 오류:",error),!1}}function setCookie(name,value,days){const expires=new Date;expires.setTime(expires.getTime()+24*days*60*60*1e3),document.cookie=`${name}=${value};expires=${expires.toUTCString()};path=/`}function getCookie(name){const nameEQ=name+"=",ca=document.cookie.split(";");for(let i=0;i<ca.length;i++){let c=ca[i];for(;" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}function shareResult(platform,title,url){try{const text=encodeURIComponent(title||""),encodedUrl=encodeURIComponent(url||window.location.href),shareUrls={facebook:`https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`,twitter:`https://twitter.com/intent/tweet?text=${text}&url=${encodedUrl}`,kakao:`https://story.kakao.com/share?url=${encodedUrl}`,line:`https://social-plugins.line.me/lineit/share?url=${encodedUrl}`,copylink:null};"copylink"===platform?(copyToClipboard(url||window.location.href),showNotification("링크가 복사되었습니다!")):shareUrls[platform]&&window.open(shareUrls[platform],"_blank","width=600,height=400")}catch(error){console.error("공유 기능 오류:",error),showNotification("공유 중 오류가 발생했습니다.","error")}}function copyToClipboard(text){navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(text).catch(err=>{console.error("복사 실패:",err),fallbackCopyToClipboard(text)}):fallbackCopyToClipboard(text)}function fallbackCopyToClipboard(text){const textArea=document.createElement("textarea");textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999999px",document.body.appendChild(textArea),textArea.focus(),textArea.select();try{document.execCommand("copy")}catch(err){console.error("복사 실패:",err)}document.body.removeChild(textArea)}function showNotification(message,type="success"){try{const notification=document.createElement("div");notification.className=`notification notification-${type}`,notification.textContent=message,notification.style.cssText=`\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 16px 24px;\n            background: ${"success"===type?"#10b981":"#ef4444"};\n            color: white;\n            border-radius: 8px;\n            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);\n            z-index: 9999;\n            animation: slideInRight 0.3s ease;\n        `,document.body.appendChild(notification),setTimeout(()=>{notification.style.animation="slideOutRight 0.3s ease",setTimeout(()=>{notification&&notification.parentNode&&notification.remove()},300)},3e3)}catch(error){console.error("알림 표시 중 오류:",error)}}const storage=window.DohaApp&&DohaApp.utils&&DohaApp.utils.storage||{set(key,value){try{return localStorage.setItem(key,JSON.stringify(value)),!0}catch(e){return console.error("Storage set error:",e),!1}},get(key){try{const item=localStorage.getItem(key);return item?JSON.parse(item):null}catch(e){return console.error("Storage get error:",e),null}},remove(key){try{return localStorage.removeItem(key),!0}catch(e){return console.error("Storage remove error:",e),!1}},clear(){try{return localStorage.clear(),!0}catch(e){return console.error("Storage clear error:",e),!1}}};function debounce(func,wait){if(window.DohaApp&&DohaApp.utils&&DohaApp.utils.debounce)return DohaApp.utils.debounce(func,wait);let timeout;return function executedFunction(...args){const later=()=>{clearTimeout(timeout),func(...args)};clearTimeout(timeout),timeout=setTimeout(later,wait)}}function formatDate(date,format="YYYY-MM-DD"){try{const d=new Date(date);if(isNaN(d.getTime()))return console.error("잘못된 날짜 형식:",date),format;const year=d.getFullYear(),month=String(d.getMonth()+1).padStart(2,"0"),day=String(d.getDate()).padStart(2,"0"),hours=String(d.getHours()).padStart(2,"0"),minutes=String(d.getMinutes()).padStart(2,"0");return format.replace("YYYY",year).replace("MM",month).replace("DD",day).replace("HH",hours).replace("mm",minutes)}catch(error){return console.error("날짜 포맷팅 오류:",error),format}}function formatNumber(num){try{return null==num?"0":num.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(error){return console.error("숫자 포맷팅 오류:",error),"0"}}function getUrlParam(name){const urlParams=undefined;return new URLSearchParams(window.location.search).get(name)}function lazyLoadImages(){try{const images=document.querySelectorAll("img[data-src]:not(.lazy)");if(!images.length)return;if("IntersectionObserver"in window){const imageObserver=new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;img&&img.dataset.src&&(img.src=img.dataset.src,img.removeAttribute("data-src"),observer.unobserve(img))}})});images.forEach(img=>{img&&imageObserver.observe(img)})}else images.forEach(img=>{img&&img.dataset.src&&(img.src=img.dataset.src,img.removeAttribute("data-src"))})}catch(error){console.error("이미지 지연 로딩 오류:",error)}}function toggleDarkMode(){const isDarkMode=document.body.classList.toggle("dark-mode");return storage.set("darkMode",isDarkMode),isDarkMode}function initDarkMode(){const isDarkMode=undefined;storage.get("darkMode")&&document.body.classList.add("dark-mode")}function fortuneHelpers(){function saveFortune(type,data){const today=undefined,fortuneKey=`fortune_${type}_${formatDate(new Date,"YYYY-MM-DD")}`;storage.set(fortuneKey,data)}function loadFortune(type){const today=undefined,fortuneKey=`fortune_${type}_${formatDate(new Date,"YYYY-MM-DD")}`;return storage.get(fortuneKey)}function shareFortune(platform,fortuneType,result){const title=undefined,url=undefined;shareResult(platform,`doha.kr에서 ${fortuneType} 결과를 확인했어요!`,window.location.href)}return{save:saveFortune,load:loadFortune,share:shareFortune}}const animationStyles="\n@keyframes slideInRight {\n    from {\n        transform: translateX(100%);\n        opacity: 0;\n    }\n    to {\n        transform: translateX(0);\n        opacity: 1;\n    }\n}\n\n@keyframes slideOutRight {\n    from {\n        transform: translateX(0);\n        opacity: 1;\n    }\n    to {\n        transform: translateX(100%);\n        opacity: 0;\n    }\n}\n\n/* animated 클래스가 추가되면 CSS 애니메이션이 작동하도록 함 */\n.fade-in.animated {\n    opacity: 1 !important;\n    transform: translateY(0) !important;\n}\n\ninput.error, textarea.error {\n    border-color: #ef4444 !important;\n}\n\n.dark-mode {\n    --gray-50: #111827;\n    --gray-100: #1f2937;\n    --gray-200: #374151;\n    --gray-300: #4b5563;\n    --gray-400: #6b7280;\n    --gray-500: #9ca3af;\n    --gray-600: #d1d5db;\n    --gray-700: #e5e7eb;\n    --gray-800: #f3f4f6;\n    --gray-900: #f9fafb;\n}\n\n/* Responsive AdSense Styles - Global Fix */\n.ad-container {\n    min-height: 250px !important;\n    margin: 40px auto !important;\n    max-width: 1200px !important;\n    padding: 0 20px !important;\n    text-align: center !important;\n    width: 100% !important;\n    box-sizing: border-box !important;\n}\n\n.ad-label {\n    font-size: 12px !important;\n    color: #666 !important;\n    margin-bottom: 8px !important;\n    text-align: center !important;\n}\n\n.adsbygoogle {\n    min-height: 90px !important;\n    width: 100% !important;\n    max-width: 100% !important;\n    overflow: hidden !important;\n    display: block !important;\n}\n\n/* Ensure ads have minimum width on mobile */\n@media (max-width: 320px) {\n    .ad-container {\n        min-width: 300px !important;\n        padding: 0 10px !important;\n    }\n}\n\n/* Small mobile devices */\n@media (max-width: 480px) {\n    .ad-container {\n        min-height: 100px !important;\n        padding: 0 15px !important;\n    }\n}\n\n/* Tablet and desktop responsive sizes */\n@media (min-width: 768px) {\n    .ad-container {\n        min-height: 100px !important;\n    }\n}\n\n@media (min-width: 1024px) {\n    .ad-container {\n        min-height: 90px !important;\n    }\n}\n";function injectStyles(){const styleElement=document.createElement("style");styleElement.textContent=animationStyles,document.head.appendChild(styleElement)}async function loadComponentById(componentName,targetId){try{const response=await fetch(`/includes/${componentName}.html`);if(!response.ok)throw new Error(`HTTP ${response.status}`);{const html=await response.text(),target=document.getElementById(targetId);target&&(target.innerHTML=html)}}catch(error){console.error(`Failed to load component ${componentName}:`,error);const target=document.getElementById(targetId);if(!target)return;"navbar"===componentName?target.innerHTML='\n                <nav class="navbar">\n                    <div class="navbar-container">\n                        <a href="/" class="logo">doha.kr</a>\n                        <ul class="nav-menu">\n                            <li><a href="/" class="nav-link">홈</a></li>\n                            <li><a href="/tests/" class="nav-link">심리테스트</a></li>\n                            <li><a href="/tools/" class="nav-link">실용도구</a></li>\n                            <li><a href="/fortune/" class="nav-link">운세</a></li>\n                            <li><a href="/contact/" class="nav-link">문의</a></li>\n                            <li><a href="/about/" class="nav-link">소개</a></li>\n                        </ul>\n                        <button class="mobile-menu-btn" onclick="toggleMobileMenu()">\n                            <span></span>\n                            <span></span>\n                            <span></span>\n                        </button>\n                    </div>\n                </nav>\n            ':"footer"===componentName&&(target.innerHTML='\n                <footer class="footer">\n                    <div class="footer-content">\n                        <div class="footer-section">\n                            <h3>doha.kr</h3>\n                            <p style="color: var(--gray-400); margin-top: 8px;">\n                                일상을 더 재미있게 만드는 공간<br>\n                                심리테스트, 실용도구, 운세의 만남\n                            </p>\n                            <div class="footer-social">\n                                <a href="mailto:youtubdoha@gmail.com" class="social-link">📧</a>\n                            </div>\n                        </div>\n                        \n                        <div class="footer-section">\n                            <h3>서비스</h3>\n                            <ul class="footer-links">\n                                <li><a href="/">홈</a></li>\n                                <li><a href="/tests/">심리테스트</a></li>\n                                <li><a href="/tools/">실용도구</a></li>\n                                <li><a href="/fortune/">운세</a></li>\n                                <li><a href="/about/">사이트 소개</a></li>\n                            </ul>\n                        </div>\n                        \n                        <div class="footer-section">\n                            <h3>인기 콘텐츠</h3>\n                            <ul class="footer-links">\n                                <li><a href="/tests/teto-egen/">테토-에겐 테스트</a></li>\n                                <li><a href="/tests/mbti/">MBTI 테스트</a></li>\n                                <li><a href="/fortune/daily/">오늘의 운세</a></li>\n                                <li><a href="/tools/text-counter.html">글자수 세기</a></li>\n                            </ul>\n                        </div>\n                        \n                        <div class="footer-section">\n                            <h3>운세 & 고객지원</h3>\n                            <ul class="footer-links">\n                                <li><a href="/fortune/daily/">오늘의 운세</a></li>\n                                <li><a href="/fortune/tarot/">타로 카드</a></li>\n                                <li><a href="/fortune/zodiac/">별자리 운세</a></li>\n                                <li><a href="/contact/">문의하기</a></li>\n                            </ul>\n                        </div>\n                    </div>\n                    \n                    <div class="footer-bottom">\n                        <div class="footer-legal">\n                            <a href="/privacy/">개인정보처리방침</a>\n                            <a href="/terms/">이용약관</a>\n                        </div>\n                        <p>&copy; 2025 doha.kr. All rights reserved.</p>\n                    </div>\n                </footer>\n            ')}}async function loadComponent(componentName,targetClass){try{const response=await fetch(`/includes/${componentName}.html`);if(!response.ok)throw new Error(`HTTP ${response.status}`);{const html=await response.text(),target=document.querySelector(`.${targetClass}`);target&&(target.innerHTML=html)}}catch(error){console.error(`Failed to load component ${componentName}:`,error);const target=document.querySelector(`.${targetClass}`);if(!target)return;"navbar"===componentName?target.innerHTML='\n                <nav class="navbar">\n                    <div class="navbar-container">\n                        <a href="/" class="logo">doha.kr</a>\n                        <ul class="nav-menu">\n                            <li><a href="/" class="nav-link">홈</a></li>\n                            <li><a href="/tests/" class="nav-link">심리테스트</a></li>\n                            <li><a href="/tools/" class="nav-link">실용도구</a></li>\n                            <li><a href="/fortune/" class="nav-link">운세</a></li>\n                            <li><a href="/contact/" class="nav-link">문의</a></li>\n                            <li><a href="/about/" class="nav-link">소개</a></li>\n                        </ul>\n                        <button class="mobile-menu-btn" onclick="toggleMobileMenu()">\n                            <span></span>\n                            <span></span>\n                            <span></span>\n                        </button>\n                    </div>\n                </nav>\n            ':"footer"===componentName&&(target.innerHTML='\n                <footer class="footer">\n                    <div class="footer-content">\n                        <div class="footer-section">\n                            <h3>doha.kr</h3>\n                            <p style="color: var(--gray-400); margin-top: 8px;">\n                                일상을 더 재미있게 만드는 공간<br>\n                                심리테스트, 실용도구, 운세의 만남\n                            </p>\n                            <div class="footer-social">\n                                <a href="mailto:youtubdoha@gmail.com" class="social-link">📧</a>\n                            </div>\n                        </div>\n                        \n                        <div class="footer-section">\n                            <h3>서비스</h3>\n                            <ul class="footer-links">\n                                <li><a href="/">홈</a></li>\n                                <li><a href="/tests/">심리테스트</a></li>\n                                <li><a href="/tools/">실용도구</a></li>\n                                <li><a href="/fortune/">운세</a></li>\n                                <li><a href="/about/">사이트 소개</a></li>\n                            </ul>\n                        </div>\n                        \n                        <div class="footer-section">\n                            <h3>인기 콘텐츠</h3>\n                            <ul class="footer-links">\n                                <li><a href="/tests/teto-egen/">테토-에겐 테스트</a></li>\n                                <li><a href="/tests/mbti/">MBTI 테스트</a></li>\n                                <li><a href="/fortune/daily/">오늘의 운세</a></li>\n                                <li><a href="/tools/text-counter.html">글자수 세기</a></li>\n                            </ul>\n                        </div>\n                        \n                        <div class="footer-section">\n                            <h3>운세 & 고객지원</h3>\n                            <ul class="footer-links">\n                                <li><a href="/fortune/daily/">오늘의 운세</a></li>\n                                <li><a href="/fortune/tarot/">타로 카드</a></li>\n                                <li><a href="/fortune/zodiac/">별자리 운세</a></li>\n                                <li><a href="/contact/">문의하기</a></li>\n                            </ul>\n                        </div>\n                    </div>\n                    \n                    <div class="footer-bottom">\n                        <div class="footer-legal">\n                            <a href="/privacy/">개인정보처리방침</a>\n                            <a href="/terms/">이용약관</a>\n                        </div>\n                        <p>&copy; 2025 doha.kr. All rights reserved.</p>\n                    </div>\n                </footer>\n            ')}}async function loadComponents(){const navTarget=document.querySelector("#navbar-placeholder"),footerTarget=document.querySelector("#footer-placeholder");navTarget&&await loadComponentById("navbar","navbar-placeholder"),footerTarget&&await loadComponentById("footer","footer-placeholder")}function fixAdSenseResponsive(){const adContainers=document.querySelectorAll(".ad-container");function checkAdContainers(){const width=window.innerWidth;adContainers.forEach(container=>{width<320?(container.style.padding="0 10px",container.style.minWidth="300px"):container.style.padding=width<480?"0 15px":"0 20px"})}adContainers.forEach(container=>{container.style.minWidth="300px",container.style.width="100%",container.style.boxSizing="border-box",container.style.padding="0 20px",container.style.margin="40px auto",container.style.maxWidth="1200px";const ins=container.querySelector(".adsbygoogle");ins&&(ins.style.minHeight="90px",ins.style.width="100%",ins.style.maxWidth="100%",ins.style.overflow="hidden",ins.style.display="block",ins.hasAttribute("data-full-width-responsive")||ins.setAttribute("data-full-width-responsive","true"))}),checkAdContainers(),window.addEventListener("resize",debounce(checkAdContainers,250))}function initAdSense(){try{fixAdSenseResponsive();const adSlots=document.querySelectorAll(".adsbygoogle:not([data-adsbygoogle-status])");if(0===adSlots.length)return;adSlots.forEach((slot,index)=>{const rect=slot.getBoundingClientRect();rect.width<50&&(slot.style.minWidth="320px",slot.style.width="100%"),rect.height<50&&(slot.style.minHeight="100px"),slot.setAttribute("data-adsbygoogle-status","processing")}),"undefined"!=typeof adsbygoogle?adSlots.forEach((slot,index)=>{try{(adsbygoogle=window.adsbygoogle||[]).push({}),slot.setAttribute("data-adsbygoogle-status","loaded")}catch(error){console.error(`AdSense 슬롯 ${index} 로딩 오류:`,error),slot.setAttribute("data-adsbygoogle-status","error")}}):(console.warn("AdSense 스크립트가 아직 로드되지 않음"),setTimeout(initAdSense,2e3))}catch(error){console.error("AdSense 초기화 전체 오류:",error)}}document.addEventListener("DOMContentLoaded",async function(){const isDohaAppInitialized=undefined;window.DohaApp&&"function"==typeof DohaApp.init||await loadComponents(),injectStyles(),initPageAnimations(),lazyLoadImages(),initDarkMode(),fixAdSenseResponsive()}),window.addEventListener("load",function(){setTimeout(initAdSense,1e3)}),window.toggleMobileMenu=toggleMobileMenu,window.showServices=showServices,window.shareResult=shareResult,window.showNotification=showNotification,window.validateForm=validateForm,window.storage=storage,window.formatDate=formatDate,window.formatNumber=formatNumber,window.toggleDarkMode=toggleDarkMode,window.fortuneHelpers=fortuneHelpers()}();