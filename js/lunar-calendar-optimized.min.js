var HEAVENLY_STEMS=["갑","을","병","정","무","기","경","신","임","계"],EARTHLY_BRANCHES=["자","축","인","묘","진","사","오","미","신","유","술","해"],HEAVENLY_STEMS_HANJA=["甲","乙","丙","丁","戊","己","庚","辛","壬","癸"],EARTHLY_BRANCHES_HANJA=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],REFERENCE_DATE=new Date(1991,9,3),REFERENCE_STEM_INDEX=2,REFERENCE_BRANCH_INDEX=6,LUNAR_DATA={1991:{10:{3:{lunar:{year:1991,month:8,day:26,isLeap:!1},yearPillar:{stem:"신",branch:"미"},monthPillar:{stem:"무",branch:"술"},dayPillar:{stem:"병",branch:"오"}}}}},SOLAR_TERMS={"소한":0,"대한":1,"입춘":2,"우수":3,"경칩":4,"춘분":5,"청명":6,"곡우":7,"입하":8,"소만":9,"망종":10,"하지":11,"소서":12,"대서":13,"입추":14,"처서":15,"백로":16,"추분":17,"한로":18,"상강":19,"입동":20,"소설":21,"대설":22,"동지":23},MONTH_BRANCH_BY_TERM=["자","축","인","묘","진","사","오","미","신","유","술","해"];function calculateDayPillar(a,E,l){const r=new Date(a,E-1,l),t=Math.floor((r-REFERENCE_DATE)/864e5);let e=(2+t)%10;e<0&&(e+=10);let n=(6+t)%12;return n<0&&(n+=12),{stem:HEAVENLY_STEMS[e],branch:EARTHLY_BRANCHES[n],stemHanja:HEAVENLY_STEMS_HANJA[e],branchHanja:EARTHLY_BRANCHES_HANJA[n],pillar:HEAVENLY_STEMS[e]+EARTHLY_BRANCHES[n],pillarHanja:HEAVENLY_STEMS_HANJA[e]+EARTHLY_BRANCHES_HANJA[n]}}function calculateYearPillar(a){const E=a-1984;let l=E%10,r=E%12;return l<0&&(l+=10),r<0&&(r+=12),{stem:HEAVENLY_STEMS[l],branch:EARTHLY_BRANCHES[r],stemHanja:HEAVENLY_STEMS_HANJA[l],branchHanja:EARTHLY_BRANCHES_HANJA[r],pillar:HEAVENLY_STEMS[l]+EARTHLY_BRANCHES[r]}}function calculateMonthPillar(a,E,l){const r=calculateYearPillar(a).stem,t=HEAVENLY_STEMS.indexOf(r),e=["인","묘","진","사","오","미","신","유","술","해","자","축"][E-1],n=([2,4,6,8,0][t%5]+E-1)%10;return{stem:HEAVENLY_STEMS[n],branch:e,stemHanja:HEAVENLY_STEMS_HANJA[n],branchHanja:EARTHLY_BRANCHES_HANJA[EARTHLY_BRANCHES.indexOf(e)],pillar:HEAVENLY_STEMS[n]+e}}function calculateHourPillar(a,E){const l=a.stem,r=HEAVENLY_STEMS.indexOf(l),t=Math.floor((E+1)/2)%12,e=["자","축","인","묘","진","사","오","미","신","유","술","해"][t],n=([0,2,4,6,8][r%5]+t)%10;return{stem:HEAVENLY_STEMS[n],branch:e,stemHanja:HEAVENLY_STEMS_HANJA[n],branchHanja:EARTHLY_BRANCHES_HANJA[EARTHLY_BRANCHES.indexOf(e)],pillar:HEAVENLY_STEMS[n]+e}}function calculateSaju(a,E,l,r){const t=calculateYearPillar(a),e=calculateMonthPillar(a,E,l),n=calculateDayPillar(a,E,l),A=calculateHourPillar(n,r);return{year:t,month:e,day:n,hour:A,summary:{pillars:`${t.pillar} ${e.pillar} ${n.pillar} ${A.pillar}`,pillarsHanja:`${t.pillarHanja} ${e.pillarHanja} ${n.pillarHanja} ${A.pillarHanja}`}}}function solarToLunar(a,E,l){return{year:a,month:E,day:l,isLeap:!1}}function lunarToSolar(a,E,l,r=!1){return{year:a,month:E,day:l}}var FIVE_ELEMENTS={"갑":"목","을":"목","병":"화","정":"화","무":"토","기":"토","경":"금","신":"금","임":"수","계":"수"};var YIN_YANG={"갑":"양","을":"음","병":"양","정":"음","무":"양","기":"음","경":"양","신":"음","임":"양","계":"음"};var BRANCH_ELEMENTS={"자":"수","축":"토","인":"목","묘":"목","진":"토","사":"화","오":"화","미":"토","신":"금","유":"금","술":"토","해":"수"};function getSajuInterpretation(a){const E=a.day.stem,l=FIVE_ELEMENTS[E],r=YIN_YANG[E],t={"목":0,"화":0,"토":0,"금":0,"수":0};return[a.year,a.month,a.day,a.hour].forEach(a=>{t[FIVE_ELEMENTS[a.stem]]++,t[BRANCH_ELEMENTS[a.branch]]++}),{dayMaster:E,dayMasterElement:l,dayMasterYinYang:r,elementBalance:t,dayPillar:a.day.pillar}}window.LunarCalendar={calculateSaju:calculateSaju,calculateDayPillar:calculateDayPillar,calculateYearPillar:calculateYearPillar,calculateMonthPillar:calculateMonthPillar,calculateHourPillar:calculateHourPillar,solarToLunar:solarToLunar,lunarToSolar:lunarToSolar,getSajuInterpretation:getSajuInterpretation,HEAVENLY_STEMS:HEAVENLY_STEMS,EARTHLY_BRANCHES:EARTHLY_BRANCHES,FIVE_ELEMENTS:FIVE_ELEMENTS,YIN_YANG:YIN_YANG,BRANCH_ELEMENTS:BRANCH_ELEMENTS};