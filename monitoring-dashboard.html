<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>doha.kr ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ</title>
    <meta
      name="description"
      content="doha.kr ì›¹ì‚¬ì´íŠ¸ì˜ ì„±ëŠ¥, í’ˆì§ˆ ì§€í‘œ ë° ì‚¬ìš©ì ë©”íŠ¸ë¦­ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ëŒ€ì‹œë³´ë“œ"
    />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary-color: #667eea;
        --secondary-color: #764ba2;
        --success-color: #10b981;
        --warning-color: #f59e0b;
        --danger-color: #ef4444;
        --background-color: #f8fafc;
        --card-background: #ffffff;
        --text-primary: #1a202c;
        --text-secondary: #4a5568;
        --text-muted: #718096;
        --border-color: #e2e8f0;
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --border-radius: 8px;
        --spacing-xs: 0.25rem;
        --spacing-sm: 0.5rem;
        --spacing-md: 1rem;
        --spacing-lg: 1.5rem;
        --spacing-xl: 2rem;
        --spacing-2xl: 3rem;
      }

      body {
        font-family:
          'Pretendard Variable',
          -apple-system,
          BlinkMacSystemFont,
          'Segoe UI',
          sans-serif;
        background: var(--background-color);
        color: var(--text-primary);
        line-height: 1.6;
      }

      .header {
        background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
        color: white;
        padding: var(--spacing-2xl);
        text-align: center;
        box-shadow: var(--shadow-lg);
      }

      .header h1 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: var(--spacing-sm);
      }

      .header .subtitle {
        font-size: 1.125rem;
        opacity: 0.9;
        margin-bottom: var(--spacing-lg);
      }

      .header .status-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: var(--spacing-lg);
        margin-top: var(--spacing-lg);
      }

      .status-item {
        text-align: center;
      }

      .status-value {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: var(--spacing-xs);
      }

      .status-label {
        font-size: 0.875rem;
        opacity: 0.8;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: var(--spacing-2xl);
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: var(--spacing-xl);
      }

      .card {
        background: var(--card-background);
        border-radius: var(--border-radius);
        padding: var(--spacing-xl);
        box-shadow: var(--shadow);
        border: 1px solid var(--border-color);
        transition: all 0.2s ease;
      }

      .card:hover {
        box-shadow: var(--shadow-lg);
        transform: translateY(-2px);
      }

      .card-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--spacing-lg);
        padding-bottom: var(--spacing-md);
        border-bottom: 1px solid var(--border-color);
      }

      .card-title {
        font-size: 1.25rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
      }

      .card-refresh {
        background: none;
        border: none;
        color: var(--text-muted);
        cursor: pointer;
        padding: var(--spacing-xs);
        border-radius: 4px;
        transition: all 0.2s ease;
      }

      .card-refresh:hover {
        background: var(--background-color);
        color: var(--primary-color);
      }

      .metric-value {
        font-size: 2.5rem;
        font-weight: 700;
        margin: var(--spacing-md) 0;
      }

      .metric-label {
        color: var(--text-secondary);
        font-size: 0.875rem;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .status-good {
        color: var(--success-color);
      }
      .status-warning {
        color: var(--warning-color);
      }
      .status-critical {
        color: var(--danger-color);
      }

      .timestamp {
        color: var(--text-muted);
        font-size: 0.75rem;
        margin-top: var(--spacing-lg);
        text-align: right;
      }

      .lighthouse-scores {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: var(--spacing-md);
        margin-top: var(--spacing-lg);
      }

      .score-item {
        text-align: center;
        padding: var(--spacing-lg);
        background: var(--background-color);
        border-radius: var(--border-radius);
        border: 1px solid var(--border-color);
      }

      .score-value {
        font-size: 2rem;
        font-weight: 700;
        margin: var(--spacing-sm) 0;
      }

      .progress-bar {
        width: 100%;
        height: 6px;
        background: var(--border-color);
        border-radius: 3px;
        overflow: hidden;
        margin: var(--spacing-sm) 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--success-color), var(--primary-color));
        transition: width 0.3s ease;
        border-radius: 3px;
      }

      .vitals-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: var(--spacing-md);
        margin-top: var(--spacing-lg);
      }

      .vital-item {
        text-align: center;
        padding: var(--spacing-md);
        background: var(--background-color);
        border-radius: var(--border-radius);
      }

      .vital-value {
        font-size: 1.5rem;
        font-weight: 600;
        margin: var(--spacing-xs) 0;
      }

      .vital-label {
        font-size: 0.75rem;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--spacing-md);
        margin-top: var(--spacing-lg);
      }

      .stat-item {
        padding: var(--spacing-md);
        background: var(--background-color);
        border-radius: var(--border-radius);
        text-align: center;
      }

      .error-list {
        max-height: 300px;
        overflow-y: auto;
        background: #fef2f2;
        border-radius: var(--border-radius);
        padding: var(--spacing-md);
        margin-top: var(--spacing-lg);
      }

      .error-item {
        padding: var(--spacing-sm);
        border-left: 3px solid var(--danger-color);
        margin-bottom: var(--spacing-sm);
        background: white;
        border-radius: 4px;
        font-size: 0.875rem;
        line-height: 1.4;
      }

      .error-message {
        font-weight: 500;
        color: var(--danger-color);
      }

      .error-time {
        color: var(--text-muted);
        font-size: 0.75rem;
        margin-top: var(--spacing-xs);
      }

      .alert-banner {
        background: linear-gradient(90deg, #fef3c7, #fbbf24);
        color: #92400e;
        padding: var(--spacing-md);
        border-radius: var(--border-radius);
        margin-bottom: var(--spacing-xl);
        font-weight: 500;
        text-align: center;
      }

      .controls {
        position: fixed;
        bottom: var(--spacing-xl);
        right: var(--spacing-xl);
        display: flex;
        gap: var(--spacing-md);
      }

      .control-btn {
        background: var(--primary-color);
        color: white;
        border: none;
        border-radius: 50px;
        padding: var(--spacing-md) var(--spacing-xl);
        cursor: pointer;
        box-shadow: var(--shadow-lg);
        font-weight: 600;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm);
      }

      .control-btn:hover {
        background: #5a67d8;
        transform: translateY(-2px);
        box-shadow: 0 10px 25px -5px rgba(102, 126, 234, 0.4);
      }

      .loading {
        display: inline-block;
        width: 12px;
        height: 12px;
        border: 2px solid #f3f3f3;
        border-top: 2px solid var(--primary-color);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .trend-indicator {
        display: inline-flex;
        align-items: center;
        gap: var(--spacing-xs);
        font-size: 0.75rem;
        font-weight: 500;
      }

      .trend-up {
        color: var(--success-color);
      }
      .trend-down {
        color: var(--danger-color);
      }
      .trend-stable {
        color: var(--text-muted);
      }

      @media (max-width: 768px) {
        .header {
          padding: var(--spacing-lg);
        }

        .header h1 {
          font-size: 2rem;
        }

        .container {
          padding: var(--spacing-lg);
        }

        .grid {
          grid-template-columns: 1fr;
          gap: var(--spacing-lg);
        }

        .lighthouse-scores,
        .vitals-grid,
        .stats-grid {
          grid-template-columns: repeat(2, 1fr);
        }

        .controls {
          bottom: var(--spacing-lg);
          right: var(--spacing-lg);
          flex-direction: column;
        }
      }
    </style>
  </head>
  <body>
    <div class="header">
      <h1>ğŸš€ doha.kr ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</h1>
      <p class="subtitle">ì„±ëŠ¥ ì§€í‘œ ë° í’ˆì§ˆ ë©”íŠ¸ë¦­ ëŒ€ì‹œë³´ë“œ</p>

      <div class="status-grid">
        <div class="status-item">
          <div class="status-value" id="last-update">--:--</div>
          <div class="status-label">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</div>
        </div>
        <div class="status-item">
          <div class="status-value" id="system-status">ì‹œìŠ¤í…œ í™•ì¸ ì¤‘</div>
          <div class="status-label">ì‹œìŠ¤í…œ ìƒíƒœ</div>
        </div>
        <div class="status-item">
          <div class="status-value" id="uptime">ê³„ì‚° ì¤‘</div>
          <div class="status-label">ìš´ì˜ ì‹œê°„</div>
        </div>
        <div class="status-item">
          <div class="status-value" id="total-issues">0</div>
          <div class="status-label">ë°œê²¬ëœ ì´ìŠˆ</div>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- Lighthouse ì ìˆ˜ ì¹´ë“œ -->
      <div class="grid">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ğŸ“Š Lighthouse ì ìˆ˜</h3>
            <button class="card-refresh" onclick="refreshLighthouseScores()">
              <span id="lighthouse-loading"></span>
              ğŸ”„
            </button>
          </div>

          <div class="lighthouse-scores" id="lighthouse-scores">
            <div class="score-item">
              <div class="metric-label">Performance</div>
              <div class="score-value status-warning" id="perf-score">80</div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 80%"></div>
              </div>
              <div class="trend-indicator trend-up">â†— +5%</div>
            </div>
            <div class="score-item">
              <div class="metric-label">Accessibility</div>
              <div class="score-value status-good" id="a11y-score">95</div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 95%"></div>
              </div>
              <div class="trend-indicator trend-stable">â†’ 0%</div>
            </div>
            <div class="score-item">
              <div class="metric-label">Best Practices</div>
              <div class="score-value status-good" id="bp-score">92</div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 92%"></div>
              </div>
              <div class="trend-indicator trend-stable">â†’ 0%</div>
            </div>
            <div class="score-item">
              <div class="metric-label">SEO</div>
              <div class="score-value status-good" id="seo-score">100</div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 100%"></div>
              </div>
              <div class="trend-indicator trend-stable">â†’ 0%</div>
            </div>
            <div class="score-item">
              <div class="metric-label">PWA</div>
              <div class="score-value status-good" id="pwa-score">100</div>
              <div class="progress-bar">
                <div class="progress-fill" style="width: 100%"></div>
              </div>
              <div class="trend-indicator trend-stable">â†’ 0%</div>
            </div>
          </div>

          <div class="timestamp" id="lighthouse-timestamp">ì¸¡ì • ì‹œê°„: ë°ì´í„° ìˆ˜ì§‘ ì¤‘...</div>
        </div>

        <!-- Core Web Vitals ì¹´ë“œ -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">âš¡ Core Web Vitals</h3>
            <button class="card-refresh" onclick="refreshWebVitals()">
              <span id="vitals-loading"></span>
              ğŸ”„
            </button>
          </div>

          <div class="vitals-grid">
            <div class="vital-item">
              <div class="vital-label">LCP</div>
              <div class="vital-value status-warning" id="lcp-value">2.1s</div>
              <div class="trend-indicator trend-down">â†˜ +0.3s</div>
            </div>
            <div class="vital-item">
              <div class="vital-label">FID</div>
              <div class="vital-value status-good" id="fid-value">85ms</div>
              <div class="trend-indicator trend-stable">â†’ 0ms</div>
            </div>
            <div class="vital-item">
              <div class="vital-label">CLS</div>
              <div class="vital-value status-good" id="cls-value">0.05</div>
              <div class="trend-indicator trend-up">â†— -0.02</div>
            </div>
            <div class="vital-item">
              <div class="vital-label">TTFB</div>
              <div class="vital-value status-good" id="ttfb-value">320ms</div>
              <div class="trend-indicator trend-stable">â†’ 0ms</div>
            </div>
          </div>

          <div class="timestamp">ì‹¤ì‹œê°„ ì‚¬ìš©ì ë°ì´í„° ê¸°ë°˜ (ì§€ë‚œ 24ì‹œê°„)</div>
        </div>

        <!-- ì‹¤ì‚¬ìš©ì ë©”íŠ¸ë¦­ (RUM) ì¹´ë“œ -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ğŸ‘¥ ì‹¤ì‚¬ìš©ì ë©”íŠ¸ë¦­</h3>
            <button class="card-refresh" onclick="refreshRUMMetrics()">
              <span id="rum-loading"></span>
              ğŸ”„
            </button>
          </div>

          <div class="stats-grid">
            <div class="stat-item">
              <div class="metric-label">ì˜¤ëŠ˜ ë°©ë¬¸ì</div>
              <div class="metric-value" id="daily-visitors">1,247</div>
              <div class="trend-indicator trend-up">â†— +15%</div>
            </div>
            <div class="stat-item">
              <div class="metric-label">í˜ì´ì§€ë·°</div>
              <div class="metric-value" id="page-views">3,891</div>
              <div class="trend-indicator trend-up">â†— +22%</div>
            </div>
            <div class="stat-item">
              <div class="metric-label">ì´íƒˆë¥ </div>
              <div class="metric-value" id="bounce-rate">32%</div>
              <div class="trend-indicator trend-down">â†˜ -8%</div>
            </div>
            <div class="stat-item">
              <div class="metric-label">í‰ê·  ì„¸ì…˜</div>
              <div class="metric-value" id="avg-session">4ë¶„ 23ì´ˆ</div>
              <div class="trend-indicator trend-up">â†— +1ë¶„</div>
            </div>
          </div>

          <div class="timestamp" id="rum-timestamp">ìˆ˜ì§‘ ì‹œê°„: 2025-08-02 15:30:00</div>
        </div>

        <!-- PWA ë©”íŠ¸ë¦­ ì¹´ë“œ -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ğŸ“± PWA ë©”íŠ¸ë¦­</h3>
            <button class="card-refresh" onclick="refreshPWAMetrics()">
              <span id="pwa-loading"></span>
              ğŸ”„
            </button>
          </div>

          <div class="stats-grid">
            <div class="stat-item">
              <div class="metric-label">ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸</div>
              <div class="metric-value" id="install-prompts">45</div>
              <div class="trend-indicator trend-up">â†— +12</div>
            </div>
            <div class="stat-item">
              <div class="metric-label">ì‹¤ì œ ì„¤ì¹˜</div>
              <div class="metric-value" id="actual-installs">18</div>
              <div class="trend-indicator trend-up">â†— +5</div>
            </div>
            <div class="stat-item">
              <div class="metric-label">ì„¤ì¹˜ìœ¨</div>
              <div class="metric-value" id="install-rate">40%</div>
              <div class="trend-indicator trend-stable">â†’ 0%</div>
            </div>
            <div class="stat-item">
              <div class="metric-label">ì˜¤í”„ë¼ì¸ ì„¸ì…˜</div>
              <div class="metric-value" id="offline-sessions">127</div>
              <div class="trend-indicator trend-up">â†— +23</div>
            </div>
          </div>

          <div class="timestamp">PWA ë°ì´í„° (ì§€ë‚œ 7ì¼ê°„)</div>
        </div>

        <!-- API ì„±ëŠ¥ ì¹´ë“œ -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ğŸ”§ API ì„±ëŠ¥</h3>
            <button class="card-refresh" onclick="refreshAPIMetrics()">
              <span id="api-loading"></span>
              ğŸ”„
            </button>
          </div>

          <div class="stats-grid">
            <div class="stat-item">
              <div class="metric-label">Fortune API</div>
              <div class="metric-value status-good" id="fortune-response">245ms</div>
              <div class="trend-indicator trend-up">â†— -15ms</div>
            </div>
            <div class="stat-item">
              <div class="metric-label">Manseryeok API</div>
              <div class="metric-value status-good" id="manseryeok-response">89ms</div>
              <div class="trend-indicator trend-stable">â†’ 0ms</div>
            </div>
            <div class="stat-item">
              <div class="metric-label">ì„±ê³µë¥ </div>
              <div class="metric-value status-good" id="api-success-rate">99.8%</div>
              <div class="trend-indicator trend-stable">â†’ 0%</div>
            </div>
            <div class="stat-item">
              <div class="metric-label">ì˜¤ë¥˜ìœ¨</div>
              <div class="metric-value status-good" id="api-error-rate">0.2%</div>
              <div class="trend-indicator trend-down">â†˜ -0.1%</div>
            </div>
          </div>

          <div class="timestamp">API ëª¨ë‹ˆí„°ë§ (ì‹¤ì‹œê°„)</div>
        </div>

        <!-- ì‹œìŠ¤í…œ ìƒíƒœ ì¹´ë“œ -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ğŸ”§ ì‹œìŠ¤í…œ ìƒíƒœ</h3>
            <button class="card-refresh" onclick="refreshSystemStatus()">
              <span id="system-loading"></span>
              ğŸ”„
            </button>
          </div>

          <div class="stats-grid">
            <div class="stat-item">
              <div class="metric-label">ë°°í¬ ìƒíƒœ</div>
              <div class="metric-value status-good" id="deployment-status">ì •ìƒ</div>
            </div>
            <div class="stat-item">
              <div class="metric-label">CDN ìƒíƒœ</div>
              <div class="metric-value status-good" id="cdn-status">ì •ìƒ</div>
            </div>
            <div class="stat-item">
              <div class="metric-label">DB ì—°ê²°</div>
              <div class="metric-value status-good" id="db-status">ì •ìƒ</div>
            </div>
            <div class="stat-item">
              <div class="metric-label">ëª¨ë‹ˆí„°ë§</div>
              <div class="metric-value status-good" id="monitoring-status">í™œì„±</div>
            </div>
          </div>

          <div class="timestamp">ì‹œìŠ¤í…œ ì²´í¬ (1ë¶„ë§ˆë‹¤)</div>
        </div>
      </div>
    </div>

    <div class="controls">
      <button class="control-btn" onclick="refreshAllMetrics()">
        <span class="loading" id="main-loading" style="display: none"></span>
        ğŸ”„ ì „ì²´ ìƒˆë¡œê³ ì¹¨
      </button>
      <button class="control-btn" onclick="exportReport()">ğŸ“Š ë³´ê³ ì„œ ë‚´ë³´ë‚´ê¸°</button>
    </div>

    <script>
      // ì „ì—­ ë³€ìˆ˜
      let updateInterval;
      let startTime = Date.now();

      // ì´ˆê¸° ë¡œë“œ
      document.addEventListener('DOMContentLoaded', function () {
        updateTimestamp();
        updateUptime();
        initializeAutoRefresh();

        // ì‹¤ì‹œê°„ ì‹œê³„ ì—…ë°ì´íŠ¸
        setInterval(updateTimestamp, 1000);
        setInterval(updateUptime, 1000);
      });

      // ì‹œê°„ ì—…ë°ì´íŠ¸
      function updateTimestamp() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('ko-KR', {
          hour: '2-digit',
          minute: '2-digit',
          second: '2-digit',
        });
        document.getElementById('last-update').textContent = timeString;
        document.title = `doha.kr ëª¨ë‹ˆí„°ë§ - ${timeString}`;
      }

      // ì—…íƒ€ì„ ì—…ë°ì´íŠ¸
      function updateUptime() {
        const uptime = Date.now() - startTime;
        const seconds = Math.floor(uptime / 1000) % 60;
        const minutes = Math.floor(uptime / (1000 * 60)) % 60;
        const hours = Math.floor(uptime / (1000 * 60 * 60));

        let uptimeString;
        if (hours > 0) {
          uptimeString = `${hours}ì‹œê°„ ${minutes}ë¶„`;
        } else if (minutes > 0) {
          uptimeString = `${minutes}ë¶„ ${seconds}ì´ˆ`;
        } else {
          uptimeString = `${seconds}ì´ˆ`;
        }

        document.getElementById('uptime').textContent = uptimeString;
      }

      // ìë™ ìƒˆë¡œê³ ì¹¨ ì„¤ì •
      function initializeAutoRefresh() {
        // 30ì´ˆë§ˆë‹¤ ìë™ ìƒˆë¡œê³ ì¹¨
        updateInterval = setInterval(refreshAllMetrics, 30000);
      }

      // ë¡œë”© ìƒíƒœ í‘œì‹œ
      function showLoading(elementId, show = true) {
        const element = document.getElementById(elementId);
        if (element) {
          element.style.display = show ? 'inline-block' : 'none';
        }
      }

      // Lighthouse ì ìˆ˜ ìƒˆë¡œê³ ì¹¨
      async function refreshLighthouseScores() {
        showLoading('lighthouse-loading', true);

        try {
          // ì‹¤ì œ Lighthouse API í˜¸ì¶œ ì‹œë®¬ë ˆì´ì…˜
          await new Promise((resolve) => setTimeout(resolve, 2000));

          // ì ìˆ˜ ì—…ë°ì´íŠ¸ (ì‹¤ì œë¡œëŠ” APIì—ì„œ ë°›ì•„ì˜´)
          const scores = {
            performance: 80 + Math.floor(Math.random() * 15),
            accessibility: 95 + Math.floor(Math.random() * 5),
            bestPractices: 92 + Math.floor(Math.random() * 8),
            seo: 100,
            pwa: 100,
          };

          updateLighthouseScores(scores);

          const timestamp = new Date().toLocaleString('ko-KR');
          document.getElementById('lighthouse-timestamp').textContent = `ì¸¡ì • ì‹œê°„: ${timestamp}`;
        } catch (error) {
          console.error('Lighthouse ì ìˆ˜ ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:', error);
        } finally {
          showLoading('lighthouse-loading', false);
        }
      }

      // Lighthouse ì ìˆ˜ ì—…ë°ì´íŠ¸
      function updateLighthouseScores(scores) {
        const scoreElements = {
          'perf-score': scores.performance,
          'a11y-score': scores.accessibility,
          'bp-score': scores.bestPractices,
          'seo-score': scores.seo,
          'pwa-score': scores.pwa,
        };

        Object.entries(scoreElements).forEach(([elementId, score]) => {
          const element = document.getElementById(elementId);
          if (element) {
            element.textContent = score;

            // ìƒíƒœ í´ë˜ìŠ¤ ì—…ë°ì´íŠ¸
            element.className = element.className.replace(/status-\w+/g, '');
            if (score >= 90) {
              element.classList.add('status-good');
            } else if (score >= 70) {
              element.classList.add('status-warning');
            } else {
              element.classList.add('status-critical');
            }
          }

          // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì—…ë°ì´íŠ¸
          const progressBar = element.parentElement.querySelector('.progress-fill');
          if (progressBar) {
            progressBar.style.width = `${score}%`;
          }
        });
      }

      // Web Vitals ìƒˆë¡œê³ ì¹¨
      async function refreshWebVitals() {
        showLoading('vitals-loading', true);

        try {
          await new Promise((resolve) => setTimeout(resolve, 1500));

          // Web Vitals ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜
          const vitals = {
            lcp: (1.5 + Math.random() * 2).toFixed(1) + 's',
            fid: Math.floor(50 + Math.random() * 100) + 'ms',
            cls: (0.02 + Math.random() * 0.1).toFixed(3),
            ttfb: Math.floor(200 + Math.random() * 300) + 'ms',
          };

          document.getElementById('lcp-value').textContent = vitals.lcp;
          document.getElementById('fid-value').textContent = vitals.fid;
          document.getElementById('cls-value').textContent = vitals.cls;
          document.getElementById('ttfb-value').textContent = vitals.ttfb;
        } catch (error) {
          console.error('Web Vitals ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:', error);
        } finally {
          showLoading('vitals-loading', false);
        }
      }

      // RUM ë©”íŠ¸ë¦­ ìƒˆë¡œê³ ì¹¨
      async function refreshRUMMetrics() {
        showLoading('rum-loading', true);

        try {
          await new Promise((resolve) => setTimeout(resolve, 1000));

          // RUM ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜
          const rum = {
            dailyVisitors: 1200 + Math.floor(Math.random() * 500),
            pageViews: 3500 + Math.floor(Math.random() * 1000),
            bounceRate: (25 + Math.random() * 20).toFixed(0) + '%',
            avgSession: Math.floor(3 + Math.random() * 4) + 'ë¶„ ' + Math.floor(Math.random() * 60) + 'ì´ˆ',
          };

          document.getElementById('daily-visitors').textContent = rum.dailyVisitors.toLocaleString();
          document.getElementById('page-views').textContent = rum.pageViews.toLocaleString();
          document.getElementById('bounce-rate').textContent = rum.bounceRate;
          document.getElementById('avg-session').textContent = rum.avgSession;

          const timestamp = new Date().toLocaleString('ko-KR');
          document.getElementById('rum-timestamp').textContent = `ìˆ˜ì§‘ ì‹œê°„: ${timestamp}`;
        } catch (error) {
          console.error('RUM ë©”íŠ¸ë¦­ ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:', error);
        } finally {
          showLoading('rum-loading', false);
        }
      }

      // PWA ë©”íŠ¸ë¦­ ìƒˆë¡œê³ ì¹¨
      async function refreshPWAMetrics() {
        showLoading('pwa-loading', true);

        try {
          await new Promise((resolve) => setTimeout(resolve, 1200));

          // PWA ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜
          const pwa = {
            installPrompts: 40 + Math.floor(Math.random() * 20),
            actualInstalls: 15 + Math.floor(Math.random() * 10),
            installRate: (30 + Math.random() * 20).toFixed(0) + '%',
            offlineSessions: 100 + Math.floor(Math.random() * 50),
          };

          document.getElementById('install-prompts').textContent = pwa.installPrompts;
          document.getElementById('actual-installs').textContent = pwa.actualInstalls;
          document.getElementById('install-rate').textContent = pwa.installRate;
          document.getElementById('offline-sessions').textContent = pwa.offlineSessions;
        } catch (error) {
          console.error('PWA ë©”íŠ¸ë¦­ ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:', error);
        } finally {
          showLoading('pwa-loading', false);
        }
      }

      // API ë©”íŠ¸ë¦­ ìƒˆë¡œê³ ì¹¨
      async function refreshAPIMetrics() {
        showLoading('api-loading', true);

        try {
          await new Promise((resolve) => setTimeout(resolve, 800));

          // API ì„±ëŠ¥ ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜
          const api = {
            fortuneResponse: Math.floor(200 + Math.random() * 100) + 'ms',
            manseryeokResponse: Math.floor(50 + Math.random() * 100) + 'ms',
            successRate: (99.5 + Math.random() * 0.5).toFixed(1) + '%',
            errorRate: (0.1 + Math.random() * 0.4).toFixed(1) + '%',
          };

          document.getElementById('fortune-response').textContent = api.fortuneResponse;
          document.getElementById('manseryeok-response').textContent = api.manseryeokResponse;
          document.getElementById('api-success-rate').textContent = api.successRate;
          document.getElementById('api-error-rate').textContent = api.errorRate;
        } catch (error) {
          console.error('API ë©”íŠ¸ë¦­ ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:', error);
        } finally {
          showLoading('api-loading', false);
        }
      }

      // ì‹œìŠ¤í…œ ìƒíƒœ ìƒˆë¡œê³ ì¹¨
      async function refreshSystemStatus() {
        showLoading('system-loading', true);

        try {
          await new Promise((resolve) => setTimeout(resolve, 500));

          // ì‹œìŠ¤í…œ ìƒíƒœëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì •ìƒ
          const status = ['ì •ìƒ', 'ì •ìƒ', 'ì •ìƒ', 'í™œì„±'];
          const statusIds = ['deployment-status', 'cdn-status', 'db-status', 'monitoring-status'];

          statusIds.forEach((id, index) => {
            document.getElementById(id).textContent = status[index];
          });

          document.getElementById('system-status').textContent = 'ì •ìƒ ìš´ì˜';
        } catch (error) {
          console.error('ì‹œìŠ¤í…œ ìƒíƒœ ìƒˆë¡œê³ ì¹¨ ì‹¤íŒ¨:', error);
        } finally {
          showLoading('system-loading', false);
        }
      }

      // ì „ì²´ ë©”íŠ¸ë¦­ ìƒˆë¡œê³ ì¹¨
      async function refreshAllMetrics() {
        showLoading('main-loading', true);

        try {
          await Promise.all([
            refreshLighthouseScores(),
            refreshWebVitals(),
            refreshRUMMetrics(),
            refreshPWAMetrics(),
            refreshAPIMetrics(),
            refreshSystemStatus(),
          ]);

          console.log('âœ… ëª¨ë“  ë©”íŠ¸ë¦­ ìƒˆë¡œê³ ì¹¨ ì™„ë£Œ');
        } catch (error) {
          console.error('âŒ ë©”íŠ¸ë¦­ ìƒˆë¡œê³ ì¹¨ ì¤‘ ì˜¤ë¥˜:', error);
        } finally {
          showLoading('main-loading', false);
        }
      }

      // ë³´ê³ ì„œ ë‚´ë³´ë‚´ê¸°
      function exportReport() {
        const reportData = {
          timestamp: new Date().toISOString(),
          lighthouse: {
            performance: document.getElementById('perf-score').textContent,
            accessibility: document.getElementById('a11y-score').textContent,
            bestPractices: document.getElementById('bp-score').textContent,
            seo: document.getElementById('seo-score').textContent,
            pwa: document.getElementById('pwa-score').textContent,
          },
          webVitals: {
            lcp: document.getElementById('lcp-value').textContent,
            fid: document.getElementById('fid-value').textContent,
            cls: document.getElementById('cls-value').textContent,
            ttfb: document.getElementById('ttfb-value').textContent,
          },
          rum: {
            dailyVisitors: document.getElementById('daily-visitors').textContent,
            pageViews: document.getElementById('page-views').textContent,
            bounceRate: document.getElementById('bounce-rate').textContent,
            avgSession: document.getElementById('avg-session').textContent,
          },
          pwa: {
            installPrompts: document.getElementById('install-prompts').textContent,
            actualInstalls: document.getElementById('actual-installs').textContent,
            installRate: document.getElementById('install-rate').textContent,
            offlineSessions: document.getElementById('offline-sessions').textContent,
          },
          api: {
            fortuneResponse: document.getElementById('fortune-response').textContent,
            manseryeokResponse: document.getElementById('manseryeok-response').textContent,
            successRate: document.getElementById('api-success-rate').textContent,
            errorRate: document.getElementById('api-error-rate').textContent,
          },
        };

        const jsonString = JSON.stringify(reportData, null, 2);
        const blob = new Blob([jsonString], { type: 'application/json' });
        const url = URL.createObjectURL(blob);

        const a = document.createElement('a');
        a.href = url;
        a.download = `doha-kr-monitoring-report-${new Date().toISOString().split('T')[0]}.json`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

        console.log('ğŸ“Š ëª¨ë‹ˆí„°ë§ ë³´ê³ ì„œ ë‚´ë³´ë‚´ê¸° ì™„ë£Œ');
      }

      // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
      document.addEventListener('keydown', function (e) {
        if (e.ctrlKey || e.metaKey) {
          switch (e.key) {
            case 'r':
              e.preventDefault();
              refreshAllMetrics();
              break;
            case 's':
              e.preventDefault();
              exportReport();
              break;
          }
        }
      });

      // í˜ì´ì§€ ê°€ì‹œì„± APIë¡œ íƒ­ í™œì„±í™” ì‹œ ìë™ ìƒˆë¡œê³ ì¹¨
      document.addEventListener('visibilitychange', function () {
        if (!document.hidden) {
          refreshAllMetrics();
        }
      });

      // ì—ëŸ¬ ì²˜ë¦¬
      window.addEventListener('error', function (e) {
        console.error('ëŒ€ì‹œë³´ë“œ ì˜¤ë¥˜:', e.error);
      });

      // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
      setTimeout(refreshAllMetrics, 1000);
    </script>
  </body>
</html>
