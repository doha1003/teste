/* Mobile JavaScript Touch Event Compatibility Fix */

/* Touch Target Optimization */
.mbti-option-btn,
.fortune-card,
.service-card,
.highlight-card,
.pillar-item,
.element-item,
.btn,
button,
.tab-button,
.mobile-menu-btn,
.nav-link,
input[type="radio"],
input[type="checkbox"],
select,
.share-button,
.form-control {
    min-height: 44px !important;
    min-width: 44px !important;
    touch-action: manipulation !important;
    -webkit-tap-highlight-color: transparent !important;
}

/* Prevent Double-Tap Zoom */
.mbti-option-btn,
.btn,
button,
.tab-button,
.mobile-menu-btn {
    touch-action: manipulation !important;
    user-select: none !important;
    -webkit-user-select: none !important;
    -webkit-touch-callout: none !important;
}

/* Mobile Click Feedback */
.mbti-option-btn:active,
.btn:active,
button:active,
.tab-button:active,
.mobile-menu-btn:active,
.nav-link:active {
    opacity: 0.7 !important;
    transform: scale(0.98) !important;
    transition: all 0.1s ease !important;
}

/* Mobile Form Input Optimization */
@media screen and (max-width: 768px) {
    /* Input Fields Touch Optimization */
    input[type="text"],
    input[type="number"],
    input[type="email"],
    textarea,
    select {
        padding: 16px !important;
        font-size: 16px !important;
        border-radius: 8px !important;
        touch-action: manipulation !important;
        -webkit-appearance: none !important;
    }
    
    /* Button Touch Areas */
    .mbti-option-btn {
        padding: 16px 20px !important;
        margin: 8px 0 !important;
        min-height: 56px !important;
        border-radius: 12px !important;
    }
    
    /* Navigation Touch Areas */
    .nav-link {
        padding: 16px 20px !important;
        display: block !important;
        min-height: 48px !important;
    }
    
    /* Mobile Menu Button */
    .mobile-menu-btn {
        width: 48px !important;
        height: 48px !important;
        padding: 12px !important;
    }
    
    /* Card Touch Areas */
    .service-card,
    .fortune-card {
        padding: 24px !important;
        margin: 16px 0 !important;
        border-radius: 16px !important;
    }
}

/* Prevent iOS Safari Bounce */
body {
    overscroll-behavior: none !important;
    -webkit-overflow-scrolling: touch !important;
}

/* Fix iOS Input Zoom */
@media screen and (max-width: 768px) {
    input:focus,
    textarea:focus,
    select:focus {
        font-size: 16px !important;
        transform: none !important;
    }
}

/* Mobile Swipe Prevention on Buttons */
.mbti-option-btn,
.btn,
button {
    -webkit-user-drag: none !important;
    -webkit-touch-callout: none !important;
    -webkit-user-select: none !important;
    user-select: none !important;
}

/* Loading Spinner Mobile Fix */
.fortune-loading-spinner,
.mbti-ai-analyzing {
    touch-action: none !important;
    user-select: none !important;
    -webkit-user-select: none !important;
}

/* Popup/Modal Mobile Fix */
.notification {
    z-index: 9999 !important;
    max-width: calc(100vw - 40px) !important;
    word-wrap: break-word !important;
}

/* Mobile Test Answer Fix */
@media screen and (max-width: 768px) {
    .mbti-options-grid {
        gap: 12px !important;
    }
    
    .mbti-option-btn {
        font-size: 14px !important;
        line-height: 1.4 !important;
        white-space: normal !important;
        word-wrap: break-word !important;
    }
}

/* Mobile Scroll Fix */
.mbti-test-container,
.fortune-section,
.tools-section {
    -webkit-overflow-scrolling: touch !important;
}

/* Viewport Meta Fix for Dynamic Resizing */
@media screen and (max-width: 768px) {
    html {
        -webkit-text-size-adjust: 100% !important;
        -ms-text-size-adjust: 100% !important;
    }
}

/* Touch Event Performance */
* {
    -webkit-transform: translateZ(0) !important;
    transform: translateZ(0) !important;
    -webkit-backface-visibility: hidden !important;
    backface-visibility: hidden !important;
}

/* Mobile Form Validation Fix */
@media screen and (max-width: 768px) {
    input.error,
    textarea.error,
    select.error {
        border: 2px solid #ef4444 !important;
        box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
    }
    
    input:valid,
    textarea:valid,
    select:valid {
        border-color: #10b981 !important;
    }
}

/* Fix Mobile Safari Bottom Bar Issues */
@media screen and (max-width: 768px) {
    .footer,
    .mbti-result-container {
        padding-bottom: env(safe-area-inset-bottom, 20px) !important;
    }
    
    .mobile-menu {
        bottom: env(safe-area-inset-bottom, 0) !important;
    }
}

/* Prevent Text Selection on Interactive Elements */
.mbti-question-container,
.progress-container,
.test-navigation {
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
    user-select: none !important;
}

/* Fix Mobile Click Delays */
a, button, input, select, textarea, [onclick] {
    -webkit-tap-highlight-color: transparent !important;
    -webkit-user-select: none !important;
    -webkit-touch-callout: none !important;
}

/* Mobile Performance Optimization */
.fade-in,
.animated {
    will-change: opacity, transform !important;
    -webkit-transform: translateZ(0) !important;
    transform: translateZ(0) !important;
}