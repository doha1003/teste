<!DOCTYPE html>

<html lang="ko">
<head>
<meta content="upgrade-insecure-requests; default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com;" http-equiv="Content-Security-Policy"/>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>?§Îäò???¥ÏÑ∏ - ?¨Ï£º Í∏∞Î∞ò ?ïÌôï???ºÏùº?¥ÏÑ∏ | doha.kr</title>
<meta content="?ïÌôï??ÎßåÏÑ∏???¨Ï£º?îÏûêÎ•?Í∏∞Î∞ò?ºÎ°ú Î∂ÑÏÑù?òÎäî ?§Îäò???¥ÏÑ∏. ?ùÎÖÑ?îÏùº?úÎ? ?ÖÎ†•?òÏó¨ ?ÅÏÑ∏???ºÏùº ?¥ÏÑ∏Î•??ïÏù∏?òÏÑ∏??" name="description"/>
<meta content="index, follow" name="robots"/>
<meta content="doha.kr" name="author"/>
<!-- Security Headers -->
<meta content="nosniff" http-equiv="X-Content-Type-Options"/>
<meta content="strict-origin-when-cross-origin" http-equiv="Referrer-Policy"/>
<meta content="camera=(), microphone=(), geolocation=(), payment=(), usb=(), magnetometer=(), accelerometer=(), gyroscope=()" http-equiv="Permissions-Policy"/>
<!-- Open Graph -->
<meta content="?§Îäò???¥ÏÑ∏ - ?¨Ï£º Í∏∞Î∞ò ?ºÏùº?¥ÏÑ∏ | doha.kr" property="og:title"/>
<meta content="ÎßåÏÑ∏??Í∏∞Î∞ò ?ïÌôï???¨Ï£º?îÏûêÎ°?Î≥¥Îäî ?§Îäò???¥ÏÑ∏" property="og:description"/>
<meta content="https://doha.kr/images/egen-male-card.jpg" property="og:image"/>
<meta content="https://doha.kr/fortune/daily/" property="og:url"/>
<!-- Critical CSS -->
<style>
/* Critical CSS for above-the-fold content */
:root {
    --primary-color: #2563eb;
    --primary-hover: #1d4ed8;
    --text-primary: #000000;
    --text-secondary: #1f2937;
    --gray-50: #f9fafb;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-900: #111827;
    --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
    --font-sans: 'Inter', 'Noto Sans KR', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: var(--font-sans);
    color: var(--text-primary);
    line-height: 1.5;
    background-color: var(--gray-50);
}

/* Navigation placeholder */
#navbar-placeholder {
    min-height: 64px;
    background: white;
    border-bottom: 1px solid var(--gray-200);
}

/* Page Header */
.page-header {
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    color: white;
    padding: 80px 20px;
    text-align: center;
}

.page-header .container {
    max-width: 1200px;
    margin: 0 auto;
}

.page-title {
    font-size: 48px;
    font-weight: 700;
    margin-bottom: 16px;
}

.page-subtitle {
    font-size: 20px;
    opacity: 0.9;
}

/* Fortune Section */
.fortune-section {
    padding: 60px 20px;
}

.fortune-section .container {
    max-width: 800px;
    margin: 0 auto;
}

.fortune-form-container {
    background: white;
    border-radius: 16px;
    padding: 40px;
    box-shadow: var(--shadow-md);
}

.fortune-form-container h2 {
    font-size: 28px;
    font-weight: 600;
    margin-bottom: 32px;
    text-align: center;
}

/* Form Styles */
.form-group {
    margin-bottom: 24px;
}

.form-group label {
    display: block;
    font-weight: 500;
    margin-bottom: 8px;
}

.form-control {
    width: 100%;
    padding: 12px 16px;
    border: 1px solid var(--gray-200);
    border-radius: 8px;
    font-size: 16px;
    transition: border-color 0.2s;
}

.form-control:focus {
    outline: none;
    border-color: var(--primary-color);
}

.form-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 16px;
}

/* Animations */
.fade-in {
    animation: fadeIn 0.6s ease-out;
}

.stagger-1 {
    animation-delay: 0.1s;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive */
@media (max-width: 768px) {
    .page-header {
        padding: 60px 20px;
    }
    
    .page-title {
        font-size: 36px;
    }
    
    .page-subtitle {
        font-size: 18px;
    }
    
    .fortune-form-container {
        padding: 24px;
    }
    
    .form-row {
        grid-template-columns: 1fr;
    }
}
</style>
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="True" href="https://fonts.gstatic.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
<!-- Google AdSense -->
<!-- Moved to end of body -->
<!-- Kakao JavaScript SDK -->
<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.4/kakao.min.js"></script>
<!-- ÎßåÏÑ∏???∞Ïù¥??Î®ºÏ? Î°úÎìú -->
<script src="/js/manseryeok-database.js"></script>
<script src="/js/lunar-calendar-compact.js?v=1753283465"></script>
<script src="/js/saju-calculator.js"></script>
<!-- Optimized CSS System -->
<link href="/css/styles.css?v=1753283465" rel="stylesheet"/>
<link href="/css/mobile-fixes.css" rel="stylesheet">
<link href="/css/button-system.css" rel="stylesheet">
<link href="/css/pages/fortune-common.css" rel="stylesheet"/>
<link href="/css/layout-fixes.css" rel="stylesheet"/>

<script id="performance-monitor">

    window.addEventListener('load', function() {
        if (window.performance && window.performance.timing) {
            const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
            if (loadTime > 5000) {
                console.warn('Page loading is slow:', loadTime + 'ms');
            }
        }
    });
    </script>
</head>
<body class="fortune-page">
<!-- ?§ÎπÑÍ≤åÏù¥??Î∞?-->
<div id="navbar-placeholder"></div>
<!-- ?òÏù¥ÏßÄ ?§Îçî -->
<section class="page-header">
<div class="container">
<h1 class="page-title fade-in">???§Îäò???¥ÏÑ∏</h1>
<p class="page-subtitle fade-in stagger-1">
                ?¨Ï£º?îÏûê Í∏∞Î∞ò ?ïÌôï???ºÏùº ?¥ÏÑ∏ Î∂ÑÏÑù
            </p>
</div>
</section>
<!-- ?¥ÏÑ∏ ?ÖÎ†• ??-->
<section class="fortune-section">
<div class="container">
<div class="fortune-form-container" id="fortuneForm">
<h2>?πÏã†???ïÎ≥¥Î•??ÖÎ†•?¥Ï£º?∏Ïöî</h2>
<form onsubmit="generateDailyFortune(event)">
<div class="form-group">
<label for="userName">?¥Î¶Ñ</label>
<input class="form-control" id="userName" name="userName" placeholder="?çÍ∏∏?? required="" type="text"/>
</div>
<div class="form-row">
<div class="form-group">
<label for="birthYear">?ùÎÖÑ</label>
<select class="form-control" id="birthYear" name="birthYear" required="">
<option value="">?∞ÎèÑ ?†ÌÉù</option>
</select>
</div>
<div class="form-group">
<label for="birthMonth">?ùÏõî</label>
<select class="form-control" id="birthMonth" name="birthMonth" required="">
<option value="">???†ÌÉù</option>
<option value="1">1??/option>
<option value="2">2??/option>
<option value="3">3??/option>
<option value="4">4??/option>
<option value="5">5??/option>
<option value="6">6??/option>
<option value="7">7??/option>
<option value="8">8??/option>
<option value="9">9??/option>
<option value="10">10??/option>
<option value="11">11??/option>
<option value="12">12??/option>
</select>
</div>
<div class="form-group">
<label for="birthDay">?ùÏùº</label>
<select class="form-control" id="birthDay" name="birthDay" required="">
<option value="">???†ÌÉù</option>
</select>
</div>
</div>
<div class="form-group">
<label for="birthTime">Ï∂úÏÉù?úÍ∞Ñ</label>
<select class="form-control" id="birthTime" name="birthTime">
<option value="-1">Î™®Î¶Ñ</option>
<option value="0">?êÏãú (23:00-01:00)</option>
<option value="2">Ï∂ïÏãú (01:00-03:00)</option>
<option value="4">?∏Ïãú (03:00-05:00)</option>
<option value="6">Î¨òÏãú (05:00-07:00)</option>
<option value="8">ÏßÑÏãú (07:00-09:00)</option>
<option value="10">?¨Ïãú (09:00-11:00)</option>
<option value="12">?§Ïãú (11:00-13:00)</option>
<option value="14">ÎØ∏Ïãú (13:00-15:00)</option>
<option value="16">?†Ïãú (15:00-17:00)</option>
<option value="18">?†Ïãú (17:00-19:00)</option>
<option value="20">?†Ïãú (19:00-21:00)</option>
<option value="22">?¥Ïãú (21:00-23:00)</option>
</select>
</div>
<div class="form-check">
<input id="isLunar" name="isLunar" type="checkbox"/>
<label for="isLunar">?åÎ†• ?ùÏùº?ÖÎãà??/label>
</div>
<button class="btn-submit" type="submit">?§Îäò???¥ÏÑ∏ Î≥¥Í∏∞</button>
</form>
</div>
<!-- ?¥ÏÑ∏ Í≤∞Í≥º -->
<div id="fortuneResult" class="hidden">
<!-- Í≤∞Í≥ºÍ∞Ä ?¨Í∏∞???úÏãú?©Îãà??-->
</div>
</div>
</section>
<!-- Í¥ëÍ≥† ?ÅÏó≠ -->
<div class="ad-container">
<div class="ad-label">Í¥ëÍ≥†</div>
<div id="ad-container-bcswbbp8s" class="min-height-100">
<div class="ad-placeholder">
        Í¥ëÍ≥† Î°úÎî© Ï§?..
    </div>
</div>
<script>

if ('IntersectionObserver' in window) {
    const adObserver = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                const container = entry.target;
                container.innerHTML = `<ins class="adsbygoogle"
             data-ad-client="ca-pub-7905640648499222"
             data-ad-slot="2789891628"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>`;
                if (typeof adsbygoogle !== 'undefined') {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                }
                adObserver.unobserve(container);
            }
        });
    }, { rootMargin: '50px' });
    
    const adContainer = document.getElementById('ad-container-bcswbbp8s');
    if (adContainer) {
        adObserver.observe(adContainer);
    }
}
</script>
</div>
<!-- ?∏ÌÑ∞ -->
<div id="footer-placeholder"></div>
<!-- External JavaScript -->
<script src="/js/main.js?v=1753283465"></script>
<script src="/js/api-config.js?v=1753283465"></script>
<script>

        document.addEventListener('DOMContentLoaded', function() {

            const yearSelect = document.getElementById('birthYear');
            const currentYear = new Date().getFullYear();
            for (let year = currentYear; year >= 1900; year--) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year + '??;
                yearSelect.appendChild(option);
            }

            document.getElementById('birthMonth').addEventListener('change', updateDayOptions);
            document.getElementById('birthYear').addEventListener('change', updateDayOptions);
        });

        function updateDayOptions() {
            const year = parseInt(document.getElementById('birthYear').value);
            const month = parseInt(document.getElementById('birthMonth').value);
            const daySelect = document.getElementById('birthDay');
            
            daySelect.innerHTML = '<option value="">???†ÌÉù</option>';
            
            if (year && month) {
                const daysInMonth = new Date(year, month, 0).getDate();
                for (let day = 1; day <= daysInMonth; day++) {
                    const option = document.createElement('option');
                    option.value = day;
                    option.textContent = day + '??;
                    daySelect.appendChild(option);
                }
            }
        }

        function generateDailyFortune(event) {
            event.preventDefault();
            
            const userName = document.getElementById('userName').value;
            const birthYear = parseInt(document.getElementById('birthYear').value);
            const birthMonth = parseInt(document.getElementById('birthMonth').value);
            const birthDay = parseInt(document.getElementById('birthDay').value);
            const birthTime = parseInt(document.getElementById('birthTime').value);
            const isLunar = document.getElementById('isLunar').checked;

            const resultDiv = document.getElementById('fortuneResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <div class="daily-ai-analyzing">
                    <div class="fortune-loading-spinner"></div>
                    <div class="fortune-loading-text">?îÆ ÎßåÏÑ∏?•ÏúºÎ°?${userName}?òÏùò ?¨Ï£ºÎ•?Î∂ÑÏÑù?òÍ≥† ?àÏäµ?àÎã§<span class="fortune-loading-dots"></span></div>
                </div>
            `;

            document.getElementById('fortuneForm').style.display = 'none';

            setTimeout(() => {
                displayDailyFortune(userName, birthYear, birthMonth, birthDay, birthTime, isLunar);
            }, 2000);
        }

        function displayDailyFortune(userName, birthYear, birthMonth, birthDay, birthTime, isLunar) {

            if (typeof SajuCalculator === 'undefined') {
                console.error('SajuCalculatorÍ∞Ä Î°úÎìú?òÏ? ?äÏïò?µÎãà??');
                alert('?òÏù¥ÏßÄ Î°úÎî© Ï§??§Î•òÍ∞Ä Î∞úÏÉù?àÏäµ?àÎã§. ?àÎ°úÍ≥†Ïπ® ???§Ïãú ?úÎèÑ?¥Ï£º?∏Ïöî.');
                location.reload();
                return;
            }

            const saju = window.sajuCalculator.calculateSaju(birthYear, birthMonth, birthDay, birthTime >= 0 ? birthTime : 12, isLunar);

            const today = new Date();

            const todayPillar = getTodayPillarFromManseryeok();

            const relation = analyzeRelation(saju.dayPillar, todayPillar);
            const fortune = generateDetailedFortune(saju, todayPillar, relation);
            
            const resultDiv = document.getElementById('fortuneResult');
            resultDiv.innerHTML = `
                <div class="fortune-result-container">
                    <h2 class="text-center mb-30">
                        ${userName}?òÏùò ${today.getFullYear()}??${today.getMonth() + 1}??${today.getDate()}???¥ÏÑ∏
                    </h2>
                    
                    <div class="saju-brief">
                        <h3>?ìÖ ?¨Ï£º?îÏûê (?õÊü±?´Â≠ó)</h3>
                        <div class="pillars-row">
                            <div class="pillar-item">
                                <div class="pillar-label">?∞Ï£º (Âπ¥Êü±)</div>
                                <div class="pillar-chars">
                                    <span class="stem">${saju.yearPillar.stem}</span>
                                    <span class="branch">${saju.yearPillar.branch}</span>
                                </div>
                                <div class="pillar-ten-god">${saju.tenGods.year}</div>
                            </div>
                            
                            <div class="pillar-item">
                                <div class="pillar-label">?îÏ£º (?àÊü±)</div>
                                <div class="pillar-chars">
                                    <span class="stem">${saju.monthPillar.stem}</span>
                                    <span class="branch">${saju.monthPillar.branch}</span>
                                </div>
                                <div class="pillar-ten-god">${saju.tenGods.month}</div>
                            </div>
                            
                            <div class="pillar-item highlight">
                                <div class="pillar-label">?ºÏ£º (?•Êü±) ‚≠?/div>
                                <div class="pillar-chars">
                                    <span class="stem">${saju.dayPillar.stem}</span>
                                    <span class="branch">${saju.dayPillar.branch}</span>
                                </div>
                                <div class="pillar-ten-god">?ºÏ£º(Î≥∏Ïù∏)</div>
                            </div>
                            
                            <div class="pillar-item ${birthTime < 0 ? 'unknown' : ''}">
                                <div class="pillar-label">?úÏ£º (?ÇÊü±)</div>
                                <div class="pillar-chars">
                                    <span class="stem">${birthTime >= 0 ? saju.hourPillar.stem : '?'}</span>
                                    <span class="branch">${birthTime >= 0 ? saju.hourPillar.branch : '?'}</span>
                                </div>
                                <div class="pillar-ten-god">${birthTime >= 0 ? saju.tenGods.hour : 'ÎØ∏ÏÉÅ'}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="today-pillar">
                        <h3>?åÖ ?§Îäò???ºÏßÑ</h3>
                        <div class="today-info">
                            <span class="today-stem">${todayPillar.stem}</span>
                            <span class="today-branch">${todayPillar.branch}</span>
                            <span class="today-day">??(${todayPillar.stem}${todayPillar.branch}??</span>
                        </div>
                    </div>
                    
                    <div class="fortune-scores">
                        <div class="score-card">
                            <div class="score-icon">?í´</div>
                            <div class="score-label">Ï¥ùÏö¥</div>
                            <div class="score-value">${fortune.overallScore}</div>
                            <div class="score-bar">
                                <div class="score-fill"></div>
                            </div>
                        </div>
                        
                        <div class="score-card">
                            <div class="score-icon">?§Ô∏è</div>
                            <div class="score-label">?†Ï†ï??/div>
                            <div class="score-value">${fortune.loveScore}</div>
                            <div class="score-bar">
                                <div class="score-fill"></div>
                            </div>
                        </div>
                        
                        <div class="score-card">
                            <div class="score-icon">?í∞</div>
                            <div class="score-label">Í∏àÏ†Ñ??/div>
                            <div class="score-value">${fortune.moneyScore}</div>
                            <div class="score-bar">
                                <div class="score-fill"></div>
                            </div>
                        </div>
                        
                        <div class="score-card">
                            <div class="score-icon">?èÉ</div>
                            <div class="score-label">Í±¥Í∞ï??/div>
                            <div class="score-value">${fortune.healthScore}</div>
                            <div class="score-bar">
                                <div class="score-fill"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="fortune-details">
                        <div class="fortune-category">
                            <h4>?í´ Ï¥ùÏö¥</h4>
                            <p>${fortune.overallFortune}</p>
                        </div>
                        
                        <div class="fortune-category">
                            <h4>?§Ô∏è ?†Ï†ï??/h4>
                            <p>${fortune.loveFortune}</p>
                            <div class="fortune-advice">
                                <strong>?í° Ï°∞Ïñ∏:</strong> ${fortune.loveAdvice}
                            </div>
                        </div>
                        
                        <div class="fortune-category">
                            <h4>?í∞ Í∏àÏ†Ñ??/h4>
                            <p>${fortune.moneyFortune}</p>
                            <div class="fortune-advice">
                                <strong>?í° Ï°∞Ïñ∏:</strong> ${fortune.moneyAdvice}
                            </div>
                        </div>
                        
                        <div class="fortune-category">
                            <h4>?íº ÏßÅÏóÖ??/h4>
                            <p>${fortune.careerFortune}</p>
                            <div class="fortune-advice">
                                <strong>?í° Ï°∞Ïñ∏:</strong> ${fortune.careerAdvice}
                            </div>
                        </div>
                        
                        <div class="fortune-category">
                            <h4>?èÉ Í±¥Í∞ï??/h4>
                            <p>${fortune.healthFortune}</p>
                            <div class="fortune-advice">
                                <strong>?í° Ï°∞Ïñ∏:</strong> ${fortune.healthAdvice}
                            </div>
                        </div>
                    </div>
                    
                    <div class="lucky-elements">
                        <h3>?åü ?§Îäò???âÏö¥ ?îÏÜå</h3>
                        <div class="lucky-items">
                            <div class="lucky-box">
                                <div class="lucky-icon">??/div>
                                <div class="lucky-label">?âÏö¥???úÍ∞Ñ</div>
                                <div class="lucky-value">${fortune.luckyTime}</div>
                            </div>
                            <div class="lucky-box">
                                <div class="lucky-icon">?ß≠</div>
                                <div class="lucky-label">?âÏö¥??Î∞©Ìñ•</div>
                                <div class="lucky-value">${fortune.luckyDirection}</div>
                            </div>
                            <div class="lucky-box">
                                <div class="lucky-icon">?é®</div>
                                <div class="lucky-label">?âÏö¥???âÏÉÅ</div>
                                <div class="lucky-value">${fortune.luckyColor}</div>
                            </div>
                            <div class="lucky-box">
                                <div class="lucky-icon">?î¢</div>
                                <div class="lucky-label">?âÏö¥???´Ïûê</div>
                                <div class="lucky-value">${fortune.luckyNumber}</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="daily-advice-section">
                        <h3>?ìù ?§Îäò??Ï°∞Ïñ∏</h3>
                        <div class="advice-content">
                            <p class="main-advice">${fortune.advice}</p>
                            <div class="advice-details">
                                <div class="advice-item">
                                    <strong>???§Îäò ?òÎ©¥ Ï¢ãÏ? ??/strong>
                                    ${fortune.doAdvice}
                                </div>
                                <div class="advice-item">
                                    <strong>???§Îäò ?ºÌï¥??????/strong>
                                    ${fortune.dontAdvice}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button onclick="location.reload()" class="btn btn-primary">?§Ïãú Î≥¥Í∏∞</button>
                        <button onclick="shareFortune()" class="btn btn-secondary">Í≥µÏú†?òÍ∏∞</button>
                    </div>
                </div>
            `;
            
            // CSS Î≥Ä???§Ï†ï
            const scoreCards = resultDiv.querySelectorAll('.score-card');
            const scores = [fortune.overallScore, fortune.loveScore, fortune.moneyScore, fortune.healthScore];
            
            scoreCards.forEach((card, index) => {
                const score = scores[index];
                card.style.setProperty('--score', score);
                card.style.setProperty('--score-color', getScoreColor(score));
            });
            
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function analyzeRelation(dayPillar, todayPillar) {
            const relations = {
                stemRelation: analyzeStemRelation(dayPillar.stem, todayPillar.stem),
                branchRelation: analyzeBranchRelation(dayPillar.branch, todayPillar.branch),
                specialRelation: findSpecialRelation(dayPillar.branch, todayPillar.branch)
            };
            
            return relations;
        }

        function analyzeStemRelation(stem1, stem2) {
            const stemElements = {
                'Í∞?: 'Î™?, '??: 'Î™?,
                'Î≥?: '??, '??: '??,
                'Î¨?: '??, 'Í∏?: '??,
                'Í≤?: 'Í∏?, '??: 'Í∏?,
                '??: '??, 'Í≥?: '??
            };
            
            const element1 = stemElements[stem1];
            const element2 = stemElements[stem2];

            const relations = {
                'Î™?: { generate: '??, control: '??, generated: '??, controlled: 'Í∏? },
                '??: { generate: '??, control: 'Í∏?, generated: 'Î™?, controlled: '?? },
                '??: { generate: 'Í∏?, control: '??, generated: '??, controlled: 'Î™? },
                'Í∏?: { generate: '??, control: 'Î™?, generated: '??, controlled: '?? },
                '??: { generate: 'Î™?, control: '??, generated: 'Í∏?, controlled: '?? }
            };
            
            if (element1 === element2) return 'same';
            if (relations[element1].generate === element2) return 'generate';
            if (relations[element1].generated === element2) return 'generated';
            if (relations[element1].control === element2) return 'control';
            if (relations[element1].controlled === element2) return 'controlled';
            
            return 'none';
        }

        function analyzeBranchRelation(branch1, branch2) {
            const branchElements = {
                '??: '??, 'Ï∂?: '??, '??: 'Î™?, 'Î¨?: 'Î™?,
                'Ïß?: '??, '??: '??, '??: '??, 'ÎØ?: '??,
                '??: 'Í∏?, '??: 'Í∏?, '??: '??, '??: '??
            };
            
            const element1 = branchElements[branch1];
            const element2 = branchElements[branch2];
            
            return analyzeStemRelation(element1, element2);
        }

        function findSpecialRelation(branch1, branch2) {

            const combinations = {
                '??: 'Ï∂?, 'Ï∂?: '??,
                '??: '??, '??: '??,
                'Î¨?: '??, '??: 'Î¨?,
                'Ïß?: '??, '??: 'Ïß?,
                '??: '??, '??: '??,
                '??: 'ÎØ?, 'ÎØ?: '??
            };

            const clashes = {
                '??: '??, '??: '??,
                'Ï∂?: 'ÎØ?, 'ÎØ?: 'Ï∂?,
                '??: '??, '??: '??,
                'Î¨?: '??, '??: 'Î¨?,
                'Ïß?: '??, '??: 'Ïß?,
                '??: '??, '??: '??
            };

            const punishments = {
                '??: ['??, '??], '??: ['??, '??], '??: ['??, '??],
                'Ï∂?: ['??, 'ÎØ?], '??: ['Ï∂?, 'ÎØ?], 'ÎØ?: ['Ï∂?, '??]
            };
            
            if (combinations[branch1] === branch2) {
                return { type: '?°Ìï©', strength: 'positive' };
            }
            
            if (clashes[branch1] === branch2) {
                return { type: 'Ï∂?, strength: 'negative' };
            }
            
            if (punishments[branch1] && punishments[branch1].includes(branch2)) {
                return { type: '??, strength: 'negative' };
            }
            
            return { type: 'none', strength: 'neutral' };
        }

        function generateDetailedFortune(saju, todayPillar, relation) {

            const baseScore = 65;
            let overallScore = baseScore;

            if (relation.stemRelation === 'generate' || relation.stemRelation === 'generated') {
                overallScore += 10;
            } else if (relation.stemRelation === 'control' || relation.stemRelation === 'controlled') {
                overallScore -= 10;
            }
            
            if (relation.specialRelation.type === '?°Ìï©') {
                overallScore += 20;
            } else if (relation.specialRelation.type === 'Ï∂?) {
                overallScore -= 15;
            } else if (relation.specialRelation.type === '??) {
                overallScore -= 10;
            }

            overallScore = Math.max(20, Math.min(95, overallScore));

            const loveScore = Math.max(20, Math.min(95, overallScore + Math.floor(Math.random() * 20 - 10)));
            const moneyScore = Math.max(20, Math.min(95, overallScore + Math.floor(Math.random() * 20 - 10)));
            const healthScore = Math.max(20, Math.min(95, overallScore + Math.floor(Math.random() * 20 - 10)));
            const careerScore = Math.max(20, Math.min(95, overallScore + Math.floor(Math.random() * 20 - 10)));

            const overallFortune = generateOverallMessage(saju, overallScore, relation);
            const loveFortune = generateLoveMessage(saju, loveScore, relation);
            const moneyFortune = generateMoneyMessage(saju, moneyScore, relation);
            const careerFortune = generateCareerMessage(saju, careerScore, relation);
            const healthFortune = generateHealthMessage(saju, healthScore, relation);

            const luckyElements = generateLuckyElements(saju, todayPillar);

            const advice = generateAdvice(saju, todayPillar, relation);
            
            return {
                overallScore,
                loveScore,
                moneyScore,
                healthScore,
                overallFortune,
                loveFortune,
                loveAdvice: generateLoveAdvice(saju, loveScore),
                moneyFortune,
                moneyAdvice: generateMoneyAdvice(saju, moneyScore),
                careerFortune,
                careerAdvice: generateCareerAdvice(saju, careerScore),
                healthFortune,
                healthAdvice: generateHealthAdvice(saju, healthScore),
                ...luckyElements,
                ...advice
            };
        }

        function generateOverallMessage(saju, score, relation) {
            const dayMaster = saju.dayPillar.stem + saju.dayPillar.branch;
            let message = `${dayMaster}?ºÏ£º???πÏã†???§Îäò ?¥ÏÑ∏??`;
            
            if (score >= 80) {
                message += 'Îß§Ïö∞ Ï¢ãÏäµ?àÎã§! ';
                if (relation.specialRelation.type === '?°Ìï©') {
                    message += '?°Ìï©??Ï°∞ÌôîÎ°úÏö¥ Í∏∞Ïö¥???πÏã†??Í∞êÏã∏Í≥??àÏñ¥, Î™®Îì† ?ºÏù¥ ?úÏ°∞Î°?≤å ÏßÑÌñâ??Í≤ÉÏûÖ?àÎã§. ';
                }
                message += '?âÏÜå ÎØ∏Î§Ñ?îÎçò Ï§ëÏöî???ºÏùÑ ?úÏûë?òÍ∏∞??ÏµúÏ†Å???†ÏûÖ?àÎã§.';
            } else if (score >= 60) {
                message += '?âÍ∑† ?¥ÏÉÅ?ÖÎãà?? ';
                message += '??Î≥Ä?îÎ≥¥?§Îäî ?àÏ†ï?ÅÏù∏ ?êÎ¶Ñ ?çÏóê??Ï∞®Í∑ºÏ∞®Í∑º ?ºÏùÑ ÏßÑÌñâ?òÎäî Í≤ÉÏù¥ Ï¢ãÍ≤†?µÎãà??';
            } else {
                message += '?§ÏÜå Ï£ºÏùòÍ∞Ä ?ÑÏöî?©Îãà?? ';
                if (relation.specialRelation.type === 'Ï∂?) {
                    message += 'Ï∂©Ïùò Î≥Ä???êÎÑàÏßÄÍ∞Ä Í∞ïÌïòÎØÄÎ°??àÏÉÅÏπ?Î™ªÌïú ?ÅÌô©???ÄÎπÑÌïò?∏Ïöî. ';
                }
                message += 'Î¨¥Î¶¨?òÏ? ÎßêÍ≥† ?†Ï§ë?òÍ≤å ?âÎèô?òÎäî Í≤ÉÏù¥ Ï§ëÏöî?©Îãà??';
            }
            
            return message;
        }
        
        function generateLoveMessage(saju, score, relation) {
            const element = FIVE_ELEMENTS[saju.dayPillar.stem];
            let message = '';
            
            if (score >= 80) {
                message = `?†Ï†ï?¥Ïù¥ Îß§Ïö∞ Ï¢ãÏ? ?†ÏûÖ?àÎã§. ${element}??Îß§Î†•??ÎπõÏùÑ Î∞úÌïò???¥ÏÑ±?êÍ≤å Ï¢ãÏ? ?∏ÏÉÅ??Ï§????àÏäµ?àÎã§. `;
                message += '?∞Ïù∏???àÎã§Î©?ÍπäÏ? ?Ä?îÎ? ?òÎàÑÍ∏?Ï¢ãÍ≥†, ?±Í??¥ÎùºÎ©??àÎ°ú??ÎßåÎÇ®??Í∏∞ÌöåÍ∞Ä ?àÏùÑ ???àÏäµ?àÎã§.';
            } else if (score >= 60) {
                message = '?âÏò®???†Ï†ï?¥ÏûÖ?àÎã§. ?úÎ°úÎ•??¥Ìï¥?òÍ≥† Î∞∞Î†§?òÎäî ÎßàÏùå??Ï§ëÏöî???úÍ∏∞?ÖÎãà?? ';
                message += '?ëÏ? ?†Î¨º?¥ÎÇò ?∞Îúª??Îß??úÎßà?îÍ? Í¥ÄÍ≥ÑÎ? ?îÏö± ?àÎèÖ?òÍ≤å ÎßåÎì§ Í≤ÉÏûÖ?àÎã§.';
            } else {
                message = '?†Ï†ï Í¥ÄÍ≥ÑÏóê???ΩÍ∞Ñ??Í∏¥Ïû•???àÏùÑ ???àÏäµ?àÎã§. ';
                message += 'Í∞êÏ†ï?ÅÏúºÎ°??àÎ??¥Ïßà ???àÏúº???ÅÎ?Î∞©Ïùò ?ÖÏû•???¥Ìï¥?òÎ†§Í≥??∏Î†•?òÏÑ∏??';
            }
            
            return message;
        }
        
        function generateMoneyMessage(saju, score, relation) {
            let message = '';
            
            if (score >= 80) {
                message = 'Í∏àÏ†Ñ?¥Ïù¥ ?ÅÏäπ?òÎäî ?†ÏûÖ?àÎã§. ?¨Ïûê???¨ÏóÖ?êÏÑú Ï¢ãÏ? Í∏∞ÌöåÎ•??¨Ï∞©?????àÏäµ?àÎã§. ';
                message += '?§Îßå Í≥ºÏöï?Ä Í∏àÎ¨º?¥Îãà ?ÅÏ†à???†Ïóê??ÎßåÏ°±?òÎäî Í≤ÉÏù¥ Ï§ëÏöî?©Îãà??';
            } else if (score >= 60) {
                message = '?àÏ†ï?ÅÏù∏ Í∏àÏ†Ñ ?êÎ¶Ñ???àÏÉÅ?©Îãà?? Í≥ÑÌöç?ÅÏù∏ ?åÎπÑ?Ä ?ÄÏ∂ïÏùÑ ?§Ï≤ú?òÍ∏∞ Ï¢ãÏ? ?†ÏûÖ?àÎã§. ';
                message += 'Ï∂©ÎèôÍµ¨Îß§???ºÌïòÍ≥??ÑÏöî??Í≤ÉÎßå Íµ¨ÏûÖ?òÏÑ∏??';
            } else {
                message = 'Í∏àÏ†Ñ?ÅÏúºÎ°??†Ï§ë?¥Ïïº ?òÎäî ?†ÏûÖ?àÎã§. ??ÏßÄÏ∂úÏù¥???¨Ïûê??ÎØ∏Î£®??Í≤ÉÏù¥ Ï¢ãÍ≤†?µÎãà?? ';
                message += '?àÏÉÅÏπ?Î™ªÌïú ÏßÄÏ∂úÏù¥ Î∞úÏÉù?????àÏúº???¨Ïú† ?êÍ∏à???ïÎ≥¥?¥Îëê?∏Ïöî.';
            }
            
            return message;
        }
        
        function generateCareerMessage(saju, score, relation) {
            let message = '';
            
            if (score >= 80) {
                message = 'ÏßÅÏû•?êÏÑú???±Í≥ºÍ∞Ä ?ãÎ≥¥?¥Îäî ?†ÏûÖ?àÎã§. ?ÅÏÇ¨???ôÎ£å?§ÏóêÍ≤??•Î†•???∏Ï†ïÎ∞õÏùÑ ???àÏäµ?àÎã§. ';
                message += '?àÎ°ú???ÑÎ°ú?ùÌä∏??Ï§ëÏöî???ÖÎ¨¥Î•?Îß°Í∏∞??Ï¢ãÏ? ?úÍ∏∞?ÖÎãà??';
            } else if (score >= 60) {
                message = '?âÏÜå?Ä Í∞ôÏ? ?ÖÎ¨¥ ?êÎ¶Ñ???¥Ïñ¥ÏßëÎãà?? Î¨µÎ¨µ???êÏã†???ºÏóê ÏßëÏ§ë?òÎ©¥ Ï¢ãÏ? Í≤∞Í≥ºÎ•??ªÏùÑ ???àÏäµ?àÎã§. ';
                message += '?ôÎ£å?§Í≥º???ëÎ†•??Ï§ëÏöî???†ÏûÖ?àÎã§.';
            } else {
                message = '?ÖÎ¨¥???ΩÍ∞Ñ???¥Î†§?Ä???àÏùÑ ???àÏäµ?àÎã§. ?§ÏàòÎ•?Ï§ÑÏù¥Í∏??ÑÌï¥ ÍººÍºº???ïÏù∏?òÏÑ∏?? ';
                message += 'Ï§ëÏöî??Í≤∞Ï†ï?Ä ?§Ïùå?ºÎ°ú ÎØ∏Î£®??Í≤ÉÏù¥ ?ÑÎ™Ö?©Îãà??';
            }
            
            return message;
        }
        
        function generateHealthMessage(saju, score, relation) {
            const element = FIVE_ELEMENTS[saju.dayPillar.stem];
            const organMap = {
                'Î™?: 'Í∞ÑÍ≥º ??,
                '??: '?¨Ïû•Í≥??àÍ?',
                '??: 'ÎπÑÏû•Í≥??åÌôîÍ∏?,
                'Í∏?: '?êÏ? ?∏Ìù°Í∏?,
                '??: '?†Ïû•Í≥?Î∞©Í¥ë'
            };
            
            const organ = organMap[element];
            let message = '';
            
            if (score >= 80) {
                message = `Í±¥Í∞ï ?ÅÌÉúÍ∞Ä Îß§Ïö∞ Ï¢ãÏ? ?†ÏûÖ?àÎã§. ${organ} Í∏∞Îä•???úÎ∞ú?òÏó¨ ?ÑÎ∞ò?ÅÏù∏ Ïª®Îîî?òÏù¥ ÏµúÏÉÅ?ÖÎãà?? `;
                message += '?¥Îèô?¥ÎÇò ?ºÏô∏ ?úÎèô??Ï¶êÍ∏∞Í∏∞Ïóê Ï¢ãÏ? ?†ÏûÖ?àÎã§.';
            } else if (score >= 60) {
                message = `?âÏÜå?Ä ÎπÑÏä∑??Í±¥Í∞ï ?ÅÌÉúÎ•??†Ï??òÍ≥† ?àÏäµ?àÎã§. ${organ}??Ï¢ãÏ? ?åÏãù????∑®?òÎ©¥ ?ÑÏ????©Îãà?? `;
                message += 'Í∑úÏπô?ÅÏù∏ ?ùÌôú ?µÍ????†Ï??òÏÑ∏??';
            } else {
                message = `Ïª®Îîî?òÏù¥ ?§ÏÜå ?®Ïñ¥Ïß????àÎäî ?†ÏûÖ?àÎã§. ${organ}???πÌûà Ï£ºÏùòÍ∞Ä ?ÑÏöî?©Îãà?? `;
                message += 'Î¨¥Î¶¨???úÎèô?Ä ?ºÌïòÍ≥?Ï∂©Î∂Ñ???¥Ïãù??Ï∑®Ìïò?∏Ïöî.';
            }
            
            return message;
        }

        function generateLoveAdvice(saju, score) {
            if (score >= 80) {
                return '?§Îäò?Ä ?ÅÍ∑π?ÅÏúºÎ°?Í∞êÏ†ï???úÌòÑ?òÏÑ∏?? Î°úÎß®?±Ìïú ?∞Ïù¥?∏ÎÇò ÏßÑÏã¨ ?¥Î¶∞ Í≥†Î∞±??Ï¢ãÏ? Í≤∞Í≥ºÎ•?Í∞Ä?∏Ïò¨ Í≤ÉÏûÖ?àÎã§.';
            } else if (score >= 60) {
                return '?âÏÜåÎ≥¥Îã§ ??ÎßéÏ? Í¥Ä?¨Í≥º Î∞∞Î†§Î•?Î≥¥Ïó¨Ï£ºÏÑ∏?? ?ëÏ? ?ïÏÑ±????Í∞êÎèô??Ï§????àÏäµ?àÎã§.';
            } else {
                return 'Í∞êÏ†ï?ÅÏúºÎ°??àÎ??????àÏúº??Ï§ëÏöî???Ä?îÎäî ÎØ∏Î£®?∏Ïöî. ?ºÏûêÎßåÏùò ?úÍ∞Ñ??Í∞ñÎäî Í≤ÉÎèÑ Ï¢ãÏäµ?àÎã§.';
            }
        }
        
        function generateMoneyAdvice(saju, score) {
            if (score >= 80) {
                return '?¨Ïûê???¨ÏóÖ ?ïÏû•??Ï¢ãÏ? Í∏∞Ìöå?ÖÎãà?? ?òÏ?Îß??ïÏã¨??Î∂ÄÎ¶¨Ï? ÎßêÍ≥† Î∂ÑÏÇ∞ ?¨ÏûêÎ•?Í≥†Î†§?òÏÑ∏??';
            } else if (score >= 60) {
                return '?àÏ†ï?ÅÏù∏ ?¨ÌÖå???ÑÎûµ???†Ï??òÏÑ∏?? ?•Í∏∞?ÅÏù∏ Í¥Ä?êÏóê??Íæ∏Ï????ÄÏ∂ïÌïò??Í≤ÉÏù¥ Ï§ëÏöî?©Îãà??';
            } else {
                return 'ÏßÄÏ∂úÏùÑ ÏµúÏÜå?îÌïòÍ≥?ÎπÑÏÉÅÍ∏àÏùÑ ?ïÎ≥¥?òÏÑ∏?? Î¶¨Ïä§?¨Í? ???¨Ïûê???ºÌïò??Í≤ÉÏù¥ Ï¢ãÏäµ?àÎã§.';
            }
        }
        
        function generateCareerAdvice(saju, score) {
            if (score >= 80) {
                return '?êÏã†Í∞êÏùÑ Í∞ñÍ≥† ?àÎ°ú???ÑÏ†Ñ???úÏûë?òÏÑ∏?? ?πÏã†???•Î†•??ÎπõÏùÑ Î∞úÌï† ÏµúÏ†Å???úÍ∏∞?ÖÎãà??';
            } else if (score >= 60) {
                return 'Íæ∏Ï??®Ïù¥ ?±Í≥µ???¥Ïá†?ÖÎãà?? ?ÑÏû¨ Îß°Ï? ?ºÏóê ÏµúÏÑ†???§ÌïòÎ©?Ï¢ãÏ? ?âÍ?Î•?Î∞õÏùÑ Í≤ÉÏûÖ?àÎã§.';
            } else {
                return '?§ÏàòÎ•?Î∞©Ï??òÍ∏∞ ?ÑÌï¥ ??Î≤??ïÏù∏?òÏÑ∏?? ?ôÎ£å?§Í≥º???åÌÜµ??Í∞ïÌôî?òÏó¨ ?ëÎ†•??Íµ¨Ìïò?∏Ïöî.';
            }
        }
        
        function generateHealthAdvice(saju, score) {
            if (score >= 80) {
                return '?úÎèô?ÅÏù∏ ?¥Îèô??Ï¶êÍ∏∞Í∏?Ï¢ãÏ? ?†ÏûÖ?àÎã§. ?àÎ°ú???¥Îèô???úÏûë?òÍ±∞???ºÏô∏ ?úÎèô??Í≥ÑÌöç?¥Î≥¥?∏Ïöî.';
            } else if (score >= 60) {
                return 'Í∑úÏπô?ÅÏù∏ ?ùÌôú Î¶¨Îì¨???†Ï??òÏÑ∏?? Í∞ÄÎ≤ºÏö¥ ?§Ìä∏?àÏπ≠Í≥?Ï∂©Î∂Ñ???òÎ∂Ñ ??∑®Í∞Ä ?ÑÏ????©Îãà??';
            } else {
                return 'Î¨¥Î¶¨?òÏ? ÎßêÍ≥† Ï∂©Î∂Ñ???¥Ïãù??Ï∑®Ìïò?∏Ïöî. ?§Ìä∏?àÏä§ Í¥ÄÎ¶¨Ï? Î™ÖÏÉÅ???ÑÏ?????Í≤ÉÏûÖ?àÎã§.';
            }
        }

        function generateLuckyElements(saju, todayPillar) {
            const dayMaster = saju.dayPillar.stem;
            const todayElement = FIVE_ELEMENTS[todayPillar.stem];

            const timeMap = {
                'Í∞?: 'Î¨òÏãú (05:00-07:00)',
                '??: 'Î¨òÏãú (05:00-07:00)',
                'Î≥?: '?§Ïãú (11:00-13:00)',
                '??: '?¨Ïãú (09:00-11:00)',
                'Î¨?: 'ÏßÑÏãú (07:00-09:00)',
                'Í∏?: 'ÎØ∏Ïãú (13:00-15:00)',
                'Í≤?: '?†Ïãú (15:00-17:00)',
                '??: '?†Ïãú (17:00-19:00)',
                '??: '?êÏãú (23:00-01:00)',
                'Í≥?: '?¥Ïãú (21:00-23:00)'
            };

            const directionMap = {
                'Î™?: '?ôÏ™Ω',
                '??: '?®Ï™Ω',
                '??: 'Ï§ëÏïô',
                'Í∏?: '?úÏ™Ω',
                '??: 'Î∂ÅÏ™Ω'
            };

            const colorMap = {
                'Î™?: 'Ï¥àÎ°ù?? Ï≤?°ù??,
                '??: 'Îπ®Í∞Ñ?? Î≥¥Îùº??,
                '??: '?∏Î??? Í∞àÏÉâ',
                'Í∏?: '?∞ÏÉâ, ?Ä??,
                '??: 'Í≤Ä?Ä?? ?åÎ???
            };

            const numberMap = {
                'Í∞?: '3, 8',
                '??: '3, 8',
                'Î≥?: '2, 7',
                '??: '2, 7',
                'Î¨?: '5, 10',
                'Í∏?: '5, 10',
                'Í≤?: '4, 9',
                '??: '4, 9',
                '??: '1, 6',
                'Í≥?: '1, 6'
            };
            
            return {
                luckyTime: timeMap[dayMaster],
                luckyDirection: directionMap[FIVE_ELEMENTS[dayMaster]],
                luckyColor: colorMap[todayElement],
                luckyNumber: numberMap[dayMaster]
            };
        }

        function generateAdvice(saju, todayPillar, relation) {
            const dayMaster = saju.dayPillar.stem;
            const element = FIVE_ELEMENTS[dayMaster];
            
            let mainAdvice = '';
            let doAdvice = '';
            let dontAdvice = '';

            if (relation.specialRelation.type === '?°Ìï©') {
                mainAdvice = `?§Îäò?Ä ?°Ìï©??Ï°∞ÌôîÎ°úÏö¥ Í∏∞Ïö¥??Í∞Ä?ùÌïú ?†ÏûÖ?àÎã§. ${dayMaster}?ºÏ£º???πÏã†???•Ï†ê??ÏµúÎ???Î∞úÌúò?????àÏúº?? ?âÏÜå ÎØ∏Î§Ñ?îÎçò Ï§ëÏöî???ºÏùÑ ÏßÑÌñâ?¥Î≥¥?∏Ïöî.`;
            } else if (relation.specialRelation.type === 'Ï∂?) {
                mainAdvice = `Ï∂©Ïùò Î≥Ä???êÎÑàÏßÄÍ∞Ä Í∞ïÌïú ?†ÏûÖ?àÎã§. ?àÏÉÅÏπ?Î™ªÌïú ?ÅÌô©??Î∞úÏÉù?????àÏ?Îß? ?¥Îäî ?àÎ°ú??Í∏∞ÌöåÍ∞Ä ???òÎèÑ ?àÏäµ?àÎã§.`;
            } else {
                mainAdvice = `${element}???πÏÑ±???¥Î†§ Ï∞®Î∂Ñ?òÍ≥† ?†Ï§ë?òÍ≤å ?òÎ£®Î•?Î≥¥ÎÇ¥?∏Ïöî. ??Î≥Ä?îÎ≥¥?§Îäî ?ºÏÉÅ???åÏ§ë?®ÏùÑ ?êÎÅºÎ©??¥Ï†Å ?±Ïû•??ÏßëÏ§ë?òÎäî Í≤ÉÏù¥ Ï¢ãÍ≤†?µÎãà??`;
            }

            const doList = {
                'Î™?: '?àÎ°ú???ÑÎ°ú?ùÌä∏ ?úÏûë',
                '??: '?ÑÎ†à?†ÌÖå?¥ÏÖò?¥ÎÇò Î∞úÌëú',
                '??: 'Í≥ÑÌöç ?òÎ¶ΩÍ≥??ïÎ¶¨',
                'Í∏?: 'Ï§ëÏöî??Í≤∞Ï†ï',
                '??: '?ôÏäµÍ≥??∞Íµ¨'
            };
            
            doAdvice = doList[element];

            const dontList = {
                'Î™?: 'Í≥†Ïßë?§Îü¨???úÎèÑ',
                '??: 'Í≥ºÎèÑ???¥Ï†ï',
                '??: '?∞Ïú†Î∂Ä?®Ìï®',
                'Í∏?: '?µÌÜµ??Î∂ÄÏ°?,
                '??: 'Ï±ÖÏûÑ ?åÌîº'
            };
            
            dontAdvice = dontList[element];
            
            return {
                advice: mainAdvice,
                doAdvice,
                dontAdvice
            };
        }

        function getScoreColor(score) {
            if (score >= 85) return '#10b981';
            if (score >= 70) return '#3b82f6';
            if (score >= 55) return '#f59e0b';
            return '#ef4444';
        }

        function shareFortune() {
            const text = '?òÏùò ?§Îäò ?¥ÏÑ∏Î•??ïÏù∏?¥Î≥¥?∏Ïöî!';
            const url = window.location.href;
            
            if (navigator.share) {
                navigator.share({
                    title: '?§Îäò???¥ÏÑ∏',
                    text: text,
                    url: url
                });
            } else {

                if (window.Kakao && window.Kakao.isInitialized()) {
                    Kakao.Share.sendDefault({
                        objectType: 'feed',
                        content: {
                            title: '?§Îäò???¥ÏÑ∏',
                            description: text,
                            imageUrl: 'https://doha.kr/images/og-default.png',
                            link: {
                                mobileWebUrl: url,
                                webUrl: url
                            }
                        }
                    });
                } else {

                    navigator.clipboard.writeText(url).then(() => {
                        alert('ÎßÅÌÅ¨Í∞Ä Î≥µÏÇ¨?òÏóà?µÎãà??');
                    });
                }
            }
        }

        const FIVE_ELEMENTS = {
            'Í∞?: 'Î™?, '??: 'Î™?,
            'Î≥?: '??, '??: '??,
            'Î¨?: '??, 'Í∏?: '??,
            'Í≤?: 'Í∏?, '??: 'Í∏?,
            '??: '??, 'Í≥?: '??
        };
    </script>

        function getTodayPillarFromManseryeok() {
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth() + 1;
            const day = today.getDate();

            if (window.getManseryeokData) {
                const data = window.getManseryeokData(year, month, day);
                if (data) {
                    return {
                        stem: data.dayGanji.charAt(0),
                        branch: data.dayGanji.charAt(1)
                    };
                }
            }

            const totalDays = Math.floor(today.getTime() / (1000 * 60 * 60 * 24));
            const ganjiIndex = totalDays % 60;
            const stems = ["Í∞?, "??, "Î≥?, "??, "Î¨?, "Í∏?, "Í≤?, "??, "??, "Í≥?];
            const branches = ["??, "Ï∂?, "??, "Î¨?, "Ïß?, "??, "??, "ÎØ?, "??, "??, "??, "??];
            
            return {
                stem: stems[ganjiIndex % 10],
                branch: branches[ganjiIndex % 12]
            };
        }
    <!-- Kakao SDK -->
<script>

        if (window.API_CONFIG && window.API_CONFIG.KAKAO_JS_KEY) {
    if (window.Kakao && !window.Kakao.isInitialized()) {
        Kakao.init(window.API_CONFIG.KAKAO_JS_KEY);
    }
}
    </script>
<!-- AdSense initialization -->
<!-- Non-critical scripts moved here for performance -->
<!-- Google AdSense ÏßÄ??Î°úÎî© -->
<script>

window.addEventListener('load', function() {
    setTimeout(function() {
        var adsScript = document.createElement('script');
        adsScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7905640648499222';
        adsScript.crossOrigin = 'anonymous';
        adsScript.defer = true;
        document.head.appendChild(adsScript);
    }, 2000);
});
</script>
<script>

window.adsenseInitialized = window.adsenseInitialized || false;

function initializeAdSense() {
    if (window.adsenseInitialized) {
        console.log('AdSense already initialized');
        return;
    }
    
    window.adsenseInitialized = true;

    const adBlocks = document.querySelectorAll('.adsbygoogle');
    adBlocks.forEach((ad, index) => {
        if (!ad.dataset.adsbygoogleStatus) {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                console.log('AdSense block initialized:', index);
            } catch (error) {
                console.warn('AdSense initialization error:', error);
            }
        }
    });
}

window.addEventListener('load', function() {
    setTimeout(initializeAdSense, 1000);
});
</script>
<script>

(function() {
    'use strict';

    window.__adsenseLoaded = window.__adsenseLoaded || false;
    window.__adsenseQueue = window.__adsenseQueue || [];
    
    function initAdsense() {
        if (window.__adsenseLoaded) return;
        
        const ads = document.querySelectorAll('.adsbygoogle:not([data-adsbygoogle-status])');
        
        if (ads.length === 0) return;

        if (typeof adsbygoogle === 'undefined') {
            setTimeout(initAdsense, 500);
            return;
        }
        
        window.__adsenseLoaded = true;

        ads.forEach((ad, index) => {
            try {

                if (ad.getAttribute('data-adsbygoogle-status')) return;

                (adsbygoogle = window.adsbygoogle || []).push({});

                ad.setAttribute('data-adsbygoogle-status', 'done');
                
            } catch (e) {
                console.warn('AdSense Ï¥àÍ∏∞???§Ìå®:', index, e.message);
            }
        });
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initAdsense, 1000);
        });
    } else {
        setTimeout(initAdsense, 1000);
    }

    window.addEventListener('error', function(e) {
        if (e.message && e.message.includes('adsbygoogle.push() error')) {
            e.preventDefault();
            console.warn('AdSense Ï§ëÎ≥µ Ï¥àÍ∏∞??Î∞©Ï???);
            return false;
        }
    }, true);
})();
</script>
<!-- AdSense ?µÌï© Ï¥àÍ∏∞??-->
<script>
(function() {
    'use strict';

    window.__adsInitialized = false;

    function initializeAds() {
        if (window.__adsInitialized) return;
        
        const ads = document.querySelectorAll('.adsbygoogle:not([data-adsbygoogle-status])');
        if (ads.length === 0) return;

        if (typeof adsbygoogle === 'undefined') {
            setTimeout(initializeAds, 100);
            return;
        }
        
        window.__adsInitialized = true;

        ads.forEach((ad) => {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                ad.setAttribute('data-adsbygoogle-status', 'done');
            } catch (e) {

            }
        });
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initializeAds, 500);
        });
    } else {
        setTimeout(initializeAds, 500);
    }

    window.addEventListener('error', function(e) {
        if (e.message && e.message.includes('adsbygoogle.push() error')) {
            e.preventDefault();
            e.stopPropagation();
            return false;
        }
    }, true);
})();
</script>
<!-- Ïπ¥Ïπ¥??Ï¥àÍ∏∞??-->
<script>
    if (typeof Kakao !== 'undefined' && window.KAKAO_API_KEY) {
        if (!Kakao.isInitialized()) {
            Kakao.init(window.KAKAO_API_KEY);
            console.log('Ïπ¥Ïπ¥??SDK Ï¥àÍ∏∞???ÑÎ£å');
        }
    } else {
        console.warn('Ïπ¥Ïπ¥??SDK ?êÎäî API ?§Î? Ï∞æÏùÑ ???ÜÏäµ?àÎã§.');
    }
</script>
<script>
// ?§ÎπÑÍ≤åÏù¥??Î∞??∏ÌÑ∞ Î°úÎìú - main.js??loadComponentsÍ∞Ä ?§Ìñâ?òÏ? ?äÏ? Í≤ΩÏö∞Î•??ÑÌïú ?¥Î∞±
document.addEventListener('DOMContentLoaded', function() {
    // main.jsÍ∞Ä Î°úÎìú?òÏóàÍ≥?loadComponents ?®ÏàòÍ∞Ä ?àÎäîÏßÄ ?ïÏù∏
    if (typeof loadComponents === 'function') {
        // main.js??DOMContentLoadedÍ∞Ä ?¥Î? ?§Ìñâ?òÏóà?????àÏúºÎØÄÎ°?
        // navbar-placeholderÍ∞Ä ÎπÑÏñ¥?àÏúºÎ©??§Ïãú ?§Ìñâ
        const navPlaceholder = document.getElementById('navbar-placeholder');
        const footerPlaceholder = document.getElementById('footer-placeholder');
        
        if ((navPlaceholder && !navPlaceholder.innerHTML.trim()) || 
            (footerPlaceholder && !footerPlaceholder.innerHTML.trim())) {
            console.log('Loading components...');
            loadComponents().catch(function(error) {
                console.error('Failed to load components:', error);
            });
        }
    }
});
</script>
</body>
</body></html>