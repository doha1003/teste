<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 타로 리딩 - AI 운세 | doha.kr</title>
    <meta name="description" content="질문을 입력하면 AI가 타로 카드를 뽑아 심층적인 해석을 제공합니다.">
    
    <!-- Open Graph -->
    <meta property="og:title" content="AI 타로 리딩 | doha.kr">
    <meta property="og:description" content="질문을 입력하면 AI가 타로 카드를 뽑아 심층적인 해석을 제공합니다.">
    <meta property="og:image" content="https://doha.kr/images/og-default.png">
    <meta property="og:url" content="https://doha.kr/fortune/tarot/">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/components/navbar.css">
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7905640648499222" crossorigin="anonymous"></script>
</head>
<body class="fortune-page">
    <!-- 네비게이션 바 -->
    <div id="navbar-placeholder"></div>
    
    <!-- 페이지 헤더 -->
    <section class="page-header">
        <div class="container">
            <h1 class="page-title fade-in">AI 타로 리딩</h1>
            <p class="page-subtitle fade-in stagger-1">
                AI가 해석하는 신비로운 타로 카드의 메시지
            </p>
        </div>
    </section>
    
    <!-- 타로 리딩 섹션 -->
    <section class="tarot-section">
        <div class="container">
            <div id="tarotForm" class="tarot-form">
                <h2 style="text-align: center; margin-bottom: 32px;">타로 리딩 시작하기</h2>
                
                <div class="form-group">
                    <label for="question">질문을 입력하세요</label>
                    <textarea 
                        id="question" 
                        name="question" 
                        class="form-control" 
                        rows="4" 
                        required 
                        placeholder="타로에게 묻고 싶은 질문을 구체적으로 적어주세요. 예: 현재 연애 관계가 어떻게 발전할까요?"
                    ></textarea>
                </div>
                
                <button type="button" onclick="startTarotReading()" class="btn btn-primary" style="width: 100%; margin-top: 24px;">
                    🔮 타로 리딩 시작
                </button>
            </div>
            
            <!-- 타로 결과 영역 -->
            <div id="tarotResult" class="tarot-result" style="display: none;">
                <!-- 결과가 여기에 표시됩니다 -->
            </div>
        </div>
    </section>
    
    <!-- 타로 안내 섹션 -->
    <section class="info-section">
        <div class="container">
            <div class="info-box">
                <h3>AI 타로 리딩 안내</h3>
                <ul>
                    <li>타로 카드는 현재 상황에 대한 통찰과 가이드를 제공합니다.</li>
                    <li>질문은 구체적일수록 더 명확한 답변을 받을 수 있습니다.</li>
                    <li>카드의 해석은 참고용이며, 최종 결정은 본인이 내리셔야 합니다.</li>
                    <li>메이저 아르카나 22장을 사용하여 리딩을 진행합니다.</li>
                </ul>
            </div>
        </div>
    </section>
    
    <!-- 광고 영역 -->
    <div class="ad-container">
        <div class="ad-label">광고</div>
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-7905640648499222"
             data-ad-slot="1234567890"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
    </div>
    
    <!-- 푸터 -->
    <div id="footer-placeholder"></div>
    
    <!-- External JavaScript -->
    <script src="/js/main.js"></script>
    
    <script>
        // 메이저 아르카나 22장 카드 데이터
        const majorArcana = [
            { id: 0, name: "The Fool", korean: "바보", meaning: "새로운 시작, 순수함, 모험", reversed: "무모함, 경솔함, 방향감각 상실" },
            { id: 1, name: "The Magician", korean: "마법사", meaning: "의지력, 창조력, 능력", reversed: "속임수, 능력 부족, 자만심" },
            { id: 2, name: "The High Priestess", korean: "여교황", meaning: "직관, 신비, 내면의 지혜", reversed: "비밀, 무지, 표면적 지식" },
            { id: 3, name: "The Empress", korean: "여황제", meaning: "풍요, 창조, 모성", reversed: "의존, 과보호, 창조력 부족" },
            { id: 4, name: "The Emperor", korean: "황제", meaning: "권위, 안정, 지배", reversed: "독단, 경직, 폭정" },
            { id: 5, name: "The Hierophant", korean: "교황", meaning: "전통, 종교, 교육", reversed: "독단, 형식주의, 반항" },
            { id: 6, name: "The Lovers", korean: "연인", meaning: "사랑, 선택, 결합", reversed: "분리, 갈등, 잘못된 선택" },
            { id: 7, name: "The Chariot", korean: "전차", meaning: "의지, 승리, 통제", reversed: "패배, 방향감각 상실, 통제 불능" },
            { id: 8, name: "Strength", korean: "힘", meaning: "용기, 인내, 내적 힘", reversed: "약함, 의심, 자제력 부족" },
            { id: 9, name: "The Hermit", korean: "은둔자", meaning: "성찰, 내적 인도, 지혜", reversed: "고립, 외로움, 거부" },
            { id: 10, name: "Wheel of Fortune", korean: "운명의 바퀴", meaning: "변화, 운명, 기회", reversed: "불운, 통제 불능, 악순환" },
            { id: 11, name: "Justice", korean: "정의", meaning: "공정, 균형, 진실", reversed: "불공정, 편견, 거짓" },
            { id: 12, name: "The Hanged Man", korean: "매달린 사람", meaning: "희생, 새로운 관점, 기다림", reversed: "헛된 희생, 지연, 이기심" },
            { id: 13, name: "Death", korean: "죽음", meaning: "변화, 재생, 끝과 시작", reversed: "정체, 변화에 대한 저항" },
            { id: 14, name: "Temperance", korean: "절제", meaning: "조화, 균형, 절제", reversed: "불균형, 과도함, 불화" },
            { id: 15, name: "The Devil", korean: "악마", meaning: "유혹, 속박, 물질주의", reversed: "해방, 깨달음, 자유" },
            { id: 16, name: "The Tower", korean: "탑", meaning: "파괴, 갑작스런 변화, 깨달음", reversed: "피할 수 있는 재앙, 내적 변화" },
            { id: 17, name: "The Star", korean: "별", meaning: "희망, 영감, 치유", reversed: "절망, 환멸, 영감 부족" },
            { id: 18, name: "The Moon", korean: "달", meaning: "환상, 불안, 무의식", reversed: "혼란 해소, 진실 발견" },
            { id: 19, name: "The Sun", korean: "태양", meaning: "기쁨, 성공, 활력", reversed: "과신, 오만, 에너지 부족" },
            { id: 20, name: "Judgement", korean: "심판", meaning: "부활, 깨달음, 용서", reversed: "후회, 자기 비판, 용서 부족" },
            { id: 21, name: "The World", korean: "세계", meaning: "완성, 성취, 통합", reversed: "미완성, 좌절, 부족함" }
        ];
        
        function startTarotReading() {
            const question = document.getElementById('question').value.trim();
            if (!question) {
                alert('질문을 입력해주세요.');
                return;
            }
            
            // 폼 숨기기
            document.getElementById('tarotForm').style.display = 'none';
            
            // 로딩 표시
            const resultDiv = document.getElementById('tarotResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <div class="loading" style="text-align: center; padding: 40px;">
                    <div class="loading-spinner"></div>
                    <p style="margin-top: 20px;">타로 카드를 섞고 있습니다...</p>
                </div>
            `;
            
            // 카드 뽑기
            setTimeout(async () => {
                const card = drawCard(question);
                await displayTarotResult(question, card);
            }, 2000);
        }
        
        function drawCard(question) {
            // 질문을 기반으로 시드 생성
            const seed = generateSeed(question);
            const cardIndex = Math.floor(seededRandom(seed) * majorArcana.length);
            const isReversed = seededRandom(seed * 2) < 0.3; // 30% 확률로 역방향
            
            return {
                ...majorArcana[cardIndex],
                reversed: isReversed
            };
        }
        
        function generateSeed(text) {
            let hash = 0;
            for (let i = 0; i < text.length; i++) {
                const char = text.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // 32비트 정수로 변환
            }
            return Math.abs(hash);
        }
        
        function seededRandom(seed) {
            const x = Math.sin(seed) * 10000;
            return x - Math.floor(x);
        }
        
        async function displayTarotResult(question, card) {
            const resultDiv = document.getElementById('tarotResult');
            
            // AI 해석 생성
            const interpretation = await generateInterpretation(card, question);
            
            resultDiv.innerHTML = `
                <div class="tarot-result-container">
                    <h2 style="text-align: center; margin-bottom: 30px;">🔮 타로 리딩 결과</h2>
                    
                    <div class="question-display">
                        <h3>📝 질문</h3>
                        <p>"${question}"</p>
                    </div>
                    
                    <div class="card-display">
                        <div class="card-container ${card.reversed ? 'reversed' : ''}">
                            <div class="card-image">
                                <div class="card-number">${card.id}</div>
                                <div class="card-symbol">🃏</div>
                                <div class="card-name">${card.korean}</div>
                                <div class="card-english">${card.name}</div>
                            </div>
                            ${card.reversed ? '<div class="reversed-label">역방향</div>' : ''}
                        </div>
                    </div>
                    
                    <div class="interpretation">
                        <h3>🔍 카드 해석</h3>
                        <div class="card-meaning">
                            <h4>기본 의미</h4>
                            <p>${card.reversed ? card.reversed : card.meaning}</p>
                        </div>
                        
                        <div class="personal-message">
                            <h4>개인 메시지</h4>
                            <p>${interpretation}</p>
                        </div>
                    </div>
                    
                    <div class="advice">
                        <h3>💡 조언</h3>
                        <p>${await generateAdvice(card, question)}</p>
                    </div>
                    
                    <div style="text-align: center; margin-top: 40px;">
                        <button onclick="location.reload()" class="btn btn-secondary">
                            다시 점보기
                        </button>
                    </div>
                </div>
            `;
        }
        
        async function generateInterpretation(card, question) {
            try {
                const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBKwOVTm6w9yf4BqPY01e1L3UYB_t5Pjr4', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `당신은 전문 타로 리더입니다. 다음 질문에 대해 뽑힌 타로 카드를 해석해주세요.

질문: "${question}"
뽑힌 카드: ${card.korean} (${card.name}) ${card.reversed ? '- 역방향' : '- 정방향'}
카드 기본 의미: ${card.reversed ? card.reversed : card.meaning}

질문자의 구체적인 상황에 맞춰 이 카드가 어떤 의미인지 3-4문장으로 해석해주세요. 
- 질문과 카드의 연관성을 구체적으로 설명하세요
- 현재 상황에 대한 통찰을 제공하세요  
- 앞으로의 방향성을 제시하세요
- 신비롭고 영감을 주는 톤으로 작성하세요`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                    return data.candidates[0].content.parts[0].text;
                } else {
                    throw new Error('AI 응답 형식 오류');
                }
            } catch (error) {
                console.error('AI 해석 생성 오류:', error);
                // 에러 시 기본 해석 제공
                const interpretations = {
                    0: `"${question}"에 대한 답으로 바보 카드가 나왔습니다. 새로운 시작을 앞두고 있으며, 순수한 마음으로 용기를 내어 첫 발을 내딛어야 할 때입니다.`,
                    1: `"${question}"에 대해 마법사 카드가 응답합니다. 당신에게는 원하는 것을 이룰 수 있는 모든 능력과 도구가 갖춰져 있습니다. 자신감을 가지고 행동하세요.`,
                    2: `"${question}"에 대한 여교황의 메시지입니다. 답은 이미 당신의 내면에 있습니다. 직감을 믿고 내면의 목소리에 귀 기울이세요.`,
                    21: `"${question}"에 대해 세계 카드가 나타났습니다. 완성과 성취의 시기가 다가오고 있으며, 목표 달성을 위해 끝까지 최선을 다하면 원하는 결과를 얻을 것입니다.`
                };
                
                return interpretations[card.id] || `"${question}"에 대한 ${card.korean} 카드의 메시지입니다. 이 카드는 당신의 현재 상황에 특별한 의미를 가지고 있습니다.`;
            }
        }
        
        async function generateAdvice(card, question) {
            try {
                const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=AIzaSyBKwOVTm6w9yf4BqPY01e1L3UYB_t5Pjr4', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `당신은 전문 타로 리더입니다. 다음 질문과 카드를 바탕으로 실용적인 조언을 해주세요.

질문: "${question}"
뽑힌 카드: ${card.korean} (${card.name}) ${card.reversed ? '- 역방향' : '- 정방향'}

질문자가 실제로 행동할 수 있는 구체적인 조언을 2-3문장으로 제시해주세요.
- 질문 상황에 맞는 실천 방법을 제시하세요
- 카드의 에너지를 활용할 수 있는 방법을 알려주세요  
- 현실적이고 실행 가능한 조언을 해주세요
- 따뜻하고 격려하는 톤으로 작성하세요`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                
                if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                    return data.candidates[0].content.parts[0].text;
                } else {
                    throw new Error('AI 응답 형식 오류');
                }
            } catch (error) {
                console.error('AI 조언 생성 오류:', error);
                // 에러 시 기본 조언 제공  
                const advices = {
                    0: `"${question}"과 관련하여 두려움을 버리고 새로운 도전을 시작하세요. 바보 카드는 순수한 마음으로 첫 발을 내딛을 때임을 알려줍니다.`,
                    1: `"${question}"에 대한 답은 이미 당신 안에 있습니다. 마법사 카드가 말하듯, 자신의 능력을 믿고 계획을 실행에 옮기세요.`,
                    21: `"${question}"과 관련하여 완성의 시기가 다가왔습니다. 세계 카드가 보여주듯 목표 달성을 위해 마지막까지 최선을 다하세요.`
                };
                
                return advices[card.id] || `"${question}"에 대한 ${card.korean} 카드의 조언을 마음에 새기고 실천해보세요.`;
            }
        }
    </script>
    
    <style>
        .fortune-page .page-header {
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.05) 0%, rgba(236, 72, 153, 0.05) 100%);
            padding: 80px 0 60px;
            text-align: center;
        }
        
        .fortune-page .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 16px;
            color: var(--gray-900);
        }
        
        .fortune-page .page-subtitle {
            font-size: 1.125rem;
            color: var(--gray-600);
        }
        
        .tarot-section {
            padding: 60px 0;
            background: white;
        }
        
        .tarot-form {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--gray-700);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--gray-200);
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            resize: vertical;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }
        
        .tarot-result-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .question-display {
            background: var(--gray-50);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
        }
        
        .question-display h3 {
            margin-bottom: 10px;
            color: var(--gray-800);
        }
        
        .card-display {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .card-container {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 16px;
            color: white;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transform: scale(1);
            transition: transform 0.3s ease;
        }
        
        .card-container:hover {
            transform: scale(1.05);
        }
        
        .card-container.reversed {
            transform: rotate(180deg);
        }
        
        .card-image {
            text-align: center;
        }
        
        .card-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .card-symbol {
            font-size: 4rem;
            margin-bottom: 15px;
        }
        
        .card-name {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .card-english {
            font-size: 1rem;
            opacity: 0.8;
        }
        
        .reversed-label {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-top: 10px;
        }
        
        .interpretation, .advice {
            margin-bottom: 30px;
        }
        
        .interpretation h3, .advice h3 {
            color: var(--gray-800);
            margin-bottom: 20px;
        }
        
        .card-meaning, .personal-message {
            background: var(--gray-50);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
        }
        
        .card-meaning h4, .personal-message h4 {
            color: var(--gray-700);
            margin-bottom: 10px;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--gray-200);
            border-top: 3px solid var(--primary-500);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .info-section {
            padding: 60px 0;
            background: var(--gray-50);
        }
        
        .info-box {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
        }
        
        .info-box h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--gray-900);
        }
        
        .info-box ul {
            list-style: none;
            padding: 0;
        }
        
        .info-box li {
            padding: 8px 0;
            padding-left: 20px;
            position: relative;
            font-size: 1rem;
            line-height: 1.6;
            color: var(--gray-700);
        }
        
        .info-box li::before {
            content: '🃏';
            position: absolute;
            left: 0;
            top: 8px;
        }
        
        .btn {
            display: inline-block;
            padding: 14px 32px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            text-decoration: none;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #9333ea 0%, #ec4899 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(147, 51, 234, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(147, 51, 234, 0.4);
            color: white;
        }
        
        .btn-secondary {
            background: var(--gray-200);
            color: var(--gray-700);
        }
        
        .btn-secondary:hover {
            background: var(--gray-300);
            color: var(--gray-800);
        }
        
        @media (max-width: 768px) {
            .fortune-page .page-header {
                padding: 60px 0 40px;
            }
            
            .fortune-page .page-title {
                font-size: 2rem;
            }
            
            .tarot-form, .tarot-result-container {
                padding: 30px 20px;
                margin: 0 20px;
            }
            
            .card-container {
                padding: 20px;
            }
            
            .card-number {
                font-size: 1.5rem;
            }
            
            .card-symbol {
                font-size: 3rem;
            }
            
            .card-name {
                font-size: 1.2rem;
            }
            
            .info-box {
                padding: 30px 20px;
                margin: 0 20px;
            }
        }
    </style>
    
    <!-- AdSense initialization -->
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</body>
</html>