<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0, user-scalable=yes"
    />
    <title>AI 타로 리딩 - 무료 온라인 타로 카드 | doha.kr</title>
    <!-- 폰트 프리로드 -->

    <meta
      name="description"
      content="AI가 해석하는 정확한 타로 리딩. 사랑, 직업, 미래에 대한 질문에 타로 카드가 답해드립니다."
    />
    <meta name="robots" content="index, follow" />
    <meta name="author" content="doha.kr" />

    <!-- Security Headers -->
    <meta
      http-equiv="Content-Security-Policy"
      content="upgrade-insecure-requests; default-src 'self' https:; script-src 'unsafe-inline' 'self' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://cdn.jsdelivr.net; style-src 'unsafe-inline' 'self' https://fonts.googleapis.com https://cdn.jsdelivr.net; font-src 'self' https://fonts.gstatic.com https://cdn.jsdelivr.net data:; img-src 'self' data: https:; connect-src 'self' https: https://doha-kr-ap.vercel.app; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com;"
    />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />

    <!-- Open Graph -->
    <meta property="og:title" content="AI 타로 리딩 - 무료 온라인 타로 | doha.kr" />
    <meta property="og:description" content="AI가 해석하는 정확한 타로 리딩" />
    <meta property="og:image" content="https://doha.kr/images/tarot-og.jpg" />
    <meta property="og:url" content="https://doha.kr/fortune/tarot/" />
    <meta property="og:type" content="website" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://doha.kr/fortune/tarot/" />

    <!-- Preconnect for Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="dns-prefetch" href="https://pagead2.googlesyndication.com" />
    <link rel="dns-prefetch" href="https://developers.kakao.com" />

    <!-- Pretendard Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Main CSS -->
    <!-- CSS Bundle - Automatically selects development or production version -->
    <link rel="stylesheet" href="../../dist/styles.min.css" id="main-styles" />

    <!-- Page Data Attributes -->
    <script>
      document.documentElement.dataset.page = 'fortune-tarot';
    </script>
  </head>
  <body class="fortune-page" data-page="fortune-tarot">
    <!-- 네비게이션 -->
    <div id="navbar-placeholder"></div>

    <!-- 페이지 헤더 -->
    <section class="page-header">
      <div class="container">
        <h1 class="page-title fade-in">🃏 AI 타로 리딩</h1>
        <p class="page-subtitle fade-in stagger-1">
          고민이나 궁금한 점을 물어보세요. AI가 타로 카드로 답을 찾아드립니다.
        </p>
      </div>
    </section>

    <!-- 타로 리딩 입력 폼 -->
    <section class="fortune-section" aria-labelledby="tarot-form-title">
      <div class="container">
        <div class="fortune-form-container" id="tarotForm">
          <h2 id="tarot-form-title">타로 카드에게 질문하고 싶은 것을 입력해주세요</h2>
          <form data-form="tarot-reading" aria-label="타로 리딩 질문 입력 폼">
            <div class="form-group">
              <label for="userName" class="form-label">
                이름
                <span aria-label="필수">*</span>
              </label>
              <input
                type="text"
                id="userName"
                name="userName"
                class="form-control"
                placeholder="홍길동"
                required
                aria-required="true"
                aria-describedby="userName-desc"
              />
              <span id="userName-desc" class="visually-hidden">타로 리딩에 표시될 이름을 입력해주세요</span>
            </div>

            <div class="form-group">
              <label for="question" class="form-label">
                질문
                <span aria-label="필수">*</span>
              </label>
              <textarea
                id="question"
                name="question"
                class="form-control"
                rows="4"
                placeholder="예: 새로운 직장으로의 이직이 좋을까요?"
                required
                aria-required="true"
                aria-describedby="question-desc"
              ></textarea>
              <span id="question-desc" class="form-text">구체적이고 명확한 질문을 할수록 더 정확한 답을 얻을 수 있습니다.</span>
            </div>

            <div class="form-group">
              <fieldset>
                <legend class="form-label">스프레드 선택</legend>
                <div class="radio-group" role="radiogroup" aria-describedby="spread-desc">
                  <label class="form-check">
                    <input type="radio" name="spread" value="oneCard" class="form-check-input" checked aria-describedby="onecard-desc" />
                    <span class="form-check-label">원 카드 (간단한 답변)</span>
                  </label>
                  <label class="form-check">
                    <input type="radio" name="spread" value="threeCard" class="form-check-input" aria-describedby="threecard-desc" />
                    <span class="form-check-label">쓰리 카드 (과거-현재-미래)</span>
                  </label>
                  <label class="form-check">
                    <input type="radio" name="spread" value="celtic" class="form-check-input" aria-describedby="celtic-desc" />
                    <span class="form-check-label">켈틱 크로스 (상세 분석)</span>
                  </label>
                </div>
                <div id="spread-desc" class="form-text">스프레드에 따라 카드 수와 해석 방식이 달라집니다.</div>
              </fieldset>
            </div>

            <div id="spreadDescription" class="spread-description d-none-init" role="region" aria-live="polite"></div>

            <button type="submit" class="btn btn-primary btn-lg" aria-label="입력한 질문으로 타로 카드 리딩 시작하기">
              🎴 타로 카드 뽑기
            </button>
          </form>
        </div>

        <!-- 타로 결과 -->
        <div id="tarotResult" class="d-none-init" role="region" aria-label="타로 리딩 결과" aria-live="polite">
          <!-- 결과가 여기에 표시됩니다 -->
        </div>
      </div>
    </section>

    <!-- 광고 영역 -->
    <aside class="ad-container" aria-label="광고 영역">
      <div class="ad-label">광고</div>
      <div id="ad-container-tarot" class="ad-container-min" data-ad-slot="2789891628">
        <div class="ad-placeholder ad-container-styled">광고 로딩 중...</div>
      </div>
    </aside>

    <!-- 푸터 -->
    <footer class="footer" role="contentinfo" aria-label="사이트 정보">
      <div class="footer-content">
        <div class="footer-section">
          <h3>doha.kr</h3>
          <p class="text-gray-400 mt-8">
            일상을 더 재미있게 만드는 공간
            <br />
            심리테스트, 운세, 실용도구의 만남
          </p>
          <div class="footer-social">
            <a href="mailto:youtubdoha@gmail.com" class="social-link">📧</a>
          </div>
        </div>

        <div class="footer-section">
          <h3>서비스</h3>
          <ul class="footer-links">
            <li><a href="../../">홈</a></li>
            <li><a href="../../tests/">심리테스트</a></li>
            <li><a href="../../fortune/">운세</a></li>
            <li><a href="../../tools/">실용도구</a></li>
            <li><a href="../../about/">사이트 소개</a></li>
          </ul>
        </div>

        <div class="footer-section">
          <h3>인기 콘텐츠</h3>
          <ul class="footer-links">
            <li><a href="../../tests/teto-egen/">테토-에겐 테스트</a></li>
            <li><a href="../../tests/mbti/">MBTI 테스트</a></li>
            <li><a href="../../fortune/daily/">오늘의 운세</a></li>
            <li><a href="../../tools/text-counter.html">글자수 세기</a></li>
          </ul>
        </div>

        <div class="footer-section">
          <h3>운세 서비스</h3>
          <ul class="footer-links">
            <li><a href="../../fortune/daily/">오늘의 운세</a></li>
            <li><a href="../../fortune/zodiac/">별자리 운세</a></li>
            <li><a href="../../fortune/zodiac-animal/">띠별 운세</a></li>
            <li><a href="../../fortune/tarot/">AI 타로</a></li>
          </ul>
        </div>

        <div class="footer-section">
          <h3>고객지원</h3>
          <ul class="footer-links">
            <li><a href="../../contact/">문의하기</a></li>
            <li><a href="../../faq/">자주 묻는 질문</a></li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <div class="footer-legal">
          <a href="../../privacy/">개인정보처리방침</a>
          <a href="../../terms/">이용약관</a>
        </div>
        <p>&copy; 2025 doha.kr. All rights reserved.</p>
      </div>
    </footer>

    <!-- Core JavaScript -->
    <script type="module" src="../../js/app.js"></script>
    <script type="module" src="../../js/core/service-base.js"></script>

    <!-- Feature JavaScript -->
    <script type="module" src="../../js/api-config.js"></script>
    <script type="module" src="../../js/features/fortune/fortune-service.js"></script>
    <script type="module" src="../../js/features/fortune/tarot-fortune.js"></script>

    <!-- External SDKs (지연 로딩) -->
    <script async src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.4/kakao.min.js"></script>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7905640648499222"
      crossorigin="anonymous"
    ></script>
    <script
      async
      src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"
      integrity="sha512-H+rglffZ6f5gF7UJgvH4Naa+fGCgjrHKMgoFOGmcPTRwR6oILo5R+gtzNrpDp7iMV3udbymBVjkeZGNz1Em4rQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <!-- Tarot Fortune Initialization -->
    <script type="module">
      // 타로 리딩 서비스 초기화
      import { TarotFortuneService } from '../../js/features/fortune/tarot-fortune.js';
      
      let tarotFortuneService;
      
      document.addEventListener('DOMContentLoaded', async () => {
        try {
          console.log('🃏 타로 리딩 초기화 시작');
          
          // TarotFortuneService 인스턴스 생성
          tarotFortuneService = new TarotFortuneService();
          console.log('✅ 타로 리딩 서비스 생성됨');
          
          // 폼 제출 이벤트 연결
          const form = document.querySelector('form[data-form="tarot-reading"]');
          if (form) {
            form.addEventListener('submit', handleTarotSubmit);
            console.log('✅ 폼 이벤트 연결됨');
          }
          
          // 스프레드 선택 이벤트 연결
          const spreadInputs = document.querySelectorAll('input[name="spread"]');
          spreadInputs.forEach(input => {
            input.addEventListener('change', updateSpreadDescription);
          });
          
          // 초기 스프레드 설명 표시
          updateSpreadDescription();
          
        } catch (error) {
          console.error('❌ 타로 리딩 초기화 실패:', error);
        }
      });
      
      function updateSpreadDescription() {
        const selectedSpread = document.querySelector('input[name="spread"]:checked')?.value;
        const descriptionElement = document.getElementById('spreadDescription');
        
        if (!descriptionElement) return;
        
        const descriptions = {
          oneCard: {
            title: '원 카드 스프레드',
            description: '하나의 카드로 질문에 대한 직접적이고 명확한 답을 제공합니다. 간단한 Yes/No 질문이나 현재 상황에 대한 조언을 구할 때 적합합니다.'
          },
          threeCard: {
            title: '쓰리 카드 스프레드',
            description: '과거, 현재, 미래를 나타내는 세 장의 카드로 상황의 전체적인 흐름을 파악합니다. 문제의 원인과 해결 방향을 종합적으로 볼 수 있습니다.'
          },
          celtic: {
            title: '켈틱 크로스 스프레드',
            description: '10장의 카드를 사용하는 가장 상세한 스프레드입니다. 현재 상황, 도전 과제, 과거 영향, 가능한 미래, 내면의 감정, 외부 환경 등을 종합적으로 분석합니다.'
          }
        };
        
        if (selectedSpread && descriptions[selectedSpread]) {
          const { title, description } = descriptions[selectedSpread];
          descriptionElement.innerHTML = `
            <h4>${title}</h4>
            <p>${description}</p>
          `;
          descriptionElement.classList.remove('d-none-init');
        }
      }
      
      async function handleTarotSubmit(event) {
        event.preventDefault();
        
        try {
          console.log('🃏 타로 리딩 시작');
          
          // 폼 데이터 수집
          const formData = new FormData(event.target);
          const userData = {
            name: formData.get('userName'),
            question: formData.get('question'),
            spread: formData.get('spread') || 'oneCard'
          };
          
          // 입력 검증
          if (!userData.name || !userData.question) {
            alert('이름과 질문을 모두 입력해주세요.');
            return;
          }
          
          if (userData.question.length < 5) {
            alert('더 구체적인 질문을 입력해주세요.');
            return;
          }
          
          console.log('📋 타로 리딩 데이터:', userData);
          
          // 타로 리딩 실행
          await tarotFortuneService.generateFortune(userData);
          
        } catch (error) {
          console.error('❌ 타로 리딩 실패:', error);
          alert('타로 리딩 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요.');
        }
      }
      
      // 전역 접근을 위한 설정
      window.tarotFortuneService = tarotFortuneService;
    </script>

    <!-- Core JavaScript Modules -->
    <script type="module" src="../../js/app.js"></script>
    <script type="module" src="../../js/features/fortune/tarot-fortune.js"></script>
    
    <!-- Tarot Fortune Initialization -->
    <script type="module">
      import { TarotFortuneService } from '../../js/features/fortune/tarot-fortune.js';
      
      // Initialize service when DOM is ready
      document.addEventListener('DOMContentLoaded', function() {
        console.log('🔮 Tarot Fortune Service 초기화 시작');
        window.tarotFortuneService = new TarotFortuneService();
        console.log('✅ Tarot Fortune Service 준비됨');
      });
    </script>

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "AI 타로 리딩",
        "url": "https://doha.kr/fortune/tarot/",
        "applicationCategory": "Entertainment",
        "operatingSystem": "All",
        "description": "AI가 해석하는 정확한 타로 카드 리딩 서비스",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "KRW"
        }
      }
    </script>
  </body>
</html>
