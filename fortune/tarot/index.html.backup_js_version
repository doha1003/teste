<!DOCTYPE html>
<html lang="ko">
<head>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI íƒ€ë¡œ ë¦¬ë”© - AI ìš´ì„¸ | doha.kr</title>
    <meta name="description" content="ì§ˆë¬¸ì„ ì…ë ¥í•˜ë©´ AIê°€ íƒ€ë¡œ ì¹´ë“œë¥¼ ë½‘ì•„ ì‹¬ì¸µì ì¸ í•´ì„ì„ ì œê³µí•©ë‹ˆë‹¤.">
    <meta name="robots" content="index, follow">
    <meta name="author" content="doha.kr">
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), payment=(), usb=(), magnetometer=(), accelerometer=(), gyroscope=()">
    
    <!-- Open Graph -->
    <meta property="og:title" content="AI íƒ€ë¡œ ë¦¬ë”© | doha.kr">
    <meta property="og:description" content="ì§ˆë¬¸ì„ ì…ë ¥í•˜ë©´ AIê°€ íƒ€ë¡œ ì¹´ë“œë¥¼ ë½‘ì•„ ì‹¬ì¸µì ì¸ í•´ì„ì„ ì œê³µí•©ë‹ˆë‹¤.">
    <meta property="og:image" content="https://doha.kr/images/egen-male-card.jpg">
    <meta property="og:url" content="https://doha.kr/fortune/tarot/">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" crossorigin href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Google AdSense -->
    <!-- Moved to end of body -->
    <!-- Optimized CSS System -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/pages/tarot.css">

    <meta http-equiv="X-Content-Type-Options" content="nosniff">

    <script id="performance-monitor">

    window.addEventListener('load', function() {
        if (window.performance && window.performance.timing) {
            const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
            if (loadTime > 5000) {
                console.warn('Page loading is slow:', loadTime + 'ms');
            }
        }
    });
    </script>
</head>
<body class="fortune-page">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <div id="navbar-placeholder"></div>
    
    <!-- í˜ì´ì§€ í—¤ë” -->
    <section class="page-header">
        <div class="container">
            <h1 class="page-title fade-in">AI íƒ€ë¡œ ë¦¬ë”©</h1>
            <p class="page-subtitle fade-in stagger-1">
                AIê°€ í•´ì„í•˜ëŠ” ì‹ ë¹„ë¡œìš´ íƒ€ë¡œ ì¹´ë“œì˜ ë©”ì‹œì§€
            </p>
        </div>
    </section>
    
    <!-- íƒ€ë¡œ ë¦¬ë”© ì„¹ì…˜ -->
    <section class="tarot-section">
        <div class="container">
            <div id="tarotForm" class="tarot-form">
                <h2 style="text-align: center; margin-bottom: 32px;">íƒ€ë¡œ ë¦¬ë”© ì‹œì‘í•˜ê¸°</h2>
                
                <div class="form-group">
                    <label for="question">ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”</label>
                    <textarea 
                        id="question" 
                        name="question" 
                        class="form-control" 
                        rows="4" 
                        required 
                        placeholder="íƒ€ë¡œì—ê²Œ ë¬»ê³  ì‹¶ì€ ì§ˆë¬¸ì„ êµ¬ì²´ì ìœ¼ë¡œ ì ì–´ì£¼ì„¸ìš”. ì˜ˆ: í˜„ì¬ ì—°ì•  ê´€ê³„ê°€ ì–´ë–»ê²Œ ë°œì „í• ê¹Œìš”?"
                    ></textarea>
                </div>
                
                <div class="form-group">
                    <label for="spreadType">ìŠ¤í”„ë ˆë“œ ì„ íƒ</label>
                    <select id="spreadType" name="spreadType" class="form-control">
                        <option value="oneCard">ì› ì¹´ë“œ (1ì¥) - ê°„ë‹¨í•œ ì§ˆë¬¸</option>
                        <option value="threeCard">ì“°ë¦¬ ì¹´ë“œ (3ì¥) - ê³¼ê±°/í˜„ì¬/ë¯¸ë˜</option>
                        <option value="celtic">ì¼ˆí‹± í¬ë¡œìŠ¤ (10ì¥) - ìƒì„¸í•œ ë¶„ì„</option>
                    </select>
                </div>
                
                <button type="button" onclick="startTarotReading()" class="btn btn-primary" style="width: 100%; margin-top: 24px;">
                    ğŸ”® íƒ€ë¡œ ë¦¬ë”© ì‹œì‘
                </button>
            </div>
            
            <!-- íƒ€ë¡œ ê²°ê³¼ ì˜ì—­ -->
            <div id="tarotResult" class="tarot-result" style="display: none;">
                <!-- ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </section>
    
    <!-- íƒ€ë¡œ ì•ˆë‚´ ì„¹ì…˜ -->
    <section class="info-section">
        <div class="container">
            <div class="info-box">
                <h3>AI íƒ€ë¡œ ë¦¬ë”© ì•ˆë‚´</h3>
                <ul>
                    <li>íƒ€ë¡œ ì¹´ë“œëŠ” í˜„ì¬ ìƒí™©ì— ëŒ€í•œ í†µì°°ê³¼ ê°€ì´ë“œë¥¼ ì œê³µí•©ë‹ˆë‹¤.</li>
                    <li>ì§ˆë¬¸ì€ êµ¬ì²´ì ì¼ìˆ˜ë¡ ë” ëª…í™•í•œ ë‹µë³€ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                    <li>ì¹´ë“œì˜ í•´ì„ì€ ì°¸ê³ ìš©ì´ë©°, ìµœì¢… ê²°ì •ì€ ë³¸ì¸ì´ ë‚´ë¦¬ì…”ì•¼ í•©ë‹ˆë‹¤.</li>
                    <li>ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ 22ì¥ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ë”©ì„ ì§„í–‰í•©ë‹ˆë‹¤.</li>
                    <li>AIê°€ ì‹¤ì œë¡œ ë¶„ì„í•˜ì—¬ ê°œì¸í™”ëœ í•´ì„ì„ ì œê³µí•©ë‹ˆë‹¤.</li>
                </ul>
            </div>
        </div>
    </section>
    
    <!-- ê´‘ê³  ì˜ì—­ -->
    <div class="ad-container">
        <div class="ad-label">ê´‘ê³ </div>
        
<div id="ad-container-ewz82l37p" style="min-height: 100px;">
    <div class="ad-placeholder" style="display: flex; align-items: center; justify-content: center; background: #f5f5f5; min-height: 100px; color: #999;">
        ê´‘ê³  ë¡œë”© ì¤‘...
    </div>
</div>
<script>

if ('IntersectionObserver' in window) {
    const adObserver = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                const container = entry.target;
                container.innerHTML = `<ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-7905640648499222"
             data-ad-slot="2789891628"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>`;
                if (typeof adsbygoogle !== 'undefined') {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                }
                adObserver.unobserve(container);
            }
        });
    }, { rootMargin: '50px' });
    
    const adContainer = document.getElementById('ad-container-ewz82l37p');
    if (adContainer) {
        adObserver.observe(adContainer);
    }
}
</script>
    </div>
    
    <!-- í‘¸í„° -->
    <div id="footer-placeholder"></div>
    
    <!-- External JavaScript -->
    <script src="/js/main.js?v=1753150228"></script>
    <script src="/js/api-config.js?v=1753150228"></script>
    
    <script>
        // ì¹´ì¹´ì˜¤ ì´ˆê¸°í™”
        if (window.initKakao) {
            window.initKakao();
        }
    </script>
    
    <script>

        const majorArcana = [
            { id: 0, name: "The Fool", korean: "ë°”ë³´", meaning: "ìƒˆë¡œìš´ ì‹œì‘, ìˆœìˆ˜í•¨, ëª¨í—˜", reversed: "ë¬´ëª¨í•¨, ê²½ì†”í•¨, ë°©í–¥ê°ê° ìƒì‹¤" },
            { id: 1, name: "The Magician", korean: "ë§ˆë²•ì‚¬", meaning: "ì˜ì§€ë ¥, ì°½ì¡°ë ¥, ëŠ¥ë ¥", reversed: "ì†ì„ìˆ˜, ëŠ¥ë ¥ ë¶€ì¡±, ìë§Œì‹¬" },
            { id: 2, name: "The High Priestess", korean: "ì—¬êµí™©", meaning: "ì§ê´€, ì‹ ë¹„, ë‚´ë©´ì˜ ì§€í˜œ", reversed: "ë¹„ë°€, ë¬´ì§€, í‘œë©´ì  ì§€ì‹" },
            { id: 3, name: "The Empress", korean: "ì—¬í™©ì œ", meaning: "í’ìš”, ì°½ì¡°, ëª¨ì„±", reversed: "ì˜ì¡´, ê³¼ë³´í˜¸, ì°½ì¡°ë ¥ ë¶€ì¡±" },
            { id: 4, name: "The Emperor", korean: "í™©ì œ", meaning: "ê¶Œìœ„, ì•ˆì •, ì§€ë°°", reversed: "ë…ë‹¨, ê²½ì§, í­ì •" },
            { id: 5, name: "The Hierophant", korean: "êµí™©", meaning: "ì „í†µ, ì¢…êµ, êµìœ¡", reversed: "ë…ë‹¨, í˜•ì‹ì£¼ì˜, ë°˜í•­" },
            { id: 6, name: "The Lovers", korean: "ì—°ì¸", meaning: "ì‚¬ë‘, ì„ íƒ, ê²°í•©", reversed: "ë¶„ë¦¬, ê°ˆë“±, ì˜ëª»ëœ ì„ íƒ" },
            { id: 7, name: "The Chariot", korean: "ì „ì°¨", meaning: "ì˜ì§€, ìŠ¹ë¦¬, í†µì œ", reversed: "íŒ¨ë°°, ë°©í–¥ê°ê° ìƒì‹¤, í†µì œ ë¶ˆëŠ¥" },
            { id: 8, name: "Strength", korean: "í˜", meaning: "ìš©ê¸°, ì¸ë‚´, ë‚´ì  í˜", reversed: "ì•½í•¨, ì˜ì‹¬, ìì œë ¥ ë¶€ì¡±" },
            { id: 9, name: "The Hermit", korean: "ì€ë‘”ì", meaning: "ì„±ì°°, ë‚´ì  ì¸ë„, ì§€í˜œ", reversed: "ê³ ë¦½, ì™¸ë¡œì›€, ê±°ë¶€" },
            { id: 10, name: "Wheel of Fortune", korean: "ìš´ëª…ì˜ ë°”í€´", meaning: "ë³€í™”, ìš´ëª…, ê¸°íšŒ", reversed: "ë¶ˆìš´, í†µì œ ë¶ˆëŠ¥, ì•…ìˆœí™˜" },
            { id: 11, name: "Justice", korean: "ì •ì˜", meaning: "ê³µì •, ê· í˜•, ì§„ì‹¤", reversed: "ë¶ˆê³µì •, í¸ê²¬, ê±°ì§“" },
            { id: 12, name: "The Hanged Man", korean: "ë§¤ë‹¬ë¦° ì‚¬ëŒ", meaning: "í¬ìƒ, ìƒˆë¡œìš´ ê´€ì , ê¸°ë‹¤ë¦¼", reversed: "í—›ëœ í¬ìƒ, ì§€ì—°, ì´ê¸°ì‹¬" },
            { id: 13, name: "Death", korean: "ì£½ìŒ", meaning: "ë³€í™”, ì¬ìƒ, ëê³¼ ì‹œì‘", reversed: "ì •ì²´, ë³€í™”ì— ëŒ€í•œ ì €í•­" },
            { id: 14, name: "Temperance", korean: "ì ˆì œ", meaning: "ì¡°í™”, ê· í˜•, ì ˆì œ", reversed: "ë¶ˆê· í˜•, ê³¼ë„í•¨, ë¶ˆí™”" },
            { id: 15, name: "The Devil", korean: "ì•…ë§ˆ", meaning: "ìœ í˜¹, ì†ë°•, ë¬¼ì§ˆì£¼ì˜", reversed: "í•´ë°©, ê¹¨ë‹¬ìŒ, ììœ " },
            { id: 16, name: "The Tower", korean: "íƒ‘", meaning: "íŒŒê´´, ê°‘ì‘ìŠ¤ëŸ° ë³€í™”, ê¹¨ë‹¬ìŒ", reversed: "í”¼í•  ìˆ˜ ìˆëŠ” ì¬ì•™, ë‚´ì  ë³€í™”" },
            { id: 17, name: "The Star", korean: "ë³„", meaning: "í¬ë§, ì˜ê°, ì¹˜ìœ ", reversed: "ì ˆë§, í™˜ë©¸, ì˜ê° ë¶€ì¡±" },
            { id: 18, name: "The Moon", korean: "ë‹¬", meaning: "í™˜ìƒ, ë¶ˆì•ˆ, ë¬´ì˜ì‹", reversed: "í˜¼ë€ í•´ì†Œ, ì§„ì‹¤ ë°œê²¬" },
            { id: 19, name: "The Sun", korean: "íƒœì–‘", meaning: "ê¸°ì¨, ì„±ê³µ, í™œë ¥", reversed: "ê³¼ì‹ , ì˜¤ë§Œ, ì—ë„ˆì§€ ë¶€ì¡±" },
            { id: 20, name: "Judgement", korean: "ì‹¬íŒ", meaning: "ë¶€í™œ, ê¹¨ë‹¬ìŒ, ìš©ì„œ", reversed: "í›„íšŒ, ìê¸° ë¹„íŒ, ìš©ì„œ ë¶€ì¡±" },
            { id: 21, name: "The World", korean: "ì„¸ê³„", meaning: "ì™„ì„±, ì„±ì·¨, í†µí•©", reversed: "ë¯¸ì™„ì„±, ì¢Œì ˆ, ë¶€ì¡±í•¨" }
        ];

        const spreads = {
            oneCard: { name: "ì› ì¹´ë“œ", count: 1, positions: ["í˜„ì¬ ìƒí™©"] },
            threeCard: { name: "ì“°ë¦¬ ì¹´ë“œ", count: 3, positions: ["ê³¼ê±°", "í˜„ì¬", "ë¯¸ë˜"] },
            celtic: { name: "ì¼ˆí‹± í¬ë¡œìŠ¤", count: 10, positions: ["í˜„ì¬ ìƒí™©", "ë„ì „/ì‹­ìê°€", "ë¨¼ ê³¼ê±°", "ê°€ê¹Œìš´ ê³¼ê±°", "ê°€ëŠ¥í•œ ë¯¸ë˜", "ê°€ê¹Œìš´ ë¯¸ë˜", "ìì‹ ", "ì™¸ë¶€ ì˜í–¥", "í¬ë§ê³¼ ë‘ë ¤ì›€", "ìµœì¢… ê²°ê³¼"] }
        };
        
        // Initialize page functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listener to question textarea
            const questionTextarea = document.getElementById('question');
            if (questionTextarea) {
                questionTextarea.addEventListener('input', function() {
                    // Enable/disable submit button based on input
                    const submitBtn = document.querySelector('button[onclick="startTarotReading()"]');
                    if (submitBtn) {
                        submitBtn.disabled = this.value.trim().length < 10;
                    }
                });
                
                questionTextarea.addEventListener('focus', function() {
                    this.style.borderColor = '#6c5ce7';
                });
                
                questionTextarea.addEventListener('blur', function() {
                    this.style.borderColor = '';
                });
            }
        });
        
        async function startTarotReading() {
            const question = document.getElementById('question').value.trim();
            const spreadType = document.getElementById('spreadType').value;
            
            if (!question) {
                alert('ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            document.getElementById('tarotForm').style.display = 'none';

            const resultDiv = document.getElementById('tarotResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = `
                <div class="tarot-ai-analyzing">
                    ğŸ”® AIê°€ íƒ€ë¡œ ì¹´ë“œë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...
                    <div class="fortune-loading-info">
                        ì§ˆë¬¸: "${question}"
                    </div>
                </div>
            `;
            
            try {

                const cards = drawCards(question, spreadType);

                const aiAnalysis = await generateTarotAnalysisWithAI(question, cards, spreadType);

                displayTarotResult(question, cards, spreadType, aiAnalysis);
                
            } catch (error) {
                console.error('íƒ€ë¡œ ë¶„ì„ ì˜¤ë¥˜:', error);

                const cards = drawCards(question, spreadType);
                const fallbackAnalysis = generateFallbackAnalysis(question, cards, spreadType);
                displayTarotResult(question, cards, spreadType, fallbackAnalysis);
            }
        }
        
        function drawCards(question, spreadType) {
            const spread = spreads[spreadType];
            const cards = [];

            const seed = generateSeed(question);
            
            for (let i = 0; i < spread.count; i++) {
                const cardIndex = Math.floor(seededRandom(seed + i) * majorArcana.length);
                const isReversed = seededRandom(seed + i + 100) < 0.25; // 25% í™•ë¥ ë¡œ ì—­ë°©í–¥
                
                cards.push({
                    ...majorArcana[cardIndex],
                    reversed: isReversed,
                    position: spread.positions[i]
                });
            }
            
            return cards;
        }
        
        function generateSeed(text) {
            let hash = 0;
            for (let i = 0; i < text.length; i++) {
                const char = text.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // 32ë¹„íŠ¸ ì •ìˆ˜ë¡œ ë³€í™˜
            }
            return Math.abs(hash);
        }
        
        function seededRandom(seed) {
            const x = Math.sin(seed) * 10000;
            return x - Math.floor(x);
        }

        async function generateTarotAnalysisWithAI(question, cards, spreadType) {
            const spread = spreads[spreadType];
            const cardDescriptions = cards.map(card => 
                `${card.position}: ${card.korean}(${card.name}) ${card.reversed ? 'ì—­ë°©í–¥' : 'ì •ë°©í–¥'}`
            ).join(', ');
            
            const prompt = `ë‹¹ì‹ ì€ ì „ë¬¸ íƒ€ë¡œ ë¦¬ë”ì…ë‹ˆë‹¤. ë‹¤ìŒ ì§ˆë¬¸ê³¼ ë½‘íŒ ì¹´ë“œë“¤ì„ ë°”íƒ•ìœ¼ë¡œ ìƒì„¸í•œ íƒ€ë¡œ ë¦¬ë”©ì„ í•´ì£¼ì„¸ìš”.

ì§ˆë¬¸: "${question}"
ìŠ¤í”„ë ˆë“œ: ${spread.name}
ë½‘íŒ ì¹´ë“œë“¤: ${cardDescriptions}

ë‹¤ìŒ í˜•ì‹ìœ¼ë¡œ ì‘ë‹µí•´ì£¼ì„¸ìš”:
{
  "overall": "ì „ì²´ì ì¸ ë©”ì‹œì§€ (100-200ì)",
  "cardAnalysis": [
    {
      "position": "í¬ì§€ì…˜ëª…",
      "interpretation": "í•´ë‹¹ ì¹´ë“œì˜ ìƒì„¸í•œ í•´ì„ (80-120ì)"
    }
  ],
  "advice": "êµ¬ì²´ì ì¸ ì¡°ì–¸ (100-150ì)",
  "futureGuidance": "ë¯¸ë˜ì— ëŒ€í•œ ê°€ì´ë“œ (80-120ì)"
}

ì¹´ë“œì˜ ì˜ë¯¸ë¥¼ ì§ˆë¬¸ê³¼ ì—°ê²°í•˜ì—¬ ê°œì¸í™”ëœ í•´ì„ì„ ì œê³µí•˜ê³ , ì‹¤ìš©ì ì¸ ì¡°ì–¸ì„ í¬í•¨í•´ì£¼ì„¸ìš”.`;

            try {
                const aiResponse = await callGeminiAPI(prompt);
                
                if (aiResponse) {
                    const cleanResponse = aiResponse.replace(/```json|```/g, '').trim();
                    const parsed = JSON.parse(cleanResponse);
                    return parsed;
                }
            } catch (error) {
                console.error('AI ë¶„ì„ íŒŒì‹± ì˜¤ë¥˜:', error);
            }
            
            return null;
        }
        
        function generateFallbackAnalysis(question, cards, spreadType) {
            const spread = spreads[spreadType];
            
            const cardAnalysis = cards.map(card => ({
                position: card.position,
                interpretation: generateCardInterpretation(card, question)
            }));
            
            return {
                overall: `${spread.name} ë¦¬ë”©ì—ì„œ ë‚˜íƒ€ë‚œ ë©”ì‹œì§€ëŠ” ë³€í™”ì™€ ì„±ì¥ì˜ ì—ë„ˆì§€ì…ë‹ˆë‹¤. ì¹´ë“œë“¤ì´ ë‹¹ì‹ ì˜ ì§ˆë¬¸ì— ëŒ€í•œ ê¹Šì€ í†µì°°ì„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.`,
                cardAnalysis: cardAnalysis,
                advice: "ì¹´ë“œì˜ ë©”ì‹œì§€ë¥¼ ë§ˆìŒì— ìƒˆê¸°ê³ , ì§ê´€ì„ ë¯¿ìœ¼ë©° í–‰ë™í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. ëª¨ë“  ë³€í™”ëŠ” ì„±ì¥ì˜ ê¸°íšŒì…ë‹ˆë‹¤.",
                futureGuidance: "ê¸ì •ì ì¸ ë§ˆìŒê°€ì§ìœ¼ë¡œ ë‹¤ê°€ì˜¬ ë³€í™”ë¥¼ ë°›ì•„ë“¤ì´ì„¸ìš”. ë‹¹ì‹ ì˜ ë‚´ì  ì§€í˜œê°€ ì˜¬ë°”ë¥¸ ê¸¸ì„ ì•Œë ¤ì¤„ ê²ƒì…ë‹ˆë‹¤."
            };
        }
        
        function generateCardInterpretation(card, question) {
            const interpretations = {
                0: "ìƒˆë¡œìš´ ì‹œì‘ì„ ì•ë‘ê³  ìˆìŠµë‹ˆë‹¤. ìš©ê¸°ë¥¼ ë‚´ì–´ ì²« ë°œì„ ë‚´ë”›ìœ¼ì„¸ìš”.",
                1: "ë‹¹ì‹ ì—ê²ŒëŠ” ì›í•˜ëŠ” ê²ƒì„ ì´ë£° ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤. ìì‹ ê°ì„ ê°€ì§€ì„¸ìš”.",
                2: "ì§ê°ì„ ë¯¿ìœ¼ì„¸ìš”. ë‚´ë©´ì˜ ëª©ì†Œë¦¬ê°€ ì˜¬ë°”ë¥¸ ê¸¸ì„ ì•Œë ¤ì¤„ ê²ƒì…ë‹ˆë‹¤.",
                3: "í’ìš”ë¡œìš´ ì‹œê¸°ê°€ ë‹¤ê°€ì˜¤ê³  ìˆìŠµë‹ˆë‹¤. ì°½ì¡°ì ì¸ ì—ë„ˆì§€ë¥¼ ë°œíœ˜í•˜ì„¸ìš”.",
                4: "ì•ˆì •ê³¼ ì§ˆì„œê°€ í•„ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ê³„íšì„ ì„¸ìš°ê³  ì‹¤í–‰í•˜ì„¸ìš”.",
                5: "ì „í†µì ì¸ ë°©ë²•ì´ë‚˜ ì¡°ì–¸ì„ êµ¬í•˜ëŠ” ê²ƒì´ ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤.",
                6: "ì¤‘ìš”í•œ ì„ íƒì˜ ê¸°ë¡œì— ì„œ ìˆìŠµë‹ˆë‹¤. ë§ˆìŒì˜ ì†Œë¦¬ë¥¼ ë“¤ìœ¼ì„¸ìš”.",
                7: "ì˜ì§€ë ¥ìœ¼ë¡œ ì–´ë ¤ì›€ì„ ê·¹ë³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš”.",
                8: "ë‚´ì  í˜ì„ ë°œíœ˜í•  ë•Œì…ë‹ˆë‹¤. ìš©ê¸°ì™€ ì¸ë‚´ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
                9: "í˜¼ìë§Œì˜ ì‹œê°„ì„ í†µí•´ ë‹µì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„±ì°°ì´ í•„ìš”í•©ë‹ˆë‹¤.",
                10: "ìš´ëª…ì˜ ë³€í™”ê°€ ë‹¤ê°€ì˜¤ê³  ìˆìŠµë‹ˆë‹¤. ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”.",
                11: "ê³µì •í•˜ê³  ê· í˜• ì¡íŒ íŒë‹¨ì´ í•„ìš”í•©ë‹ˆë‹¤. ì§„ì‹¤ì„ ì§ì‹œí•˜ì„¸ìš”.",
                12: "ìƒˆë¡œìš´ ê´€ì ì´ í•„ìš”í•©ë‹ˆë‹¤. ê¸°ë‹¤ë¦¼ì˜ ì‹œê°„ì„ ê²¬ë””ì„¸ìš”.",
                13: "ë³€í™”ì™€ ì¬ìƒì˜ ì‹œê¸°ì…ë‹ˆë‹¤. ê³¼ê±°ë¥¼ ë†“ì•„ì£¼ì„¸ìš”.",
                14: "ì¡°í™”ì™€ ê· í˜•ì„ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤. ê·¹ë‹¨ì„ í”¼í•˜ì„¸ìš”.",
                15: "ìœ í˜¹ì´ë‚˜ ì†ë°•ì—ì„œ ë²—ì–´ë‚˜ì•¼ í•©ë‹ˆë‹¤. ììœ ë¥¼ ì°¾ìœ¼ì„¸ìš”.",
                16: "ê°‘ì‘ìŠ¤ëŸ° ë³€í™”ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤€ë¹„ë¥¼ ê°–ì¶”ì„¸ìš”.",
                17: "í¬ë§ê³¼ ì¹˜ìœ ì˜ ì‹œê¸°ì…ë‹ˆë‹¤. ê¿ˆì„ í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš”.",
                18: "í˜¼ë€ìŠ¤ëŸ¬ìš´ ìƒí™©ì…ë‹ˆë‹¤. ì°¨ë¶„íˆ ì§„ì‹¤ì„ ì°¾ìœ¼ì„¸ìš”.",
                19: "ì„±ê³µê³¼ ê¸°ì¨ì´ ê°€ë“í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ê¸ì •ì ìœ¼ë¡œ ìƒê°í•˜ì„¸ìš”.",
                20: "ê³¼ê±°ë¥¼ ì •ë¦¬í•˜ê³  ìƒˆë¡œìš´ ì‹œì‘ì„ ì¤€ë¹„í•˜ì„¸ìš”.",
                21: "ëª©í‘œ ë‹¬ì„±ì´ ê°€ê¹Œì›Œì¡ŒìŠµë‹ˆë‹¤. ëê¹Œì§€ ìµœì„ ì„ ë‹¤í•˜ì„¸ìš”."
            };
            
            let interpretation = interpretations[card.id] || "ì¹´ë“œê°€ ë‹¹ì‹ ì—ê²Œ íŠ¹ë³„í•œ ë©”ì‹œì§€ë¥¼ ì „í•˜ê³  ìˆìŠµë‹ˆë‹¤.";
            
            if (card.reversed) {
                interpretation += " ë‹¤ë§Œ ì—­ë°©í–¥ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ ì‹ ì¤‘í•œ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤.";
            }
            
            return interpretation;
        }
        
        function displayTarotResult(question, cards, spreadType, analysis) {
            const spread = spreads[spreadType];
            const resultDiv = document.getElementById('tarotResult');
            
            let cardDisplayHTML = '';
            
            if (spread.count === 1) {

                cardDisplayHTML = `
                    <div class="single-card-layout">
                        <div class="card-container ${cards[0].reversed ? 'reversed' : ''}">
                            <div class="card-visual">
                                <div class="card-symbol">ğŸƒ</div>
                                <div class="card-name">${cards[0].korean}</div>
                                <div class="card-english">${cards[0].name}</div>
                                ${cards[0].reversed ? '<div class="reversed-badge">ì—­ë°©í–¥</div>' : ''}
                            </div>
                        </div>
                        <div class="card-interpretation">
                            <h4>${cards[0].position}</h4>
                            <p>${analysis.cardAnalysis[0].interpretation}</p>
                        </div>
                    </div>
                `;
            } else if (spread.count === 3) {

                cardDisplayHTML = `
                    <div class="three-card-layout">
                        ${cards.map((card, index) => `
                            <div class="card-position">
                                <div class="card-container ${card.reversed ? 'reversed' : ''}">
                                    <div class="card-visual">
                                        <div class="card-symbol">ğŸƒ</div>
                                        <div class="card-name">${card.korean}</div>
                                        <div class="card-english">${card.name}</div>
                                        ${card.reversed ? '<div class="reversed-badge">ì—­ë°©í–¥</div>' : ''}
                                    </div>
                                </div>
                                <div class="position-label">${card.position}</div>
                                <div class="card-interpretation">
                                    <p>${analysis.cardAnalysis[index].interpretation}</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {

                cardDisplayHTML = `
                    <div class="celtic-cross-layout">
                        <div class="celtic-grid">
                            ${cards.map((card, index) => `
                                <div class="celtic-position position-${index + 1}">
                                    <div class="mini-card ${card.reversed ? 'reversed' : ''}">
                                        <div class="mini-symbol">ğŸƒ</div>
                                        <div class="mini-name">${card.korean}</div>
                                        ${card.reversed ? '<div class="mini-reversed">R</div>' : ''}
                                    </div>
                                    <div class="position-label">${card.position}</div>
                                </div>
                            `).join('')}
                        </div>
                        <div class="celtic-interpretations">
                            ${cards.map((card, index) => `
                                <div class="celtic-interpretation">
                                    <h4>${index + 1}. ${card.position}</h4>
                                    <p><strong>${card.korean}</strong> - ${analysis.cardAnalysis[index].interpretation}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            resultDiv.innerHTML = `
                <div class="tarot-result-container">
                    <h2 style="text-align: center; margin-bottom: 30px;">ğŸ”® íƒ€ë¡œ ë¦¬ë”© ê²°ê³¼</h2>
                    
                    <div class="question-display">
                        <h3>ğŸ“ ì§ˆë¬¸</h3>
                        <p>"${question}"</p>
                    </div>
                    
                    <div class="cards-display">
                        <h3>ğŸƒ ë½‘íŒ ì¹´ë“œ (${spread.name})</h3>
                        ${cardDisplayHTML}
                    </div>
                    
                    <div class="overall-message">
                        <h3>ğŸ” ì „ì²´ ë©”ì‹œì§€</h3>
                        <p>${analysis.overall}</p>
                    </div>
                    
                    <div class="advice-section">
                        <h3>ğŸ’¡ ì¡°ì–¸</h3>
                        <p>${analysis.advice}</p>
                    </div>
                    
                    <div class="future-guidance">
                        <h3>ğŸŒŸ ë¯¸ë˜ ê°€ì´ë“œ</h3>
                        <p>${analysis.futureGuidance}</p>
                    </div>
                    
                    <div class="ai-disclaimer">
                        <small>â€» ë³¸ íƒ€ë¡œ ë¦¬ë”©ì€ AIê°€ ë¶„ì„í•œ ì°¸ê³ ìš© ì •ë³´ì…ë‹ˆë‹¤. doha.kr ë…ìì ì¸ í•´ì„ì„ ì œê³µí•©ë‹ˆë‹¤.</small>
                    </div>
                    
                    <div style="text-align: center; margin-top: 40px;">
                        <button onclick="location.reload()" class="btn btn-secondary">
                            ë‹¤ì‹œ ì ë³´ê¸°
                        </button>
                    </div>
                </div>
            `;
        }
    </script>
    
    
    <!-- AdSense initialization -->
    

    <!-- Non-critical scripts moved here for performance -->
    
<!-- Google AdSense ì§€ì—° ë¡œë”© -->
<script>

window.addEventListener('load', function() {
    setTimeout(function() {
        var adsScript = document.createElement('script');
        adsScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7905640648499222';
        adsScript.crossOrigin = 'anonymous';
        adsScript.defer = true;
        document.head.appendChild(adsScript);
    }, 2000);
});
</script>

<script>

window.adsenseInitialized = window.adsenseInitialized || false;

function initializeAdSense() {
    if (window.adsenseInitialized) {
        console.log('AdSense already initialized');
        return;
    }
    
    window.adsenseInitialized = true;

    const adBlocks = document.querySelectorAll('.adsbygoogle');
    adBlocks.forEach((ad, index) => {
        if (!ad.dataset.adsbygoogleStatus) {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                console.log('AdSense block initialized:', index);
            } catch (error) {
                console.warn('AdSense initialization error:', error);
            }
        }
    });
}

window.addEventListener('load', function() {
    setTimeout(initializeAdSense, 1000);
});
</script>

<script>

(function() {
    'use strict';

    window.__adsenseLoaded = window.__adsenseLoaded || false;
    window.__adsenseQueue = window.__adsenseQueue || [];
    
    function initAdsense() {
        if (window.__adsenseLoaded) return;
        
        const ads = document.querySelectorAll('.adsbygoogle:not([data-adsbygoogle-status])');
        
        if (ads.length === 0) return;

        if (typeof adsbygoogle === 'undefined') {
            setTimeout(initAdsense, 500);
            return;
        }
        
        window.__adsenseLoaded = true;

        ads.forEach((ad, index) => {
            try {

                if (ad.getAttribute('data-adsbygoogle-status')) return;

                (adsbygoogle = window.adsbygoogle || []).push({});

                ad.setAttribute('data-adsbygoogle-status', 'done');
                
            } catch (e) {
                console.warn('AdSense ì´ˆê¸°í™” ì‹¤íŒ¨:', index, e.message);
            }
        });
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initAdsense, 1000);
        });
    } else {
        setTimeout(initAdsense, 1000);
    }

    window.addEventListener('error', function(e) {
        if (e.message && e.message.includes('adsbygoogle.push() error')) {
            e.preventDefault();
            console.warn('AdSense ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€ë¨');
            return false;
        }
    }, true);
})();
</script>

<!-- AdSense í†µí•© ì´ˆê¸°í™” -->
<script>
(function() {
    'use strict';

    window.__adsInitialized = false;

    function initializeAds() {
        if (window.__adsInitialized) return;
        
        const ads = document.querySelectorAll('.adsbygoogle:not([data-adsbygoogle-status])');
        if (ads.length === 0) return;

        if (typeof adsbygoogle === 'undefined') {
            setTimeout(initializeAds, 100);
            return;
        }
        
        window.__adsInitialized = true;

        ads.forEach((ad) => {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                ad.setAttribute('data-adsbygoogle-status', 'done');
            } catch (e) {

            }
        });
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initializeAds, 500);
        });
    } else {
        setTimeout(initializeAds, 500);
    }

    window.addEventListener('error', function(e) {
        if (e.message && e.message.includes('adsbygoogle.push() error')) {
            e.preventDefault();
            e.stopPropagation();
            return false;
        }
    }, true);
})();
</script>

<script>
// ë„¤ë¹„ê²Œì´ì…˜ ë° í‘¸í„° ë¡œë“œ - main.jsì˜ loadComponentsê°€ ì‹¤í–‰ë˜ì§€ ì•Šì€ ê²½ìš°ë¥¼ ìœ„í•œ í´ë°±
document.addEventListener('DOMContentLoaded', function() {
    // main.jsê°€ ë¡œë“œë˜ì—ˆê³  loadComponents í•¨ìˆ˜ê°€ ìˆëŠ”ì§€ í™•ì¸
    if (typeof loadComponents === 'function') {
        // main.jsì˜ DOMContentLoadedê°€ ì´ë¯¸ ì‹¤í–‰ë˜ì—ˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ 
        // navbar-placeholderê°€ ë¹„ì–´ìˆìœ¼ë©´ ë‹¤ì‹œ ì‹¤í–‰
        const navPlaceholder = document.getElementById('navbar-placeholder');
        const footerPlaceholder = document.getElementById('footer-placeholder');
        
        if ((navPlaceholder && !navPlaceholder.innerHTML.trim()) || 
            (footerPlaceholder && !footerPlaceholder.innerHTML.trim())) {
            console.log('Loading components...');
            loadComponents().catch(function(error) {
                console.error('Failed to load components:', error);
            });
        }
    }
});
</script>
</body>
</html>