<!DOCTYPE html>
<html lang="ko">
<head>

<script id="performance-monitor">
// 개선된 성능 모니터링
window.addEventListener('load', function() {
    if (window.performance && window.performance.timing) {
        const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
        console.log('페이지 로딩 시간:', loadTime + 'ms');
        
        if (loadTime > 10000) {
            console.warn('페이지 로딩이 느립니다:', loadTime + 'ms');
        }
        
        // 리소스 로딩 분석
        const resources = performance.getEntriesByType('resource');
        const slowResources = resources.filter(r => r.duration > 1000);
        if (slowResources.length > 0) {
            console.warn('느린 리소스들:', slowResources.map(r => ({ name: r.name, duration: r.duration })));
        }
    }
});

// CSP 오류 감지
window.addEventListener('securitypolicyviolation', function(e) {
    console.warn('CSP 위반 감지:', {
        directive: e.violatedDirective,
        source: e.sourceFile,
        line: e.lineNumber
    });
});
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 운세 - 사주팔자, 타로, 별자리 운세 | doha.kr</title>
    <meta name="description" content="AI가 분석하는 정확한 개인 맞춤 운세 서비스. 만세력 사주팔자, 오늘의 운세, 별자리 운세, 띠별 운세, AI 타로 리딩을 무료로 체험하세요. 생년월일시 기반 사주팔자 상세 풀이, 운세 변화 예측, 인생 전반에 대한 통찰력을 제공합니다.">
    <meta name="keywords" content="AI운세, 사주팔자, 타로리딩, 별자리운세, 띠별운세, 오늘의운세, 무료운세, 만세력">
    <meta name="robots" content="index, follow">
    <meta name="author" content="doha.kr">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com">self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), payment=(), usb=(), magnetometer=(), accelerometer=(), gyroscope=()">
    
    <!-- Open Graph -->
    <meta property="og:title" content="AI 운세 - 사주팔자, 타로, 별자리 운세">
    <meta property="og:description" content="AI가 분석하는 정확한 개인 맞춤 운세. 만세력 사주팔자, 오늘의 운세, 별자리 운세, 띠별 운세, AI 타로 리딩 무료">
    <meta property="og:image" content="https://doha.kr/images/egen-male-card.jpg">
    <meta property="og:url" content="https://doha.kr/fortune/">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:site_name" content="doha.kr">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="AI 운세 - 사주팔자, 타로, 별자리 운세">
    <meta name="twitter:description" content="AI가 분석하는 정확한 개인 맞춤 운세. 만세력 사주팔자, 오늘의 운세, 별자리 운세, 띠별 운세, AI 타로 리딩 무료">
    <meta name="twitter:image" content="https://doha.kr/images/egen-male-card.jpg">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://doha.kr/fortune/">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" crossorigin href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" href="/images/logo.svg" type="image/svg+xml">
    
    <!-- Optimized CSS System -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/pages/fortune-styles.css">
    
    <!-- Google AdSense -->
    <!-- Moved to end of body -->
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Service",
        "name": "AI 운세 서비스",
        "description": "AI가 분석하는 정확한 개인 맞춤 운세 서비스. 사주팔자, 타로, 별자리 운세 등 다양한 운세 서비스를 무료로 제공",
        "provider": {
            "@type": "Organization",
            "name": "doha.kr",
            "url": "https://doha.kr"
        },
        "url": "https://doha.kr/fortune/",
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "AI 운세 서비스 목록",
            "itemListElement": [
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "AI 사주팔자",
                        "description": "생년월일시 기반 만세력 사주팔자 상세 풀이",
                        "url": "https://doha.kr/fortune/saju/"
                    },
                    "price": "0",
                    "priceCurrency": "KRW"
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "오늘의 운세",
                        "description": "AI가 분석하는 개인 맞춤형 상세 운세",
                        "url": "https://doha.kr/fortune/daily/"
                    },
                    "price": "0",
                    "priceCurrency": "KRW"
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "AI 타로 리딩",
                        "description": "질문을 입력하면 AI가 타로카드로 답을 찾아드리는 서비스",
                        "url": "https://doha.kr/fortune/tarot/"
                    },
                    "price": "0",
                    "priceCurrency": "KRW"
                }
            ]
        }
    }
    </script>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com">self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com">self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com;">
</head>
<body class="fortune-page">
    <!-- 네비게이션 바 -->
    <div id="navbar-placeholder"></div>
    
    <!-- 심플한 히어로 섹션 -->
    <section class="fortune-hero">
        <div class="fortune-hero-content">
            <h1 class="fade-in">🔮 <span class="gradient-text">AI 운세 & 타로</span></h1>
            <p class="fade-in stagger-1">
                인공지능이 분석하는 개인 맞춤 운세<br>
                정확한 만세력 사주팔자부터 일일운세까지
            </p>
            <a href="/fortune/saju/" class="fortune-cta fade-in stagger-2">
                <span>✨</span>
                사주팔자 보기
            </a>
        </div>
    </section>
    
    <!-- 운세 서비스 그리드 -->
    <section class="fortune-services">
        <div class="container">
            <h2 class="section-title fade-in">AI 운세 서비스</h2>
            <p class="section-subtitle fade-in stagger-1">
                최첨단 AI 기술로 정확하고 상세한 운세를 제공합니다
            </p>
            
            <div class="fortune-grid">
                <a href="/fortune/saju/" class="fortune-card fade-in stagger-1">
                    <div class="fortune-card-icon">🔮</div>
                    <h3>AI 사주팔자</h3>
                    <p>
                        정확한 만세력 기반 사주팔자 분석. 연주, 월주, 일주, 시주를 
                        계산하고 오행·십신을 통해 성격, 운세, 적성을 
                        상세하게 분석합니다. 양력/음력 변환 지원.
                    </p>
                    <span class="fortune-card-badge premium">전문</span>
                </a>
                
                <a href="/fortune/daily/" class="fortune-card fade-in stagger-2 animated">
                    <div class="fortune-card-icon">🌅</div>
                    <h3>일일운세</h3>
                    <p>
                        사주팔자 기반 오늘의 운세를 확인하세요. 
                        총운, 애정운, 금전운, 건강운, 직업운을 
                        개인의 사주와 오늘의 간지를 바탕으로 분석합니다.
                    </p>
                    <span class="fortune-card-badge new">업데이트</span>
                </a>
                
                <a href="/fortune/tarot/" class="fortune-card fade-in stagger-3 animated">
                    <div class="fortune-card-icon">🃏</div>
                    <h3>AI 타로 리딩</h3>
                    <p>
                        질문을 입력하고 카드를 선택하면 AI가 
                        신비로운 타로의 메시지를 해석해드립니다.
                        과거, 현재, 미래의 인사이트를 얻어보세요.
                    </p>
                    <span class="fortune-card-badge hot">인기</span>
                </a>
                
                <a href="/fortune/zodiac/" class="fortune-card fade-in stagger-4 animated">
                    <div class="fortune-card-icon">♈</div>
                    <h3>별자리 운세</h3>
                    <p>
                        12개 별자리별 오늘의 운세를 AI가 상세하게 
                        분석해드립니다. 애정운, 금전운, 직장운은 물론
                        오늘의 럭키 컬러와 숫자까지!
                    </p>
                    <span class="fortune-card-badge">정확</span>
                </a>
                
                <a href="/fortune/zodiac-animal/" class="fortune-card fade-in stagger-5 animated">
                    <div class="fortune-card-icon">🐅</div>
                    <h3>띠별 운세</h3>
                    <p>
                        12지신 동물별 운세를 전통과 AI의 만남으로 
                        새롭게 해석해드립니다. 쥐띠부터 돼지띠까지
                        각 띠의 특성에 맞는 맞춤 조언을 제공합니다.
                    </p>
                    <span class="fortune-card-badge traditional">전통</span>
                </a>
            </div>
        </div>
    </section>
    
    <!-- 운세 특징 섹션 -->
    <section class="service-highlights">
        <div class="container">
            <h2 class="section-title fade-in animated">AI 운세의 특징</h2>
            <div class="highlights-grid">
                <div class="highlight-card fade-in stagger-1 animated">
                    <div class="highlight-icon">🤖</div>
                    <h3 class="highlight-title">AI 분석</h3>
                    <p class="highlight-desc">최신 인공지능 기술로 개인 맞춤 운세 제공</p>
                </div>
                
                <div class="highlight-card fade-in stagger-2 animated">
                    <div class="highlight-icon">🎯</div>
                    <h3 class="highlight-title">정확성</h3>
                    <p class="highlight-desc">정확한 만세력 계산 기반 사주팔자 분석</p>
                </div>
                
                <div class="highlight-card fade-in stagger-3 animated">
                    <div class="highlight-icon">🔒</div>
                    <h3 class="highlight-title">개인정보 보호</h3>
                    <p class="highlight-desc">입력 정보는 저장되지 않으며 안전하게 처리</p>
                </div>
                
                <div class="highlight-card fade-in stagger-4 animated">
                    <div class="highlight-icon">⚡</div>
                    <h3 class="highlight-title">즉시 확인</h3>
                    <p class="highlight-desc">빠른 분석으로 실시간 운세 결과 제공</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- 광고 영역 -->
    <div class="ad-container">
        <div class="ad-label">광고</div>
        
<div id="ad-container-h19s22dww" style="min-height: 100px;">
    <div class="ad-placeholder" style="display: flex; align-items: center; justify-content: center; background: #f5f5f5; min-height: 100px; color: #999;">
        광고 로딩 중...
    </div>
</div>
<script>
// Intersection Observer로 광고 지연 로딩
if ('IntersectionObserver' in window) {
    const adObserver = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                const container = entry.target;
                container.innerHTML = `<ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-7905640648499222"
             data-ad-slot="5784361252"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>`;
                if (typeof adsbygoogle !== 'undefined') {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                }
                adObserver.unobserve(container);
            }
        });
    }, { rootMargin: '50px' });
    
    const adContainer = document.getElementById('ad-container-h19s22dww');
    if (adContainer) {
        adObserver.observe(adContainer);
    }
}
</script>
    </div>
    
    <!-- CTA 섹션 -->
    <section class="cta">
        <div class="container">
            <div class="cta-box">
                <h2 class="cta-title">지금 바로 운세를 확인해보세요!</h2>
                <p class="cta-description">
                    AI가 분석하는 정확한 개인 맞춤 운세<br>
                    정확한 만세력 사주팔자부터 일일운세까지
                </p>
                <a href="/fortune/saju/" class="cta-button">무료로 사주팔자 보기</a>
            </div>
        </div>
    </section>
    
    <!-- 푸터 -->
    <div id="footer-placeholder"></div>
    
    <!-- External JavaScript -->
    <script defer src="/js/api-config.js"></script>
    <script src="/js/bundle.min.js" defer></script>
    <script src="/js/main.min.js"></script>
    
    <!-- AdSense initialization -->
    

    <!-- Non-critical scripts moved here for performance -->
    
<!-- Google AdSense 지연 로딩 -->
<script>
// AdSense 지연 로딩 (페이지 로드 후 2초 대기)
window.addEventListener('load', function() {
    setTimeout(function() {
        var adsScript = document.createElement('script');
        adsScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7905640648499222';
        adsScript.crossOrigin = 'anonymous';
        adsScript.defer = true;
        document.head.appendChild(adsScript);
    }, 2000);
});
</script>

<script>
// AdSense 중복 초기화 방지
window.adsenseInitialized = window.adsenseInitialized || false;

function initializeAdSense() {
    if (window.adsenseInitialized) {
        console.log('AdSense already initialized');
        return;
    }
    
    window.adsenseInitialized = true;
    
    // 기존 광고 블록 확인 및 초기화
    const adBlocks = document.querySelectorAll('.adsbygoogle');
    adBlocks.forEach((ad, index) => {
        if (!ad.dataset.adsbygoogleStatus) {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                console.log('AdSense block initialized:', index);
            } catch (error) {
                console.warn('AdSense initialization error:', error);
            }
        }
    });
}

// 페이지 로드 후 AdSense 초기화
window.addEventListener('load', function() {
    setTimeout(initializeAdSense, 1000);
});
</script>

<script>
// 통합 AdSense 초기화 (중복 방지)
(function() {
    'use strict';
    
    // 전역 플래그로 초기화 상태 관리
    window.__adsenseLoaded = window.__adsenseLoaded || false;
    window.__adsenseQueue = window.__adsenseQueue || [];
    
    function initAdsense() {
        if (window.__adsenseLoaded) return;
        
        const ads = document.querySelectorAll('.adsbygoogle:not([data-adsbygoogle-status])');
        
        if (ads.length === 0) return;
        
        // AdSense 스크립트가 로드되었는지 확인
        if (typeof adsbygoogle === 'undefined') {
            setTimeout(initAdsense, 500);
            return;
        }
        
        window.__adsenseLoaded = true;
        
        // 각 광고 슬롯 초기화
        ads.forEach((ad, index) => {
            try {
                // 중복 초기화 방지
                if (ad.getAttribute('data-adsbygoogle-status')) return;
                
                // 초기화 시도
                (adsbygoogle = window.adsbygoogle || []).push({});
                
                // 상태 표시
                ad.setAttribute('data-adsbygoogle-status', 'done');
                
            } catch (e) {
                console.warn('AdSense 초기화 실패:', index, e.message);
            }
        });
    }
    
    // 페이지 로드 완료 후 초기화
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initAdsense, 1000);
        });
    } else {
        setTimeout(initAdsense, 1000);
    }
    
    // 에러 핸들러 추가
    window.addEventListener('error', function(e) {
        if (e.message && e.message.includes('adsbygoogle.push() error')) {
            e.preventDefault();
            console.warn('AdSense 중복 초기화 방지됨');
            return false;
        }
    }, true);
})();
</script>
</body>
</html>