<!DOCTYPE html>
<html lang="ko">
<head>

<script id="performance-monitor">
// ê°œì„ ëœ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
window.addEventListener('load', function() {
    if (window.performance && window.performance.timing) {
        const loadTime = window.performance.timing.loadEventEnd - window.performance.timing.navigationStart;
        console.log('í˜ì´ì§€ ë¡œë”© ì‹œê°„:', loadTime + 'ms');
        
        if (loadTime > 10000) {
            console.warn('í˜ì´ì§€ ë¡œë”©ì´ ëŠë¦½ë‹ˆë‹¤:', loadTime + 'ms');
        }
        
        // ë¦¬ì†ŒìŠ¤ ë¡œë”© ë¶„ì„
        const resources = performance.getEntriesByType('resource');
        const slowResources = resources.filter(r => r.duration > 1000);
        if (slowResources.length > 0) {
            console.warn('ëŠë¦° ë¦¬ì†ŒìŠ¤ë“¤:', slowResources.map(r => ({ name: r.name, duration: r.duration })));
        }
    }
});

// CSP ì˜¤ë¥˜ ê°ì§€
window.addEventListener('securitypolicyviolation', function(e) {
    console.warn('CSP ìœ„ë°˜ ê°ì§€:', {
        directive: e.violatedDirective,
        source: e.sourceFile,
        line: e.lineNumber
    });
});
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ì‚¬ì£¼íŒ”ì - ì •í™•í•œ ë§Œì„¸ë ¥ ê¸°ë°˜ ì‚¬ì£¼ ë¶„ì„ | doha.kr</title>
    <meta name="description" content="ë§Œì„¸ë ¥ ê¸°ë°˜ ì •í™•í•œ ì‚¬ì£¼íŒ”ì ë¶„ì„. ìƒë…„ì›”ì¼ê³¼ ì¶œìƒì‹œê°„ìœ¼ë¡œ ì—°ì£¼, ì›”ì£¼, ì¼ì£¼, ì‹œì£¼ë¥¼ ê³„ì‚°í•˜ê³  AIê°€ ìƒì„¸í•˜ê²Œ í•´ì„í•©ë‹ˆë‹¤.">
    <meta name="robots" content="index, follow">
    <meta name="author" content="doha.kr">
    
    <!-- Security Headers -->
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; default-src ; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    <meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), payment=(), usb=(), magnetometer=(), accelerometer=(), gyroscope=()">
    
    <!-- Open Graph -->
    <meta property="og:title" content="AI ì‚¬ì£¼íŒ”ì - ì •í™•í•œ ë§Œì„¸ë ¥ ê¸°ë°˜ ì‚¬ì£¼ ë¶„ì„">
    <meta property="og:description" content="ë§Œì„¸ë ¥ ê¸°ë°˜ ì •í™•í•œ ì‚¬ì£¼íŒ”ì ë¶„ì„. AIê°€ ì‹­ì‹ , ì˜¤í–‰, ì„±ê²©, ìš´ì„¸ë¥¼ ìƒì„¸í•˜ê²Œ í•´ì„í•©ë‹ˆë‹¤.">
    <meta property="og:image" content="https://doha.kr/images/saju-og.png">
    <meta property="og:url" content="https://doha.kr/fortune/saju/">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" crossorigin href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Google AdSense -->
    <!-- Moved to end of body -->
    <!-- Optimized CSS System -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/pages/saju.css">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; default-src ; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:;">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; default-src ; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com https://googleads.g.doubleclick.net https://ep2.adtrafficquality.google https://tpc.googlesyndication.com'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://pagead2.googlesyndication.com https://www.googletagmanager.com https://developers.kakao.com https://t1.kakaocdn.net https://ep2.adtrafficquality.google https://fundingchoicesmessages.google.com https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://www.google.com https://fundingchoicesmessages.google.com;">
</head>
<body class="saju-page">
    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
    <div id="navbar-placeholder"></div>
    <script src="/js/manseryeok-database.js"></script>
    
    <!-- í˜ì´ì§€ í—¤ë” -->
    <section class="page-header">
        <div class="container">
            <h1 class="page-title fade-in">ğŸ”® AI ì‚¬ì£¼íŒ”ì</h1>
            <p class="page-subtitle fade-in stagger-1">
                ë§Œì„¸ë ¥ ê¸°ë°˜ ì •í™•í•œ ì‚¬ì£¼íŒ”ì ë¶„ì„<br>
                AIê°€ ë‹¹ì‹ ì˜ íƒ€ê³ ë‚œ ìš´ëª…ê³¼ ì„±ê²©ì„ ìƒì„¸í•˜ê²Œ í•´ì„í•©ë‹ˆë‹¤
            </p>
        </div>
    </section>
    
    <!-- ì‚¬ì£¼ ì…ë ¥ í¼ -->
    <section class="saju-section">
        <div class="container">
            <div class="saju-form-container" id="sajuForm">
                <h2>ì‚¬ì£¼íŒ”ì ì •ë³´ ì…ë ¥</h2>
                <form onsubmit="generateSaju(event)">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="userName">ì´ë¦„</label>
                            <input type="text" id="userName" name="userName" class="form-control" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="gender">ì„±ë³„</label>
                            <select id="gender" name="gender" class="form-control" required>
                                <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                <option value="male">ë‚¨ì„±</option>
                                <option value="female">ì—¬ì„±</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="birthYear">ìƒë…„</label>
                            <input type="number" id="birthYear" name="birthYear" class="form-control" min="1900" max="2025" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="birthMonth">ìƒì›”</label>
                            <input type="number" id="birthMonth" name="birthMonth" class="form-control" min="1" max="12" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="birthDay">ìƒì¼</label>
                            <input type="number" id="birthDay" name="birthDay" class="form-control" min="1" max="31" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="birthTime">ì¶œìƒì‹œê°„</label>
                        <select id="birthTime" name="birthTime" class="form-control" required>
                            <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
                            <option value="23">ìì‹œ (23:00-00:59)</option>
                            <option value="1">ì¶•ì‹œ (01:00-02:59)</option>
                            <option value="3">ì¸ì‹œ (03:00-04:59)</option>
                            <option value="5">ë¬˜ì‹œ (05:00-06:59)</option>
                            <option value="7">ì§„ì‹œ (07:00-08:59)</option>
                            <option value="9">ì‚¬ì‹œ (09:00-10:59)</option>
                            <option value="11">ì˜¤ì‹œ (11:00-12:59)</option>
                            <option value="13">ë¯¸ì‹œ (13:00-14:59)</option>
                            <option value="15">ì‹ ì‹œ (15:00-16:59)</option>
                            <option value="17">ìœ ì‹œ (17:00-18:59)</option>
                            <option value="19">ìˆ ì‹œ (19:00-20:59)</option>
                            <option value="21">í•´ì‹œ (21:00-22:59)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="isLunar" name="isLunar">
                            <span class="checkmark"></span>
                            ìŒë ¥ ìƒì¼ì…ë‹ˆë‹¤
                        </label>
                    </div>
                    
                    <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 30px;">
                        ğŸ”® ì‚¬ì£¼íŒ”ì ë¶„ì„í•˜ê¸°
                    </button>
                </form>
            </div>
            
            <!-- ì‚¬ì£¼ ê²°ê³¼ ì˜ì—­ -->
            <div id="sajuResult" style="display: none;">
                <!-- ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </section>
    
    <!-- ê´‘ê³  ì˜ì—­ -->
    <div class="ad-container">
        <div class="ad-label">ê´‘ê³ </div>
        
<div id="ad-container-35a37wzct" style="min-height: 100px;">
    <div class="ad-placeholder" style="display: flex; align-items: center; justify-content: center; background: #f5f5f5; min-height: 100px; color: #999;">
        ê´‘ê³  ë¡œë”© ì¤‘...
    </div>
</div>
<script>
// Intersection Observerë¡œ ê´‘ê³  ì§€ì—° ë¡œë”©
if ('IntersectionObserver' in window) {
    const adObserver = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                const container = entry.target;
                container.innerHTML = `<ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-7905640648499222"
             data-ad-slot="2789891628"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>`;
                if (typeof adsbygoogle !== 'undefined') {
                    (adsbygoogle = window.adsbygoogle || []).push({});
                }
                adObserver.unobserve(container);
            }
        });
    }, { rootMargin: '50px' });
    
    const adContainer = document.getElementById('ad-container-35a37wzct');
    if (adContainer) {
        adObserver.observe(adContainer);
    }
}
</script>
    </div>
    
    <!-- ì‚¬ì£¼íŒ”ì ì•ˆë‚´ -->
    <section class="info-section">
        <div class="container">
            <div class="info-box">
                <h3>AI ì‚¬ì£¼íŒ”ì ë¶„ì„ ì•ˆë‚´</h3>
                <ul>
                    <li>ë§Œì„¸ë ¥ ê¸°ë°˜ ì •í™•í•œ ì‚¬ì£¼íŒ”ì ê³„ì‚°ìœ¼ë¡œ ì—°ì£¼, ì›”ì£¼, ì¼ì£¼, ì‹œì£¼ë¥¼ ì‚°ì¶œí•©ë‹ˆë‹¤.</li>
                    <li>ì‹­ì‹  ë¶„ì„ì„ í†µí•´ ì„±ê²©, ì ì„±, ì¸ê°„ê´€ê³„ë¥¼ íŒŒì•…í•©ë‹ˆë‹¤.</li>
                    <li>ì˜¤í–‰ ê· í˜• ë¶„ì„ìœ¼ë¡œ ê±´ê°•, ìš´ì„¸, ê°œì„ ì ì„ ì œì‹œí•©ë‹ˆë‹¤.</li>
                    <li>AIê°€ ì „í†µ ì‚¬ì£¼í•™ê³¼ í˜„ëŒ€ì  í•´ì„ì„ ê²°í•©í•˜ì—¬ ìƒì„¸í•œ ë¶„ì„ì„ ì œê³µí•©ë‹ˆë‹¤.</li>
                    <li>ì¶œìƒì‹œê°„ì´ ì •í™•í• ìˆ˜ë¡ ë” ì •ë°€í•œ ë¶„ì„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
                </ul>
            </div>
        </div>
    </section>
    
    <!-- í‘¸í„° -->
    <div id="footer-placeholder"></div>
    
    <!-- External JavaScript -->
    <script defer src="/js/api-config.js"></script>
    <script src="/js/bundle.min.js" defer></script>
    <script src="/js/main.min.js"></script>
    <script src="/js/manseryeok-converter.js"></script>
    <script src="/js/saju-calculator.min.js"></script>
    <script src="/js/gemini-api.min.js"></script>
    
    <script>
        // í–¥ìƒëœ ì‚¬ì£¼ í•´ì„ ìƒì„± í•¨ìˆ˜
        function generateEnhancedInterpretation(saju) {
            const elements = analyzeElements(saju);
            const personality = analyzePersonality(saju);
            const fortune = analyzeFortune(saju);
            const compatibility = analyzeCompatibility(saju);
            
            return {
                elements,
                personality,
                fortune,
                compatibility,
                advice: generateAdvice(saju)
            };
        }
        
        // ì˜¤í–‰ ë¶„ì„ í•¨ìˆ˜
        function analyzeElements(saju) {
            const elements = {
                ëª©: 0, í™”: 0, í† : 0, ê¸ˆ: 0, ìˆ˜: 0
            };
            
            const pillars = [saju.yearPillar, saju.monthPillar, saju.dayPillar, saju.hourPillar];
            pillars.forEach(pillar => {
                if (pillar) {
                    const stem = pillar.charAt(0);
                    const branch = pillar.charAt(1);
                    
                    // ì²œê°„ ì˜¤í–‰
                    if ('ê°‘ì„'.includes(stem)) elements.ëª©++;
                    else if ('ë³‘ì •'.includes(stem)) elements.í™”++;
                    else if ('ë¬´ê¸°'.includes(stem)) elements.í† ++;
                    else if ('ê²½ì‹ '.includes(stem)) elements.ê¸ˆ++;
                    else if ('ì„ê³„'.includes(stem)) elements.ìˆ˜++;
                    
                    // ì§€ì§€ ì˜¤í–‰
                    if ('ì¸ë¬˜'.includes(branch)) elements.ëª©++;
                    else if ('ì‚¬ì˜¤'.includes(branch)) elements.í™”++;
                    else if ('ì§„ìˆ ì¶•ë¯¸'.includes(branch)) elements.í† ++;
                    else if ('ì‹ ìœ '.includes(branch)) elements.ê¸ˆ++;
                    else if ('í•´ì'.includes(branch)) elements.ìˆ˜++;
                }
            });
            
            const maxElement = Object.entries(elements).reduce((a, b) => elements[a[0]] > elements[b[0]] ? a : b)[0];
            const minElement = Object.entries(elements).reduce((a, b) => elements[a[0]] < elements[b[0]] ? a : b)[0];
            
            return {
                distribution: elements,
                dominant: maxElement,
                lacking: minElement,
                balance: calculateBalance(elements)
            };
        }
        
        function calculateBalance(elements) {
            const total = Object.values(elements).reduce((sum, count) => sum + count, 0);
            const average = total / 5;
            const variance = Object.values(elements).reduce((sum, count) => {
                return sum + Math.pow(count - average, 2);
            }, 0) / 5;
            
            if (variance < 0.5) return 'ë§¤ìš° ê· í˜•ì ';
            else if (variance < 1) return 'ê· í˜•ì ';
            else if (variance < 2) return 'ì•½ê°„ ë¶ˆê· í˜•';
            else return 'ë¶ˆê· í˜•';
        }
        
        function analyzePersonality(saju) {
            const dayMaster = saju.dayPillar ? saju.dayPillar.charAt(0) : null;
            
            const personalities = {
                'ê°‘': 'ë¦¬ë”ì‹­ì´ ê°•í•˜ê³  ì§„ì·¨ì ì´ë©° ì •ì˜ê°ì´ ê°•í•©ë‹ˆë‹¤.',
                'ì„': 'ìœ ì—°í•˜ê³  ì ì‘ë ¥ì´ ë›°ì–´ë‚˜ë©° ì˜ˆìˆ ì  ê°ê°ì´ ìˆìŠµë‹ˆë‹¤.',
                'ë³‘': 'ì—´ì •ì ì´ê³  í™œë°œí•˜ë©° ì‚¬êµì„±ì´ ì¢‹ìŠµë‹ˆë‹¤.',
                'ì •': 'ë”°ëœ»í•˜ê³  ë°°ë ¤ì‹¬ì´ ê¹Šìœ¼ë©° ë´‰ì‚¬ì •ì‹ ì´ ê°•í•©ë‹ˆë‹¤.',
                'ë¬´': 'ì‹ ë¢°ê°ì„ ì£¼ê³  í¬ìš©ë ¥ì´ í¬ë©° ì¤‘ì¬ ëŠ¥ë ¥ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.',
                'ê¸°': 'ì‹¤ìš©ì ì´ê³  ê¼¼ê¼¼í•˜ë©° ê³„íšì„±ì´ ë›°ì–´ë‚©ë‹ˆë‹¤.',
                'ê²½': 'ê²°ë‹¨ë ¥ì´ ìˆê³  ì¶”ì§„ë ¥ì´ ê°•í•˜ë©° ì •ì˜ë¡­ìŠµë‹ˆë‹¤.',
                'ì‹ ': 'ì˜ˆë¦¬í•˜ê³  ë¶„ì„ì ì´ë©° ì™„ë²½ì£¼ì˜ ì„±í–¥ì´ ìˆìŠµë‹ˆë‹¤.',
                'ì„': 'ì§€í˜œë¡­ê³  í†µì°°ë ¥ì´ ë›°ì–´ë‚˜ë©° ì ì‘ë ¥ì´ ì¢‹ìŠµë‹ˆë‹¤.',
                'ê³„': 'ì„¬ì„¸í•˜ê³  ì§ê´€ë ¥ì´ ë›°ì–´ë‚˜ë©° ì°½ì˜ì ì…ë‹ˆë‹¤.'
            };
            
            return {
                basic: personalities[dayMaster] || 'ë…íŠ¹í•œ ê°œì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.',
                strengths: getStrengths(dayMaster),
                weaknesses: getWeaknesses(dayMaster),
                advice: getPersonalityAdvice(dayMaster)
            };
        }
        
        function getStrengths(dayMaster) {
            const strengths = {
                'ê°‘': ['ë¦¬ë”ì‹­', 'ì •ì˜ê°', 'ì¶”ì§„ë ¥'],
                'ì„': ['ìœ ì—°ì„±', 'ì˜ˆìˆ ì„±', 'í˜‘ì¡°ì„±'],
                'ë³‘': ['ì—´ì •', 'ì‚¬êµì„±', 'ê¸ì •ì„±'],
                'ì •': ['ë°°ë ¤ì‹¬', 'ë´‰ì‚¬ì •ì‹ ', 'ì˜¨í™”í•¨'],
                'ë¬´': ['ì‹ ë¢°ì„±', 'í¬ìš©ë ¥', 'ì•ˆì •ê°'],
                'ê¸°': ['ì‹¤ìš©ì„±', 'ê³„íšì„±', 'ê¼¼ê¼¼í•¨'],
                'ê²½': ['ê²°ë‹¨ë ¥', 'ì •ì§ì„±', 'ìš©ê¸°'],
                'ì‹ ': ['ì˜ˆë¦¬í•¨', 'ë¶„ì„ë ¥', 'ì •í™•ì„±'],
                'ì„': ['ì§€í˜œ', 'í†µì°°ë ¥', 'ìœ ì—°ì„±'],
                'ê³„': ['ì§ê´€ë ¥', 'ì°½ì˜ì„±', 'ì„¬ì„¸í•¨']
            };
            
            return strengths[dayMaster] || ['ê°œì„±', 'ë…ì°½ì„±', 'ì ì¬ë ¥'];
        }
        
        function getWeaknesses(dayMaster) {
            const weaknesses = {
                'ê°‘': ['ê³ ì§‘', 'ìœµí†µì„± ë¶€ì¡±', 'ë…ë‹¨ì '],
                'ì„': ['ìš°ìœ ë¶€ë‹¨', 'ì†Œê·¹ì ', 'ì˜ì¡´ì '],
                'ë³‘': ['ì¶©ë™ì ', 'ë³€ë•', 'ê³¼ì‹œìš•'],
                'ì •': ['ê°ì •ì ', 'í˜„ì‹¤ê°ê° ë¶€ì¡±', 'í¬ìƒì '],
                'ë¬´': ['ëŠë¦¼', 'ë³€í™” ê±°ë¶€', 'ê³ ì§‘'],
                'ê¸°': ['ì†Œì‹¬í•¨', 'ë¹„íŒì ', 'ì™„ê³ í•¨'],
                'ê²½': ['ê¸‰ì§„ì ', 'íƒ€í˜‘ ë¶€ì¡±', 'ê³µê²©ì '],
                'ì‹ ': ['ì°¨ê°€ì›€', 'ë¹„íŒì ', 'ì™„ë²½ì£¼ì˜'],
                'ì„': ['ë¶ˆì•ˆì •', 'ê³¼ë„í•œ ìƒê°', 'ìš°ìœ ë¶€ë‹¨'],
                'ê³„': ['ì˜ˆë¯¼í•¨', 'ë³€ë•', 'ë¹„ë°€ì£¼ì˜']
            };
            
            return weaknesses[dayMaster] || ['ê·¹ë³µí•´ì•¼ í•  ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤'];
        }
        
        function getPersonalityAdvice(dayMaster) {
            const advice = {
                'ê°‘': 'ë•Œë¡œëŠ” íƒ€ì¸ì˜ ì˜ê²¬ì— ê·€ ê¸°ìš¸ì´ëŠ” ìœ ì—°í•¨ì´ í•„ìš”í•©ë‹ˆë‹¤.',
                'ì„': 'ìì‹ ê°ì„ ê°€ì§€ê³  ì£¼ë„ì ìœ¼ë¡œ í–‰ë™í•´ë³´ì„¸ìš”.',
                'ë³‘': 'ì¶©ë™ì ì¸ ê²°ì •ë³´ë‹¤ëŠ” ì‹ ì¤‘í•œ íŒë‹¨ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.',
                'ì •': 'ìì‹ ì„ ìœ„í•œ ì‹œê°„ë„ ì†Œì¤‘íˆ ì—¬ê¸°ì„¸ìš”.',
                'ë¬´': 'ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ìƒˆë¡œìš´ ë„ì „ì„ í•´ë³´ì„¸ìš”.',
                'ê¸°': 'ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ê´œì°®ë‹¤ëŠ” ê²ƒì„ ë°›ì•„ë“¤ì´ì„¸ìš”.',
                'ê²½': 'ë¶€ë“œëŸ¬ìš´ ì¹´ë¦¬ìŠ¤ë§ˆë¡œ ì‚¬ëŒë“¤ì„ ì´ëŒì–´ë³´ì„¸ìš”.',
                'ì‹ ': 'ë”°ëœ»í•œ ë§ˆìŒì„ í‘œí˜„í•˜ëŠ” ì—°ìŠµì„ í•´ë³´ì„¸ìš”.',
                'ì„': 'ì§ê´€ì„ ë¯¿ê³  ê³¼ê°í•˜ê²Œ í–‰ë™í•´ë³´ì„¸ìš”.',
                'ê³„': 'ìì‹ ì˜ ê°ì •ì„ ì†”ì§í•˜ê²Œ í‘œí˜„í•´ë³´ì„¸ìš”.'
            };
            
            return advice[dayMaster] || 'ìì‹ ë§Œì˜ ì¥ì ì„ ì‚´ë ¤ ë°œì „í•´ ë‚˜ê°€ì„¸ìš”.';
        }
        
        function analyzeFortune(saju) {
            return {
                overall: 'ì•ˆì •ê³¼ ì„±ì¥ì˜ ì‹œê¸°',
                career: 'ìƒˆë¡œìš´ ê¸°íšŒê°€ ì°¾ì•„ì˜µë‹ˆë‹¤',
                wealth: 'ì¬ë¬¼ìš´ì´ ì¢‹ì€ í¸ì…ë‹ˆë‹¤',
                health: 'ê±´ê°• ê´€ë¦¬ì— ì‹ ê²½ì“°ì„¸ìš”',
                relationship: 'ì¸ê°„ê´€ê³„ê°€ ì›ë§Œí•©ë‹ˆë‹¤'
            };
        }
        
        function analyzeCompatibility(saju) {
            const dayBranch = saju.dayPillar ? saju.dayPillar.charAt(1) : null;
            
            return {
                best: getBestMatch(dayBranch),
                good: getGoodMatch(dayBranch),
                challenging: getChallengingMatch(dayBranch)
            };
        }
        
        function getBestMatch(branch) {
            const matches = {
                'ì': ['ì‹ ', 'ì§„'],
                'ì¶•': ['ì‚¬', 'ìœ '],
                'ì¸': ['í•´', 'ì˜¤'],
                'ë¬˜': ['ìˆ ', 'ë¯¸'],
                'ì§„': ['ìœ ', 'ì'],
                'ì‚¬': ['ì‹ ', 'ì¶•'],
                'ì˜¤': ['ë¯¸', 'ì¸'],
                'ë¯¸': ['ì˜¤', 'ë¬˜'],
                'ì‹ ': ['ì‚¬', 'ì'],
                'ìœ ': ['ì§„', 'ì¶•'],
                'ìˆ ': ['ë¬˜', 'ì¸'],
                'í•´': ['ì¸', 'ë¯¸']
            };
            
            return matches[branch] || ['ì¡°í™”ë¡œìš´ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤'];
        }
        
        function getGoodMatch(branch) {
            const matches = {
                'ì': ['ìš©', 'ì›ìˆ­ì´'],
                'ì¶•': ['ë±€', 'ë‹­'],
                'ì¸': ['ë§', 'ê°œ'],
                'ë¬˜': ['ì–‘', 'ë¼ì§€'],
                'ì§„': ['ì¥', 'ì›ìˆ­ì´'],
                'ì‚¬': ['ì†Œ', 'ë‹­'],
                'ì˜¤': ['í˜¸ë‘ì´', 'ê°œ'],
                'ë¯¸': ['í† ë¼', 'ë¼ì§€'],
                'ì‹ ': ['ì¥', 'ìš©'],
                'ìœ ': ['ì†Œ', 'ë±€'],
                'ìˆ ': ['í˜¸ë‘ì´', 'ë§'],
                'í•´': ['í† ë¼', 'ì–‘']
            };
            
            return matches[branch] || ['ì¢‹ì€ ê´€ê³„ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤'];
        }
        
        function getChallengingMatch(branch) {
            const matches = {
                'ì': ['ë§'],
                'ì¶•': ['ì–‘'],
                'ì¸': ['ì›ìˆ­ì´'],
                'ë¬˜': ['ë‹­'],
                'ì§„': ['ê°œ'],
                'ì‚¬': ['ë¼ì§€'],
                'ì˜¤': ['ì¥'],
                'ë¯¸': ['ì†Œ'],
                'ì‹ ': ['í˜¸ë‘ì´'],
                'ìœ ': ['í† ë¼'],
                'ìˆ ': ['ìš©'],
                'í•´': ['ë±€']
            };
            
            return matches[branch] || ['ë…¸ë ¥ì´ í•„ìš”í•œ ê´€ê³„ì…ë‹ˆë‹¤'];
        }
        
        function generateAdvice(saju) {
            const elements = analyzeElements(saju);
            const lackingElement = elements.lacking;
            
            return {
                career: getCareerAdvice(saju),
                wealth: getWealthAdvice(saju),
                health: getHealthAdvice(lackingElement),
                relationship: getRelationshipAdvice(saju),
                lucky: getLuckyItems(lackingElement)
            };
        }
        
        function getCareerAdvice(saju) {
            return 'ì°½ì˜ì„±ê³¼ ì‹¤ìš©ì„±ì„ ì¡°í™”ë¡­ê²Œ ë°œíœ˜í•  ìˆ˜ ìˆëŠ” ë¶„ì•¼ê°€ ì í•©í•©ë‹ˆë‹¤.';
        }
        
        function getWealthAdvice(saju) {
            return 'ê¾¸ì¤€í•œ ì €ì¶•ê³¼ í˜„ëª…í•œ íˆ¬ìë¡œ ì•ˆì •ì ì¸ ì¬ì‚°ì„ í˜•ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
        }
        
        function getHealthAdvice(lackingElement) {
            const advice = {
                'ëª©': 'ê°„ê³¼ ëˆˆ ê±´ê°•ì— ì‹ ê²½ì“°ê³ , ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.',
                'í™”': 'ì‹¬ì¥ ê±´ê°•ê³¼ í˜ˆì•¡ìˆœí™˜ì— ì£¼ì˜í•˜ê³ , ê·œì¹™ì ì¸ ìš´ë™ì´ í•„ìš”í•©ë‹ˆë‹¤.',
                'í† ': 'ì†Œí™”ê¸° ê±´ê°•ì— ì‹ ê²½ì“°ê³ , ê·œì¹™ì ì¸ ì‹ì‚¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.',
                'ê¸ˆ': 'í˜¸í¡ê¸°ì™€ í”¼ë¶€ ê±´ê°•ì— ì£¼ì˜í•˜ê³ , ì¶©ë¶„í•œ ìˆ˜ë¶„ ì„­ì·¨ê°€ í•„ìš”í•©ë‹ˆë‹¤.',
                'ìˆ˜': 'ì‹ ì¥ê³¼ ë°©ê´‘ ê±´ê°•ì— ì‹ ê²½ì“°ê³ , ì¶©ë¶„í•œ íœ´ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤.'
            };
            
            return advice[lackingElement] || 'ê· í˜•ì¡íŒ ìƒí™œìŠµê´€ìœ¼ë¡œ ê±´ê°•ì„ ìœ ì§€í•˜ì„¸ìš”.';
        }
        
        function getRelationshipAdvice(saju) {
            return 'ì§„ì‹¬ì–´ë¦° ì†Œí†µê³¼ ë°°ë ¤ë¡œ ê¹Šì€ ì‹ ë¢°ê´€ê³„ë¥¼ í˜•ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
        }
        
        function getLuckyItems(element) {
            const luckyItems = {
                ëª©: 'ì´ˆë¡ìƒ‰ ê³„ì—´, ë‚˜ë¬´ ì†Œì¬, ê´€ì—½ì‹ë¬¼',
                í™”: 'ë¹¨ê°•/ë¶„í™ ê³„ì—´, ì‚¼ê°í˜• ëª¨ì–‘, í–¥ì´ˆ',
                í† : 'ë…¸ë‘/ê°ˆìƒ‰ ê³„ì—´, ë„ìê¸°, ì²œì—°ì„',
                ê¸ˆ: 'í°ìƒ‰/ê¸ˆìƒ‰ ê³„ì—´, ê¸ˆì† ì•¡ì„¸ì„œë¦¬, í¬ë¦¬ìŠ¤íƒˆ',
                ìˆ˜: 'ê²€ì •/íŒŒë‘ ê³„ì—´, ìœ ë¦¬ ì†Œí’ˆ, ë¬¼ ê´€ë ¨ ì•„ì´í…œ'
            };
            
            return luckyItems[element] || 'ìì—° ì†Œì¬ì˜ ì•„ì´í…œë“¤ì´ ë„ì›€ì´ ë©ë‹ˆë‹¤.';
        }
    </script>
    
    <script>
        // ì‚¬ì£¼ ìƒì„± í•¨ìˆ˜
        function generateSaju(event) {
            event.preventDefault();
            
            const userName = document.getElementById('userName').value;
            const gender = document.getElementById('gender').value;
            const birthYear = parseInt(document.getElementById('birthYear').value);
            const birthMonth = parseInt(document.getElementById('birthMonth').value);
            const birthDay = parseInt(document.getElementById('birthDay').value);
            const birthTime = parseInt(document.getElementById('birthTime').value);
            const isLunar = document.getElementById('isLunar').checked;
            
            // ë¡œë”© í‘œì‹œ
            document.getElementById('sajuResult').style.display = 'block';
            document.getElementById('sajuResult').innerHTML = `
                <div class="fortune-loading-container">
                    <div class="fortune-loading-spinner"></div>
                    <div class="fortune-loading-text">ğŸ”® AIê°€ ${userName}ë‹˜ì˜ ì‚¬ì£¼íŒ”ìë¥¼ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤<span class="fortune-loading-dots"></span></div>
                </div>
            `;
            
            // í¼ ìˆ¨ê¸°ê¸°
            document.getElementById('sajuForm').style.display = 'none';
            
            // ì‚¬ì£¼ ê³„ì‚° ë° í‘œì‹œ
            setTimeout(() => {
                // ë§Œì„¸ë ¥ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í™œìš©í•œ ì •í™•í•œ ì‚¬ì£¼ ê³„ì‚°
                const saju = calculateSajuWithManseryeok(birthYear, birthMonth, birthDay, birthTime, isLunar);
                displaySajuResult(userName, gender, saju);
            }, 2000);
        }
        // ë§Œì„¸ë ¥ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ í™œìš©í•œ ì •í™•í•œ ì‚¬ì£¼ ê³„ì‚°
        function calculateSajuWithManseryeok(year, month, day, hour, isLunar) {
            // ê¸°ë³¸ ì‚¬ì£¼ ê³„ì‚°
            let saju = window.sajuCalculator.calculateSaju(year, month, day, hour, isLunar);
            
            // ë§Œì„¸ë ¥ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì •í™•í•œ ì¼ì£¼ í™•ì¸
            if (window.getManseryeokData) {
                let targetYear = year, targetMonth = month, targetDay = day;
                
                // ìŒë ¥ì¸ ê²½ìš° ì–‘ë ¥ìœ¼ë¡œ ë³€í™˜
                if (isLunar && window.lunarToSolar) {
                    const solarDate = window.lunarToSolar(year, month, day);
                    if (solarDate) {
                        targetYear = solarDate.year;
                        targetMonth = solarDate.month;
                        targetDay = solarDate.day;
                    }
                }
                
                // ë§Œì„¸ë ¥ ë°ì´í„°ì—ì„œ ì •í™•í•œ ê°„ì§€ ê°€ì ¸ì˜¤ê¸°
                const manseryeokData = window.getManseryeokData(targetYear, targetMonth, targetDay);
                if (manseryeokData) {
                    // ì •í™•í•œ ì¼ì£¼ë¡œ êµì²´
                    saju.dayPillar = {
                        stem: manseryeokData.dayGanji.charAt(0),
                        branch: manseryeokData.dayGanji.charAt(1)
                    };
                    
                    // ì—°ì£¼ë„ êµì²´ (ë…„ê°„ì§€)
                    if (manseryeokData.yearGanji) {
                        saju.yearPillar = {
                            stem: manseryeokData.yearGanji.charAt(0),
                            branch: manseryeokData.yearGanji.charAt(1)
                        };
                    }
                    
                    // ì¼ì£¼ê°€ ë°”ë€Œì—ˆìœ¼ë¯€ë¡œ ì‹­ì‹  ì¬ê³„ì‚°
                    saju.dayMaster = saju.dayPillar.stem;
                    saju.dayMasterElement = window.sajuCalculator.stemElements[saju.dayMaster];
                    saju.tenGods = window.sajuCalculator.calculateTenGods(saju.dayMaster, {
                        year: saju.yearPillar.stem,
                        month: saju.monthPillar.stem,
                        day: saju.dayPillar.stem,
                        hour: saju.hourPillar.stem
                    });
                    
                    // ì˜¤í–‰ ë¶„ì„ ì¬ê³„ì‚°
                    saju.elements = window.sajuCalculator.analyzeElements([
                        saju.yearPillar.stem, saju.yearPillar.branch,
                        saju.monthPillar.stem, saju.monthPillar.branch,
                        saju.dayPillar.stem, saju.dayPillar.branch,
                        saju.hourPillar.stem, saju.hourPillar.branch
                    ]);
                }
            }
            
            return saju;
        }
        
        // ì‚¬ì£¼ ê²°ê³¼ í‘œì‹œ
        function displaySajuResult(userName, gender, saju) {
            // ì‚¬ì£¼ í•´ì„ ìƒì„±
            const interpretation = generateEnhancedInterpretation(saju);
            const today = new Date();
            
            const resultHTML = `
                <div class="saju-result-container">
                    <h2 class="result-title">${userName}ë‹˜ì˜ ì‚¬ì£¼íŒ”ì ë¶„ì„ ê²°ê³¼</h2>
                    <p class="result-date">ë¶„ì„ì¼: ${today.getFullYear()}ë…„ ${today.getMonth() + 1}ì›” ${today.getDate()}ì¼</p>
                    
                    <!-- ì‚¬ì£¼íŒ”ì í‘œ -->
                    <div class="saju-table-section">
                        <h3>ğŸ¯ ì‚¬ì£¼íŒ”ì êµ¬ì„±</h3>
                        <div class="saju-table">
                            <div class="saju-pillar">
                                <div class="pillar-title">ì—°ì£¼</div>
                                <div class="pillar-stem">${saju.yearPillar ? saju.yearPillar.charAt(0) : '?'}</div>
                                <div class="pillar-branch">${saju.yearPillar ? saju.yearPillar.charAt(1) : '?'}</div>
                            </div>
                            <div class="saju-pillar">
                                <div class="pillar-title">ì›”ì£¼</div>
                                <div class="pillar-stem">${saju.monthPillar ? saju.monthPillar.charAt(0) : '?'}</div>
                                <div class="pillar-branch">${saju.monthPillar ? saju.monthPillar.charAt(1) : '?'}</div>
                            </div>
                            <div class="saju-pillar">
                                <div class="pillar-title">ì¼ì£¼</div>
                                <div class="pillar-stem">${saju.dayPillar ? saju.dayPillar.charAt(0) : '?'}</div>
                                <div class="pillar-branch">${saju.dayPillar ? saju.dayPillar.charAt(1) : '?'}</div>
                            </div>
                            <div class="saju-pillar">
                                <div class="pillar-title">ì‹œì£¼</div>
                                <div class="pillar-stem">${saju.hourPillar ? saju.hourPillar.charAt(0) : '?'}</div>
                                <div class="pillar-branch">${saju.hourPillar ? saju.hourPillar.charAt(1) : '?'}</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ì˜¤í–‰ ë¶„ì„ -->
                    <div class="element-analysis-section">
                        <h3>ğŸŒŸ ì˜¤í–‰ ë¶„ì„</h3>
                        <div class="element-bars">
                            ${Object.entries(interpretation.elements.distribution).map(([element, count]) => `
                                <div class="element-bar">
                                    <span class="element-name">${element}</span>
                                    <div class="bar-container">
                                        <div class="bar-fill" style="width: ${count * 25}%"></div>
                                    </div>
                                    <span class="element-count">${count}</span>
                                </div>
                            `).join('')}
                        </div>
                        <p class="element-balance">ì˜¤í–‰ ê· í˜•ë„: ${interpretation.elements.balance}</p>
                        <p class="element-advice">ê°€ì¥ ê°•í•œ ì›ì†ŒëŠ” <strong>${interpretation.elements.dominant}</strong>ì´ë©°, <strong>${interpretation.elements.lacking}</strong>ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.</p>
                    </div>
                    
                    <!-- ì„±ê²© ë¶„ì„ -->
                    <div class="personality-section">
                        <h3>ğŸ‘¤ ì„±ê²© ë¶„ì„</h3>
                        <p class="personality-basic">${interpretation.personality.basic}</p>
                        
                        <div class="traits-container">
                            <div class="traits-box">
                                <h4>ê°•ì </h4>
                                <ul>
                                    ${interpretation.personality.strengths.map(s => `<li>${s}</li>`).join('')}
                                </ul>
                            </div>
                            <div class="traits-box">
                                <h4>ì•½ì </h4>
                                <ul>
                                    ${interpretation.personality.weaknesses.map(w => `<li>${w}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                        
                        <p class="personality-advice"><strong>ì¡°ì–¸:</strong> ${interpretation.personality.advice}</p>
                    </div>
                    
                    <!-- ìš´ì„¸ ë¶„ì„ -->
                    <div class="fortune-section">
                        <h3>ğŸ”® ìš´ì„¸ ë¶„ì„</h3>
                        <div class="fortune-grid">
                            <div class="fortune-item">
                                <h4>ì „ì²´ìš´</h4>
                                <p>${interpretation.fortune.overall}</p>
                            </div>
                            <div class="fortune-item">
                                <h4>ì§ì—…ìš´</h4>
                                <p>${interpretation.fortune.career}</p>
                            </div>
                            <div class="fortune-item">
                                <h4>ì¬ë¬¼ìš´</h4>
                                <p>${interpretation.fortune.wealth}</p>
                            </div>
                            <div class="fortune-item">
                                <h4>ê±´ê°•ìš´</h4>
                                <p>${interpretation.fortune.health}</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ê¶í•© -->
                    <div class="compatibility-section">
                        <h3>ğŸ’‘ ê¶í•© ë¶„ì„</h3>
                        <div class="compatibility-list">
                            <div class="compatibility-item">
                                <h4>ìµœê³ ì˜ ê¶í•©</h4>
                                <p>${Array.isArray(interpretation.compatibility.best) ? interpretation.compatibility.best.join(', ') : interpretation.compatibility.best}</p>
                            </div>
                            <div class="compatibility-item">
                                <h4>ì¢‹ì€ ê¶í•©</h4>
                                <p>${Array.isArray(interpretation.compatibility.good) ? interpretation.compatibility.good.join(', ') : interpretation.compatibility.good}</p>
                            </div>
                            <div class="compatibility-item">
                                <h4>ë„ì „ì ì¸ ê¶í•©</h4>
                                <p>${Array.isArray(interpretation.compatibility.challenging) ? interpretation.compatibility.challenging.join(', ') : interpretation.compatibility.challenging}</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ì¢…í•© ì¡°ì–¸ -->
                    <div class="advice-section">
                        <h3>ğŸ’¡ ì¢…í•© ì¡°ì–¸</h3>
                        <div class="advice-grid">
                            <div class="advice-item">
                                <h4>ì§ì—…</h4>
                                <p>${interpretation.advice.career}</p>
                            </div>
                            <div class="advice-item">
                                <h4>ì¬ë¬¼</h4>
                                <p>${interpretation.advice.wealth}</p>
                            </div>
                            <div class="advice-item">
                                <h4>ê±´ê°•</h4>
                                <p>${interpretation.advice.health}</p>
                            </div>
                            <div class="advice-item">
                                <h4>ì¸ê°„ê´€ê³„</h4>
                                <p>${interpretation.advice.relationship}</p>
                            </div>
                        </div>
                        
                        <div class="lucky-items">
                            <h4>ğŸ€ í–‰ìš´ì˜ ì•„ì´í…œ</h4>
                            <p>${interpretation.advice.lucky}</p>
                        </div>
                    </div>
                    
                    <!-- ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ -->
                    <button onclick="resetSajuForm()" class="btn btn-secondary" style="margin-top: 30px;">
                        ğŸ”„ ë‹¤ì‹œ ë¶„ì„í•˜ê¸°
                    </button>
                </div>
            `;
            
            document.getElementById('sajuResult').innerHTML = resultHTML;
        }
        
        // í¼ ë¦¬ì…‹ í•¨ìˆ˜
        function resetSajuForm() {
            document.getElementById('sajuForm').style.display = 'block';
            document.getElementById('sajuResult').style.display = 'none';
            document.getElementById('sajuForm').scrollIntoView({ behavior: 'smooth' });
        }
    </script>
    
    <!-- ê´‘ê³  ìŠ¤í¬ë¦½íŠ¸ -->
    

    <!-- Non-critical scripts moved here for performance -->
    
<!-- Google AdSense ì§€ì—° ë¡œë”© -->
<script>
// AdSense ì§€ì—° ë¡œë”© (í˜ì´ì§€ ë¡œë“œ í›„ 2ì´ˆ ëŒ€ê¸°)
window.addEventListener('load', function() {
    setTimeout(function() {
        var adsScript = document.createElement('script');
        adsScript.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7905640648499222';
        adsScript.crossOrigin = 'anonymous';
        adsScript.defer = true;
        document.head.appendChild(adsScript);
    }, 2000);
});
</script>

<script>
// AdSense ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€
window.adsenseInitialized = window.adsenseInitialized || false;

function initializeAdSense() {
    if (window.adsenseInitialized) {
        console.log('AdSense already initialized');
        return;
    }
    
    window.adsenseInitialized = true;
    
    // ê¸°ì¡´ ê´‘ê³  ë¸”ë¡ í™•ì¸ ë° ì´ˆê¸°í™”
    const adBlocks = document.querySelectorAll('.adsbygoogle');
    adBlocks.forEach((ad, index) => {
        if (!ad.dataset.adsbygoogleStatus) {
            try {
                (adsbygoogle = window.adsbygoogle || []).push({});
                console.log('AdSense block initialized:', index);
            } catch (error) {
                console.warn('AdSense initialization error:', error);
            }
        }
    });
}

// í˜ì´ì§€ ë¡œë“œ í›„ AdSense ì´ˆê¸°í™”
window.addEventListener('load', function() {
    setTimeout(initializeAdSense, 1000);
});
</script>

<script>
// í†µí•© AdSense ì´ˆê¸°í™” (ì¤‘ë³µ ë°©ì§€)
(function() {
    'use strict';
    
    // ì „ì—­ í”Œë˜ê·¸ë¡œ ì´ˆê¸°í™” ìƒíƒœ ê´€ë¦¬
    window.__adsenseLoaded = window.__adsenseLoaded || false;
    window.__adsenseQueue = window.__adsenseQueue || [];
    
    function initAdsense() {
        if (window.__adsenseLoaded) return;
        
        const ads = document.querySelectorAll('.adsbygoogle:not([data-adsbygoogle-status])');
        
        if (ads.length === 0) return;
        
        // AdSense ìŠ¤í¬ë¦½íŠ¸ê°€ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸
        if (typeof adsbygoogle === 'undefined') {
            setTimeout(initAdsense, 500);
            return;
        }
        
        window.__adsenseLoaded = true;
        
        // ê° ê´‘ê³  ìŠ¬ë¡¯ ì´ˆê¸°í™”
        ads.forEach((ad, index) => {
            try {
                // ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€
                if (ad.getAttribute('data-adsbygoogle-status')) return;
                
                // ì´ˆê¸°í™” ì‹œë„
                (adsbygoogle = window.adsbygoogle || []).push({});
                
                // ìƒíƒœ í‘œì‹œ
                ad.setAttribute('data-adsbygoogle-status', 'done');
                
            } catch (e) {
                console.warn('AdSense ì´ˆê¸°í™” ì‹¤íŒ¨:', index, e.message);
            }
        });
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(initAdsense, 1000);
        });
    } else {
        setTimeout(initAdsense, 1000);
    }
    
    // ì—ëŸ¬ í•¸ë“¤ëŸ¬ ì¶”ê°€
    window.addEventListener('error', function(e) {
        if (e.message && e.message.includes('adsbygoogle.push() error')) {
            e.preventDefault();
            console.warn('AdSense ì¤‘ë³µ ì´ˆê¸°í™” ë°©ì§€ë¨');
            return false;
        }
    }, true);
})();
</script>
</body>
</html>